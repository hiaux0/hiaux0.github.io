(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}})();function U_(){Symbol.metadata??(Symbol.metadata=Symbol.for("Symbol.metadata"))}function dn(i){return typeof i=="object"&&i!==null||typeof i=="function"}const xt={get(i,e){var t;return(t=e[Symbol.metadata])==null?void 0:t[i]},define(i,e,...t){var r;let s=(r=Object.getOwnPropertyDescriptor(e,Symbol.metadata))==null?void 0:r.value;s==null&&Object.defineProperty(e,Symbol.metadata,{value:s=Object.create(null),enumerable:!0,configurable:!0,writable:!0});const n=t.length;switch(n){case 0:throw new Error("At least one key must be provided");case 1:s[t[0]]=i;return;case 2:s[t[0]]=s[t[1]]=i;return;default:{for(let o=0;o<n;++o)s[t[o]]=i;return}}},has(i,e){const t=e[Symbol.metadata];return t==null?!1:i in t},delete(i,e){const t=e[Symbol.metadata];t!=null&&Reflect.deleteProperty(t,i)}},Pr=Object.freeze,dd=Object.assign,W_=String,Ht=xt.get,pr=xt.define,Te=i=>i instanceof Promise,Ie=i=>i instanceof Array,An=i=>i instanceof Set,Us=i=>i instanceof Map,Zi=i=>i instanceof Object,Y=i=>typeof i=="function",ee=i=>typeof i=="string",q_=i=>typeof i=="number",ae=()=>Object.create(null),Ks=Object.is,we=(i,...e)=>new Error(`AUR${W_(i).padStart(4,"0")}: ${G_(i,...e)}`),K_={1:"No registration for interface: '{{0}}'",2:`'{{0}}' was registered with "none" resolver, are you injecting the right key?`,3:"Cyclic dependency found: {{0}}",4:"Resolver for {{0}} returned a null factory",5:"Invalid resolver strategy specified: {{0}}. Did you assign an invalid strategy value?",6:"Unable to autoregister dependency: {{0}}",7:'Resource key "{{0}}" already registered',8:"Unable to resolve key: {{0}}",9:"Attempted to jitRegister something that is not a constructor: '{{0}}'. Did you forget to register this resource?",10:'Attempted to jitRegister an intrinsic type: "{{0}}". Did you forget to add @inject(Key)',11:"Invalid resolver, null/undefined returned from the static register method.",12:"Attempted to jitRegister an interface: {{0}}",13:"Cannot call resolve '{{0}}' before calling prepare or after calling dispose.",14:"Key cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?A common cause is circular dependency with bundler, did you accidentally introduce circular dependency into your module graph?",15:"'{{0}}' is a native function and cannot be safely constructed by DI. If this is intentional, please use a callback or cachedCallback resolver.",16:'There is not a currently active container to resolve "{{0}}". Are you trying to "new Class(...)" that has a resolve(...) call?',17:"Failed to instantiate '{{0}}' via @newInstanceOf/@newInstanceForScope, there's no registration and no default implementation, or the default implementation does not result in factory for constructing the instances.",18:"Invalid channel name or instance: '{{0}}'.",19:"Invalid channel name or type: {{0}}.",20:"No defined value found when calling firstDefined()",21:"Invalid module transform input: {{0}}. Expected Promise or Object.",22:"The @inject decorator on the target ('{{0}}') type '{{1}}' is not supported.",23:"Resource key '{{0}}' has already been registered."},G_=(i,...e)=>{let t=K_[i];for(let s=0;s<e.length;++s)t=t.replace(`{{${s}}}`,String(e[s]));return t},pn=(...i)=>globalThis.console.error(...i),fn=(()=>{const i={};let e=!1,t=0,s=0,n=0;return r=>{switch(typeof r){case"number":return r>=0&&(r|0)===r;case"string":if(e=i[r],e!==void 0)return e;if(t=r.length,t===0)return i[r]=!1;for(s=0,n=0;n<t;++n)if(s=r.charCodeAt(n),n===0&&s===48&&t>1||s<48||s>57)return i[r]=!1;return i[r]=!0;default:return!1}}})(),pd=function(){const i=dd(ae(),{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0}),e=t=>t===""?0:t!==t.toUpperCase()?3:t!==t.toLowerCase()?2:i[t]===!0?1:0;return(t,s)=>{const n=t.length;if(n===0)return t;let r=!1,o="",a,l="",c=0,u=t.charAt(0),h=e(u),d=0;for(;d<n;++d)a=c,l=u,c=h,u=t.charAt(d+1),h=e(u),c===0?o.length>0&&(r=!0):(!r&&o.length>0&&c===2&&(r=a===3||h===3),o+=s(l,r),r=!1);return o}}(),Le=function(){const i=ae(),e=(t,s)=>s?t.toUpperCase():t.toLowerCase();return t=>{let s=i[t];return s===void 0&&(s=i[t]=pd(t,e)),s}}(),fd=function(){const i=ae();return e=>{let t=i[e];return t===void 0&&(t=Le(e),t.length>0&&(t=t[0].toUpperCase()+t.slice(1)),i[e]=t),t}}(),gd=function(){const i=ae(),e=(t,s)=>s?`-${t.toLowerCase()}`:t.toLowerCase();return t=>{let s=i[t];return s===void 0&&(s=i[t]=pd(t,e)),s}}(),Ca=i=>{const e=i.length,t=Array(e);let s=0;for(;s<e;++s)t[s]=i[s];return t},Hi=(i,e)=>{const t=e.name;e.addInitializer(function(){Reflect.defineProperty(this,t,{value:i.bind(this),writable:!0,configurable:!0,enumerable:!1})})},Ee=(...i)=>{const e=[];let t=0;const s=i.length;let n=0,r,o=0;for(;o<s;++o)if(r=i[o],r!==void 0){n=r.length;let a=0;for(;a<n;++a)e[t++]=r[a]}return e},js=(...i)=>{const e=i.length;let t,s=0;for(;e>s;++s)if(t=i[s],t!==void 0)return t;throw we(20)},Q_=function(){const i=Function.prototype,e=Object.getPrototypeOf,t=new WeakMap;let s=i,n=0,r;return function(o){if(r=t.get(o),r===void 0)for(t.set(o,r=[s=o]),n=0;(s=e(s))!==i;)r[++n]=s;return r}}();function ol(...i){return dd(ae(),...i)}const _h=(()=>{const i=new WeakMap;let e=!1,t="",s=0;return n=>(e=i.get(n),e==null&&(s=(t=n.toString()).length,e=s>28&&t.indexOf("[native code] }")===s-15,i.set(n,e)),e)})(),L=(i,e)=>Te(i)?i.then(e):e(i),oe=(...i)=>{let e,t,s,n=0,r=i.length;for(;n<r;++n)e=i[n],Te(e=i[n])&&(t===void 0?t=e:s===void 0?s=[t,e]:s.push(e));return s===void 0?t:Promise.all(s)},J_=(i,e)=>new Tt(i,0,e),fr=(i,e)=>new Tt(i,1,e),_d=(i,e)=>new Tt(i,2,e),Y_=(i,e)=>new Tt(i,3,e),X_=(i,e)=>new Tt(i,3,md(e)),go=(i,e)=>new Tt(e,5,i),Z_=(i,...e)=>new gm(i,e),mh=new WeakMap,md=i=>(e,t,s)=>{let n=mh.get(e);if(n===void 0&&mh.set(e,n=new WeakMap),n.has(s))return n.get(s);const r=i(e,t,s);return n.set(s,r),r},bt={instance:J_,singleton:fr,transient:_d,callback:Y_,cachedCallback:X_,aliasTo:go,defer:Z_},Ko=function(i){return function(t){t.register(fr(this,this),go(this,i))}},$i="au:annotation",Ws=(i,e)=>e===void 0?`${$i}:${i}`:`${$i}:${i}:${e}`,em=(i,e)=>{const t=Ht($i,i);t===void 0?pr([e],i,$i):t.push(e)},tm=Pr({name:"au:annotation",appendTo:em,set(i,e,t){pr(t,i,Ws(e))},get:(i,e)=>Ht(Ws(e),i),getKeys(i){let e=Ht($i,i);return e===void 0&&pr(e=[],i,$i),e},isKey:i=>i.startsWith($i),keyFor:Ws}),Nt="au:resource",Xs=(i,e,t)=>`${Nt}:${i}`,vd={annotation:tm},bd=Object.prototype.hasOwnProperty;function Vt(i,e,t,s){let n=Ht(Ws(i),t);return n===void 0?(n=e[i],n===void 0?(n=t[i],n===void 0||!bd.call(t,i)?s():n):n):n}function Gt(i,e,t){let s=Ht(Ws(i),e);return s===void 0?(s=e[i],s===void 0||!bd.call(e,i)?t():s):s}function Qt(i,e,t){const s=e[i];return s===void 0?t():s}const rs=Symbol.for("au:registrable"),sm={none(i){throw we(2,i)},singleton:i=>new Tt(i,1,i),transient:i=>new Tt(i,2,i)};class ts{constructor(e,t){this.inheritParentResources=e,this.defaultResolver=t}static from(e){return e===void 0||e===ts.DEFAULT?ts.DEFAULT:new ts(e.inheritParentResources??!1,e.defaultResolver??sm.singleton)}}ts.DEFAULT=ts.from({});const im=i=>new Qn(null,ts.from(i)),nm=new Set("Array ArrayBuffer Boolean DataView Date Error EvalError Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Number Object Promise RangeError ReferenceError RegExp Set SharedArrayBuffer String SyntaxError TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array URIError WeakMap WeakSet".split(" "));let rm=0,be=null;class Qn{get depth(){return this._parent===null?0:this._parent.depth+1}get parent(){return this._parent}constructor(e,t){if(this.id=++rm,this._registerDepth=0,this._disposableResolvers=new Map,this._parent=e,this.config=t,this._resolvers=new Map,this.res={},e===null)this.root=this,this._factories=new Map;else if(this.root=e.root,this._factories=e._factories,t.inheritParentResources)for(const s in e.res)this.registerResolver(s,e.res[s]);this._resolvers.set(Bi,am)}register(...e){var u,h,d,p;if(++this._registerDepth===100)throw we(6,...e);let t,s,n,r,o,a=0,l=e.length,c;for(;a<l;++a)if(t=e[a],!!dn(t))if(Mn(t))t.register(this);else if((c=Ht(Nt,t))!=null)c.register(this);else if(cm(t)){const f=(u=t[Symbol.metadata])==null?void 0:u[rs];if(Mn(f))f.register(this);else if(ee((h=t.$au)==null?void 0:h.type)){const _=t.$au,g=(t.aliases??U).concat(_.aliases??U);let v=`${Nt}:${_.type}:${_.name}`;if(this.has(v,!1)){(d=globalThis.console)==null||d.warn(we(7,v));continue}for(go(t,v).register(this),this.has(t,!1)||fr(t,t).register(this),r=0,o=g.length;r<o;++r){if(v=`${Nt}:${_.type}:${g[r]}`,this.has(v,!1)){(p=globalThis.console)==null||p.warn(we(7,v));continue}go(t,v).register(this)}}else fr(t,t).register(this)}else for(s=Object.keys(t),r=0,o=s.length;r<o;++r)n=t[s[r]],dn(n)&&(Mn(n)?n.register(this):this.register(n));return--this._registerDepth,this}registerResolver(e,t,s=!1){Rn(e);const n=this._resolvers,r=n.get(e);if(r==null){if(n.set(e,t),ka(e)){if(this.res[e]!==void 0)throw we(7,e);this.res[e]=t}}else r instanceof Tt&&r._strategy===4?r._state.push(t):n.set(e,new Tt(e,4,[r,t]));return s&&this._disposableResolvers.set(e,t),t}deregister(e){Rn(e);const t=this._resolvers.get(e);t!=null&&(this._resolvers.delete(e),ka(e)&&delete this.res[e],this._disposableResolvers.has(e)&&(t.dispose(),this._disposableResolvers.delete(e)))}registerTransformer(e,t){const s=this.getResolver(e);if(s==null)return!1;if(s.getFactory){const n=s.getFactory(this);return n==null?!1:(n.registerTransformer(t),!0)}return!1}getResolver(e,t=!0){if(Rn(e),e.resolve!==void 0)return e;const s=be;let n=be=this,r,o;try{for(;n!=null;)if(r=n._resolvers.get(e),r==null){if(n._parent==null)return o=wh(e)?this:n,t?this._jitRegister(e,o):null;n=n._parent}else return r}finally{be=s}return null}has(e,t=!1){var s;return this._resolvers.has(e)||ka(e)&&e in this.res||((t&&((s=this._parent)==null?void 0:s.has(e,!0)))??!1)}get(e){if(Rn(e),e.$isResolver)return e.resolve(this,this);const t=be;let s=be=this,n,r;try{for(;s!=null;)if(n=s._resolvers.get(e),n==null){if(s._parent==null)return r=wh(e)?this:s,n=this._jitRegister(e,r),n.resolve(s,this);s=s._parent}else return n.resolve(s,this)}finally{be=t}throw we(8,e)}getAll(e,t=!1){Rn(e);const s=be,n=be=this;let r=n,o,a=U;try{if(t){for(;r!=null;)o=r._resolvers.get(e),o!=null&&(a=a.concat(bh(o,r,n))),r=r._parent;return a}for(;r!=null;)if(o=r._resolvers.get(e),o==null){if(r=r._parent,r==null)return U}else return bh(o,r,n)}finally{be=s}return U}invoke(e,t){if(_h(e))throw we(15,e);const s=be;be=this;{let n,r;try{n=en(e).map(o=>this.get(r=o))}catch(o){throw pn(`[DEV:aurelia] Error during construction of ${e.name?e.name:`(Anonymous) ${String(e)}`}, caused by dependency: ${String(r)}`),be=s,o}try{return t===void 0?new e(...n):new e(...n,...t)}catch(o){throw pn(`[DEV:aurelia] Error during construction of ${e.name?e.name:`(Anonymous) ${String(e)}`}`),o}finally{be=s}}try{return t===void 0?new e(...en(e).map(gr,this)):new e(...en(e).map(gr,this),...t)}finally{be=s}}hasFactory(e){return this._factories.has(e)}getFactory(e){let t=this._factories.get(e);if(t===void 0){if(_h(e))throw we(15,e);this._factories.set(e,t=new om(e,en(e)))}return t}registerFactory(e,t){this._factories.set(e,t)}createChild(e){return e===void 0&&this.config.inheritParentResources?this.config===ts.DEFAULT?new Qn(this,this.config):new Qn(this,ts.from({...this.config,inheritParentResources:!1})):new Qn(this,ts.from(e??this.config))}disposeResolvers(){var r;const e=this._resolvers,t=this._disposableResolvers;let s,n;for([n,s]of t.entries())(r=s.dispose)==null||r.call(s),e.delete(n);t.clear()}useResources(e){const t=e.res;for(const s in t)this.registerResolver(s,t[s])}find(e,t){var o,a;const s=ee(t)?`${Nt}:${e}:${t}`:e;let n=this,r=n.res[s];return r==null&&(n=n.root,r=n.res[s]),r==null?null:((a=(o=r.getFactory)==null?void 0:o.call(r,n))==null?void 0:a.Type)??null}dispose(){this._disposableResolvers.size>0&&this.disposeResolvers(),this._resolvers.clear(),this.root===this&&(this._factories.clear(),this.res={})}_jitRegister(e,t){const s=Mn(e);if(!Y(e)&&!s)throw we(9,e);if(nm.has(e.name))throw we(10,e);if(s){const r=e.register(t,e);if(!(r instanceof Object)||r.resolve==null){const o=t._resolvers.get(e);if(o!=null)return o;throw we(11,e)}return r}if(e.$isInterface)throw we(12,e.friendlyName);const n=this.config.defaultResolver(e,t);return t._resolvers.set(e,n),n}}class om{constructor(e,t){this.Type=e,this.dependencies=t,this.transformers=null}construct(e,t){const s=be;be=e;let n;{let r,o;try{r=this.dependencies.map(a=>e.get(o=a))}catch(a){throw pn(`[DEV:aurelia] Error during construction of ${this.Type.name?this.Type.name:`(Anonymous) ${String(this.Type)}`}, caused by dependency: ${String(o)}`),be=s,a}try{return t===void 0?n=new this.Type(...r):n=new this.Type(...r,...t),this.transformers==null?n:this.transformers.reduce(vh,n)}catch(a){throw pn(`[DEV:aurelia] Error during construction of ${this.Type.name?this.Type.name:`(Anonymous) ${String(this.Type)}`}`),a}finally{be=s}}try{return t===void 0?n=new this.Type(...this.dependencies.map(gr,e)):n=new this.Type(...this.dependencies.map(gr,e),...t),this.transformers==null?n:this.transformers.reduce(vh,n)}finally{be=s}}registerTransformer(e){(this.transformers??(this.transformers=[])).push(e)}}function vh(i,e){return e(i)}function Rn(i){if(i==null)throw we(14)}function gr(i){return this.get(i)}function S(...i){if(be==null)throw we(16,...i);if(i.length===1)try{return be.get(i[0])}catch(e){throw pn(`[DEV:aurelia] resolve() call error for: ${String(i[0])}`),e}else{let e;try{return i.map(t=>be.get(e=t))}catch(t){throw pn(`[DEV:aurelia] resolve() call error for: ${String(e)}`),t}}return i.length===1?be.get(i[0]):i.map(gr,be)}const bh=(i,e,t)=>{if(i instanceof Tt&&i._strategy===4){const s=i._state,n=s.length,r=Array(n);let o=0;for(;o<n;++o)r[o]=s[o].resolve(e,t);return r}return[i.resolve(e,t)]},am={$isResolver:!0,resolve(i,e){return e}},Mn=i=>Y(i==null?void 0:i.register),lm=i=>Mn(i)&&typeof i.registerInRequestor=="boolean",wh=i=>lm(i)&&i.registerInRequestor,cm=i=>i.prototype!==void 0,ka=i=>ee(i)&&i.indexOf(":")>0;class hm{constructor(e,t){this._container=e,this._key=t}instance(e){return this._registerResolver(0,e)}singleton(e){return this._registerResolver(1,e)}transient(e){return this._registerResolver(2,e)}callback(e){return this._registerResolver(3,e)}cachedCallback(e){return this._registerResolver(3,md(e))}aliasTo(e){return this._registerResolver(5,e)}_registerResolver(e,t){const{_container:s,_key:n}=this;return this._container=this._key=void 0,s.registerResolver(n,new Tt(n,e,t))}}const On=i=>{const e=i.slice(),t=Object.keys(i),s=t.length;let n;for(let r=0;r<s;++r)n=t[r],fn(n)||(e[n]=i[n]);return e},no=Ws("di:paramtypes"),um=i=>Ht(no,i),wd=i=>Ht("design:paramtypes",i),yh=i=>{var e;return(e=i.metadata)[no]??(e[no]=[])},en=i=>{const e=Ws("di:dependencies");let t=Ht(e,i);if(t===void 0){const s=i.inject;if(s===void 0){const n=wd(i),r=um(i);if(n===void 0)if(r===void 0){const o=Object.getPrototypeOf(i);Y(o)&&o!==Function.prototype?t=On(en(o)):t=[]}else t=On(r);else if(r===void 0)t=On(n);else{t=On(n);let o=r.length,a,l=0;for(;l<o;++l)a=r[l],a!==void 0&&(t[l]=a);const c=Object.keys(r);let u;for(l=0,o=c.length,l=0;l<o;++l)u=c[l],fn(u)||(t[u]=r[u])}}else t=On(s);pr(t,i,e)}return t},os=(i,e)=>{const t=Y(i)?i:e,s=(ee(i)?i:void 0)??"(anonymous)",n={$isInterface:!0,friendlyName:s,toString:()=>`InterfaceSymbol<${s}>`,register:t!=null?(r,o)=>t(new hm(r,o??n)):void 0};return n},Go=(...i)=>(e,t)=>{switch(t.kind){case"class":{const s=yh(t);let n,r=0;for(;r<i.length;++r)n=i[r],n!==void 0&&(s[r]=n);break}case"field":{const s=yh(t),n=i[0];n!==void 0&&(s[t.name]=n);break}default:throw we(22,String(t.name),t.kind)}},ut=(U_(),{createContainer:im,getDesignParamtypes:wd,getDependencies:en,createInterface:os,inject:Go,transient(i){return i.register=function(e){return _d(i,i).register(e,i)},i.registerInRequestor=!1,i},singleton(i,e=fm){return i.register=function(t){return fr(i,i).register(t,i)},i.registerInRequestor=e.scoped,i}}),Bi=os("IContainer"),dm=Bi;function Ch(i,e){return ut.transient(i)}function pm(i,e){return i==null?Ch:Ch(i)}const fm={scoped:!1};class Tt{get $isResolver(){return!0}constructor(e,t,s){this._resolving=!1,this._cachedFactory=null,this._key=e,this._strategy=t,this._state=s}register(e,t){return e.registerResolver(t||this._key,this)}resolve(e,t){switch(this._strategy){case 0:return this._state;case 1:{if(this._resolving)throw we(3,this._state.name);return this._resolving=!0,this._state=(this._cachedFactory=e.getFactory(this._state)).construct(t),this._strategy=0,this._resolving=!1,this._state}case 2:{const s=e.getFactory(this._state);if(s===null)throw we(4,this._key);return s.construct(t)}case 3:return this._state(e,t,this);case 4:return this._state[0].resolve(e,t);case 5:return t.get(this._state);default:throw we(5,this._strategy)}}getFactory(e){var t,s;switch(this._strategy){case 1:case 2:return e.getFactory(this._state);case 5:return((s=(t=e.getResolver(this._state))==null?void 0:t.getFactory)==null?void 0:s.call(t,e))??null;case 0:return this._cachedFactory;default:return null}}}class $e{get friendlyName(){return this._name}constructor(e,t=null,s=null){this._name=e,this._instance=t,this._Type=s}prepare(e){this._instance=e}get $isResolver(){return!0}resolve(){if(this._instance==null)throw we(13,this._name);return this._instance}getFactory(e){return this._Type==null?null:e.getFactory(this._Type)}dispose(){this._instance=null}}class gm{constructor(e,t){this.key=e,this.params=t}register(e){e.has(this.key,!0)?e.get(this.key).register(e,...this.params):e.register(...this.params.filter(t=>typeof t=="object"))}}const U=Pr([]),$t=Pr({});function jt(){}const $n=os("IPlatform");function Er(i){return function(e){function t(s,n){Go(t)(s,n)}return t.$isResolver=!0,t.resolve=function(s,n){return i(e,s,n)},t}}const Xl=(i,e=!1)=>{function t(s,n){Go(t)(s,n)}return t.$isResolver=!0,t.resolve=(s,n)=>n.getAll(i,e),t},yd=Er((i,e,t)=>{if(t.has(i,!0))return t.get(i)}),_m=Er((i,e,t)=>t.has(i,!1)?t.get(i):void 0),gn=Er((i,e,t)=>t.has(i,!1)?t.get(i):t.root.get(i)),mm=Er((i,e,t)=>t.has(i,!1)?t.get(i):t.root.has(i,!1)?t.root.get(i):void 0),vm=Er((i,e,t)=>t===t.root?t.getAll(i,!1):t.has(i,!1)?t.getAll(i,!1).concat(t.root.getAll(i,!1)):t.root.getAll(i,!1));function Ui(i,e,t,s,n,r){function o(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var a=s.kind,l=a==="getter"?"get":a==="setter"?"set":"value",c=i?s.static?i:i.prototype:null,u=c?Object.getOwnPropertyDescriptor(c,s.name):{},h,d=!1,p=t.length-1;p>=0;p--){var f={};for(var _ in s)f[_]=_==="access"?{}:s[_];for(var _ in s.access)f.access[_]=s.access[_];f.addInitializer=function(v){if(d)throw new TypeError("Cannot add initializers after decoration has completed");r.push(o(v||null))};var g=(0,t[p])(a==="accessor"?{get:u.get,set:u.set}:u[l],f);if(a==="accessor"){if(g===void 0)continue;if(g===null||typeof g!="object")throw new TypeError("Object expected");(h=o(g.get))&&(u.get=h),(h=o(g.set))&&(u.set=h),(h=o(g.init))&&n.unshift(h)}else(h=o(g))&&(a==="field"?n.unshift(h):u[l]=h)}c&&Object.defineProperty(c,s.name,u),d=!0}function bm(i,e,t){for(var s=arguments.length>2,n=0;n<e.length;n++)t=s?e[n].call(i,t):e[n].call(i);return s?t:void 0}const Jn=0,Yn=1,Xn=2,cn=3,Zn=4,er=5,wm=6,ym=Pr({trace:Jn,debug:Yn,info:Xn,warn:cn,error:Zn,fatal:er,none:wm}),Cd=os("ILogConfig",i=>i.instance(new Sm("no-colors",cn))),Cm=os("ISink"),km=os("ILogEventFactory",i=>i.singleton(Tm)),Be=os("ILogger",i=>i.singleton(Im)),Am=os("ILogScope"),$m=Pr({key:Ws("logger-sink-handles"),define(i,e){pr(e.handles,i,this.key)},getHandles(i){return Ht(this.key,i.constructor)}}),vs=ol({red(i){return`\x1B[31m${i}\x1B[39m`},green(i){return`\x1B[32m${i}\x1B[39m`},yellow(i){return`\x1B[33m${i}\x1B[39m`},blue(i){return`\x1B[34m${i}\x1B[39m`},magenta(i){return`\x1B[35m${i}\x1B[39m`},cyan(i){return`\x1B[36m${i}\x1B[39m`},white(i){return`\x1B[37m${i}\x1B[39m`},grey(i){return`\x1B[90m${i}\x1B[39m`}});class Sm{constructor(e,t){this.colorOptions=e,this.level=t}}const Aa=function(){const i={"no-colors":ol({TRC:"TRC",DBG:"DBG",INF:"INF",WRN:"WRN",ERR:"ERR",FTL:"FTL",QQQ:"???"}),colors:ol({TRC:vs.grey("TRC"),DBG:vs.grey("DBG"),INF:vs.white("INF"),WRN:vs.yellow("WRN"),ERR:vs.red("ERR"),FTL:vs.red("FTL"),QQQ:vs.grey("???")})};return(e,t)=>e<=Jn?i[t].TRC:e<=Yn?i[t].DBG:e<=Xn?i[t].INF:e<=cn?i[t].WRN:e<=Zn?i[t].ERR:e<=er?i[t].FTL:i[t].QQQ}(),kh=(i,e)=>e==="no-colors"?i.join("."):i.map(vs.cyan).join("."),$a=(i,e)=>e==="no-colors"?new Date(i).toISOString():vs.grey(new Date(i).toISOString());class xm{constructor(e,t,s,n,r,o){this.severity=e,this.message=t,this.optionalParams=s,this.scope=n,this.colorOptions=r,this.timestamp=o}toString(){const{severity:e,message:t,scope:s,colorOptions:n,timestamp:r}=this;return s.length===0?`${$a(r,n)} [${Aa(e,n)}] ${t}`:`${$a(r,n)} [${Aa(e,n)} ${kh(s,n)}] ${t}`}getFormattedLogInfo(e=!1){const{severity:t,message:s,scope:n,colorOptions:r,timestamp:o,optionalParams:a}=this;let l=null,c="";e&&s instanceof Error?l=s:c=s;const u=n.length===0?"":` ${kh(n,r)}`;let h=`${$a(o,r)} [${Aa(t,r)}${u}] ${c}`;if(a===void 0||a.length===0)return l===null?[h]:[h,l];let d=0;for(;h.includes("%s");)h=h.replace("%s",String(a[d++]));return l!==null?[h,l,...a.slice(d)]:[h,...a.slice(d)]}}class Tm{constructor(){this.config=S(Cd)}createLogEvent(e,t,s,n){return new xm(t,s,n,e.scope,this.config.colorOptions,Date.now())}}let Im=(()=>{var i;let e=[],t,s,n,r,o,a;return i=class{constructor(c=S(Cd),u=S(km),h=S(Xl(Cm)),d=S(yd(Am))??[],p=null){this.scope=(bm(this,e),d),this._scopedLoggers=ae();let f,_,g,v,m,A;if(this.config=c,this._factory=u,this.sinks=h,p===null){this.root=this,this.parent=this,f=this._traceSinks=[],_=this._debugSinks=[],g=this._infoSinks=[],v=this._warnSinks=[],m=this._errorSinks=[],A=this._fatalSinks=[];for(const w of h){const k=$m.getHandles(w);((k==null?void 0:k.includes(Jn))??!0)&&f.push(w),((k==null?void 0:k.includes(Yn))??!0)&&_.push(w),((k==null?void 0:k.includes(Xn))??!0)&&g.push(w),((k==null?void 0:k.includes(cn))??!0)&&v.push(w),((k==null?void 0:k.includes(Zn))??!0)&&m.push(w),((k==null?void 0:k.includes(er))??!0)&&A.push(w)}}else this.root=p.root,this.parent=p,f=this._traceSinks=p._traceSinks,_=this._debugSinks=p._debugSinks,g=this._infoSinks=p._infoSinks,v=this._warnSinks=p._warnSinks,m=this._errorSinks=p._errorSinks,A=this._fatalSinks=p._fatalSinks}trace(c,...u){this.config.level<=Jn&&this._emit(this._traceSinks,Jn,c,u)}debug(c,...u){this.config.level<=Yn&&this._emit(this._debugSinks,Yn,c,u)}info(c,...u){this.config.level<=Xn&&this._emit(this._infoSinks,Xn,c,u)}warn(c,...u){this.config.level<=cn&&this._emit(this._warnSinks,cn,c,u)}error(c,...u){this.config.level<=Zn&&this._emit(this._errorSinks,Zn,c,u)}fatal(c,...u){this.config.level<=er&&this._emit(this._fatalSinks,er,c,u)}scopeTo(c){const u=this._scopedLoggers;let h=u[c];return h===void 0&&(h=u[c]=new i(this.config,this._factory,null,this.scope.concat(c),this)),h}_emit(c,u,h,d){const p=Y(h)?h():h,f=this._factory.createLogEvent(this,u,p,d);for(let _=0,g=c.length;_<g;++_)c[_].handleEvent(f)}},(()=>{const l=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;t=[Hi],s=[Hi],n=[Hi],r=[Hi],o=[Hi],a=[Hi],Ui(i,null,t,{kind:"method",name:"trace",static:!1,private:!1,access:{has:c=>"trace"in c,get:c=>c.trace},metadata:l},null,e),Ui(i,null,s,{kind:"method",name:"debug",static:!1,private:!1,access:{has:c=>"debug"in c,get:c=>c.debug},metadata:l},null,e),Ui(i,null,n,{kind:"method",name:"info",static:!1,private:!1,access:{has:c=>"info"in c,get:c=>c.info},metadata:l},null,e),Ui(i,null,r,{kind:"method",name:"warn",static:!1,private:!1,access:{has:c=>"warn"in c,get:c=>c.warn},metadata:l},null,e),Ui(i,null,o,{kind:"method",name:"error",static:!1,private:!1,access:{has:c=>"error"in c,get:c=>c.error},metadata:l},null,e),Ui(i,null,a,{kind:"method",name:"fatal",static:!1,private:!1,access:{has:c=>"fatal"in c,get:c=>c.fatal},metadata:l},null,e),l&&Object.defineProperty(i,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:l})})(),i})();const Pm=os(i=>i.singleton(Om)),Em=i=>i;class Rm{constructor(e){this._promiseCache=new Map,this._objectCache=new Map,this._transform=e}transform(e){if(e instanceof Promise)return this._transformPromise(e);if(typeof e=="object"&&e!==null)return this._transformObject(e);throw we(21,e)}_transformPromise(e){if(this._promiseCache.has(e))return this._promiseCache.get(e);const t=e.then(s=>this._transformObject(s));return this._promiseCache.set(e,t),t.then(s=>{this._promiseCache.set(e,s)}),t}_transformObject(e){if(this._objectCache.has(e))return this._objectCache.get(e);const t=this._transform(this._analyze(e));return this._objectCache.set(e,t),t instanceof Promise&&t.then(s=>{this._objectCache.set(e,s)}),t}_analyze(e){if(e==null)throw we(21,e);if(typeof e!="object")return new Ah(e,[]);let t,s,n,r;const o=[];for(const a in e){switch(typeof(t=e[a])){case"object":if(t===null)continue;s=Y(t.register),n=!1,r=null;break;case"function":s=Y(t.register),n=t.prototype!==void 0,r=Ht(Nt,t)??null;break;default:continue}o.push(new Lm(a,t,s,n,r))}return new Ah(e,o)}}class Om{constructor(){this.transformers=new Map}load(e,t=Em){const s=this.transformers;let n=s.get(t);return n===void 0&&s.set(t,n=new Rm(t)),n.transform(e)}dispose(){this.transformers.clear()}}class Ah{constructor(e,t){this.raw=e,this.items=t}}class Lm{constructor(e,t,s,n,r){this.key=e,this.value=t,this.isRegistry=s,this.isConstructable=n,this.definition=r}}class Vm{constructor(e,t){this.type=e,this.cb=t}handle(e){e instanceof this.type&&this.cb.call(null,e)}}const Dm=os("IEventAggregator",i=>i.singleton(Zl));class Zl{constructor(){this.eventLookup={},this.messageHandlers=[]}publish(e,t){if(!e)throw we(18,e);if(ee(e)){let s=this.eventLookup[e];if(s!==void 0){s=s.slice();let n=s.length;for(;n-- >0;)s[n](t,e)}}else{const s=this.messageHandlers.slice();let n=s.length;for(;n-- >0;)s[n].handle(e)}}subscribe(e,t){if(!e)throw we(19,e);let s,n;return ee(e)?(this.eventLookup[e]===void 0&&(this.eventLookup[e]=[]),s=t,n=this.eventLookup[e]):(s=new Vm(e,t),n=this.messageHandlers),n.push(s),{dispose(){const r=n.indexOf(s);r!==-1&&n.splice(r,1)}}}subscribeOnce(e,t){const s=this.subscribe(e,(n,r)=>{s.dispose(),t(n,r)});return s}}const kd="AccessThis",Bm="AccessBoundary",ec="AccessGlobal",tc="AccessScope",Nm="ArrayLiteral",Mm="ObjectLiteral",jm="PrimitiveLiteral",Fm="Template",zm="Unary",Hm="CallScope",Um="CallMember",Wm="CallFunction",qm="CallGlobal",Qo="AccessMember",Ad="AccessKeyed",Km="TaggedTemplate",Gm="Binary",Qm="Conditional",Jm="Assign",Ym="ArrowFunction",Xm="ValueConverter",Zm="BindingBehavior",$d="ArrayBindingPattern",Sd="ObjectBindingPattern",xd="BindingIdentifier",ev="ForOfStatement",tv="Interpolation",Td="ArrayDestructuring",sv="ObjectDestructuring",iv="DestructuringAssignmentLeaf",nv="Custom";class Id{constructor(e){this.value=e,this.$kind=nv}evaluate(...e){return this.value}assign(...e){return e}bind(...e){}unbind(...e){}accept(e){}}class rv{constructor(e,t,s){this.expression=e,this.name=t,this.args=s,this.$kind=Zm,this.key=`_bb_${t}`}}class ov{constructor(e,t,s){this.expression=e,this.name=t,this.args=s,this.$kind=Xm}}class av{constructor(e,t,s="="){this.target=e,this.value=t,this.op=s,this.$kind=Jm}}class lv{constructor(e,t,s){this.condition=e,this.yes=t,this.no=s,this.$kind=Qm}}class cv{constructor(e){this.name=e,this.$kind=ec}}class tr{constructor(e=0){this.ancestor=e,this.$kind=kd}}class hv{constructor(){this.$kind=Bm}}class sr{constructor(e,t=0){this.name=e,this.ancestor=t,this.$kind=tc}}const Pd=i=>i.$kind===ec||(i.$kind===Qo||i.$kind===Ad)&&i.accessGlobal;class al{constructor(e,t,s=!1){this.object=e,this.name=t,this.optional=s,this.$kind=Qo,this.accessGlobal=Pd(e)}}class Ed{constructor(e,t,s=!1){this.object=e,this.key=t,this.optional=s,this.$kind=Ad,this.accessGlobal=Pd(e)}}class Rd{constructor(e,t,s=0,n=!1){this.name=e,this.args=t,this.ancestor=s,this.optional=n,this.$kind=Hm}}class _o{constructor(e,t,s,n=!1,r=!1){this.object=e,this.name=t,this.args=s,this.optionalMember=n,this.optionalCall=r,this.$kind=Um}}class ro{constructor(e,t,s=!1){this.func=e,this.args=t,this.optional=s,this.$kind=Wm}}class uv{constructor(e,t){this.name=e,this.args=t,this.$kind=qm}}class dv{constructor(e,t,s){this.operation=e,this.left=t,this.right=s,this.$kind=Gm}}class $h{constructor(e,t,s=0){this.operation=e,this.expression=t,this.pos=s,this.$kind=zm}}class Me{constructor(e){this.value=e,this.$kind=jm}}Me.$undefined=new Me(void 0);Me.$null=new Me(null);Me.$true=new Me(!0);Me.$false=new Me(!1);Me.$empty=new Me("");class ll{constructor(e){this.elements=e,this.$kind=Nm}}ll.$empty=new ll(U);class cl{constructor(e,t){this.keys=e,this.values=t,this.$kind=Mm}}cl.$empty=new cl(U,U);class mo{constructor(e,t=U){this.cooked=e,this.expressions=t,this.$kind=Fm}}mo.$empty=new mo([""]);class Od{constructor(e,t,s,n=U){this.cooked=e,this.func=s,this.expressions=n,this.$kind=Km,e.raw=t}}class pv{constructor(e){this.elements=e,this.$kind=$d}}class fv{constructor(e,t){this.keys=e,this.values=t,this.$kind=Sd}}class vo{constructor(e){this.name=e,this.$kind=xd}}class gv{constructor(e,t,s){this.declaration=e,this.iterable=t,this.semiIdx=s,this.$kind=ev}}class _v{constructor(e,t=U){this.parts=e,this.expressions=t,this.$kind=tv,this.isMulti=t.length>1,this.firstExpression=t[0]}}class mv{constructor(e,t,s,n){this.$kind=e,this.list=t,this.source=s,this.initializer=n}}class Ld{constructor(e,t,s){this.target=e,this.source=t,this.initializer=s,this.$kind=iv}}class hl{constructor(e,t,s=!1){this.args=e,this.body=t,this.rest=s,this.$kind=Ym}}const ul=String,oo=()=>Object.create(null),de=(i,...e)=>new Error(`AUR${ul(i).padStart(4,"0")}: ${bv(i,...e)}`),vv={99:"Method {{0}} not implemented",101:'Ast eval error: binding behavior "{{0}}" could not be found. Did you forget to register it as a dependency?',102:'Ast eval error: binding behavior "{{0}}" already applied.',103:'Ast eval error: value converter "{{0}}" could not be found. Did you forget to register it as a dependency?',105:"Ast eval error: unable to find $host context. Did you forget [au-slot] attribute?",106:'Ast eval error: invalid assignment. "$host" is a reserved keyword.',107:"Ast eval error: expression is not a function.",109:'Ast eval error: unknown unary operator: "{{0}}"',108:'Ast eval error: unknown binary operator: "{{0}}"',110:"Ast eval error: left-hand side of tagged template expression is not a function.",111:'Ast eval error: expected "{{0}}" to be a function',112:"Ast eval error: cannot use non-object value for destructuring assignment.",151:'Expression error: invalid start: "{{0}}"',152:'Expression error: spread operator is not supported: "{{0}}"',153:'Expression error: expected identifier: "{{0}}"',154:'Expression error: invalid member expression: "{{0}}"',155:'Expression error: unexpected end of expression: "{{0}}"',156:'Expression error: unconsumed token: "{{0}}" at position {{1}} of "{{2}}"',157:"Expression error: invalid empty expression. Empty expression is only valid in event bindings (trigger, delegate, capture etc...)",158:'Expression error: left hand side of expression is not assignable: "{{0}}"',159:'Expression error: expected identifier to come after value converter operator: "{{0}}"',160:"Expression error: expected identifier to come after binding behavior operator: {{0}}",161:'Expression error: unexpected keyword "of": "{{0}}"',162:'Expression error: unexpected keyword "import": "{{0}}"',163:'Expression error: invalid BindingIdentifier at left hand side of "of": "{{0}}" | kind: {{1}}',164:'Expression error: invalid or unsupported property definition in object literal: "{{0}}"',165:'Expression error: unterminated quote in string literal: "{{0}}"',166:'Expression error: unterminated template string: "{{0}}"',167:'Expression error: missing expected token "{{0}}" in "{{1}}"',168:'Expression error: unexpected character: "{{0}}"',170:'Expression error: unexpected "{{0}}" at position "{{1}}" for destructuring assignment in "{{2}}"',171:'Expression error: unexpected {{0}} at position "{{1}}" for optional chain in "{{2}}"',172:'Expression error: invalid tagged template on optional chain in "{{1}}"',173:'Expression error: invalid arrow parameter list in "{{0}}"',174:'Expression error: arrow function with default parameters is not supported: "{{0}}"',175:'Expression error: arrow function with destructuring parameters is not supported: "{{0}}"',176:'Expression error: rest parameter must be last formal parameter in arrow function: "{{0}}"',178:'Expression error: arrow function with function body is not supported: "{{0}}"',179:`Expression error: unexpected token '.' at position "{{1}}" in "{{0}}"`},bv=(i,...e)=>{var s;let t=vv[i];for(let n=0;n<e.length;++n){const r=new RegExp(`{{${n}(:.*)?}}`,"g");let o=r.exec(t);for(;o!=null;){const a=(s=o[1])==null?void 0:s.slice(1);let l=e[n];if(l!=null)switch(a){case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=ul(l[a.slice(1)]):l=ul(l)}t=t.slice(0,o.index)+l+t.slice(r.lastIndex),o=r.exec(t)}}return t},Rr=ut.createInterface("IExpressionParser",i=>i.singleton(wv));class wv{constructor(){this._expressionLookup=oo(),this._forOfLookup=oo(),this._interpolationLookup=oo()}parse(e,t){let s;switch(t){case Bd:return new Id(e);case bo:return s=this._interpolationLookup[e],s===void 0&&(s=this._interpolationLookup[e]=this.$parse(e,t)),s;case ws:return s=this._forOfLookup[e],s===void 0&&(s=this._forOfLookup[e]=this.$parse(e,t)),s;default:{if(e.length===0){if(t===$v||t===Sh)return Me.$empty;throw Fv()}return s=this._expressionLookup[e],s===void 0&&(s=this._expressionLookup[e]=this.$parse(e,t)),s}}}$parse(e,t){return te=e,Q=0,ss=e.length,_t=0,Pi=0,D=6291456,ge="",ue=Ei(0),ne=!0,Z=!1,jn=!0,ic=-1,Ae(61,t===void 0?Sh:t)}}function sc(i){switch(i){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return i}}const yv=Me.$false,Cv=Me.$true,kv=Me.$null,Vd=Me.$undefined,ir=new tr(0),Sa=new tr(1),Av=new hv,As="None",bo="Interpolation",ws="IsIterator",Dd="IsChainable",$v="IsFunction",Sh="IsProperty",Bd="IsCustom";let te="",Q=0,ss=0,_t=0,Pi=0,D=6291456,ge="",ue,ne=!0,Z=!1,jn=!0,ic=-1;const _r=String.fromCharCode,Ei=i=>te.charCodeAt(i),$s=()=>te.slice(Pi,Q),Sv="Infinity NaN isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent Array BigInt Boolean Date Map Number Object RegExp Set String JSON Math Intl".split(" ");function Ae(i,e){if(e===Bd)return new Id(te);if(Q===0){if(e===bo)return Lv();if(F(),D&4194304)throw Nv()}ne=513>i,Z=!1,jn=514>i;let t=!1,s,n=0;if(D&131072){const r=Gi[D&63];F(),s=new $h(r,Ae(514,e)),ne=!1}else{e:switch(D){case 12295:n=_t,ne=!1,jn=!1;do switch(F(),++n,D){case 65546:if(F(),!(D&12288))throw gs();break;case 11:case 12:throw gs();case 2162701:if(Z=!0,F(),!(D&12288)){s=n===0?ir:n===1?Sa:new tr(n),t=!0;break e}break;default:if(D&2097152){s=n===0?ir:n===1?Sa:new tr(n);break e}throw Mv()}while(D===12295);case 4096:{const r=ge;if(e===ws)s=new vo(r);else if(jn&&Sv.includes(r))s=new cv(r);else{if(jn&&r==="import")throw qv();s=new sr(r,n)}if(ne=!Z,F(),Yt(51)){if(D===524297)throw zd();const o=Z,a=_t;++_t;const l=Ae(62,As);Z=o,_t=a,ne=!1,s=new hl([new vo(r)],l)}break}case 11:throw Yv();case 12:throw dl();case 12292:switch(ne=!1,F(),_t){case 0:s=ir;break;case 1:s=Sa;break;default:s=new tr(_t);break}break;case 12293:ne=!1,F(),s=Av;break;case 2688008:s=Iv(e);break;case 2688019:s=te.search(/\s+of\s+/)>Q?xv():Pv(e);break;case 524297:s=Ov(e);break;case 2163760:s=new mo([ge]),ne=!1,F();break;case 2163761:s=xa(e,s,!1);break;case 16384:case 32768:s=new Me(ge),ne=!1,F();break;case 8194:case 8195:case 8193:case 8192:s=Gi[D&63],ne=!1,F();break;default:throw Q>=ss?jv():Ta()}if(e===ws)return Rv(s);switch(D){case 2228280:case 2228281:s=new $h(Gi[D&63],s,1),F(),ne=!1;break}if(514<i)return s;if(D===11||D===12)throw gs();if(s.$kind===kd)switch(D){case 2162701:if(Z=!0,ne=!1,F(),!(D&13312))throw nc();if(D&12288)s=new sr(ge,s.ancestor),F();else if(D===2688008)s=new ro(s,Bt(),!0);else if(D===2688019)s=ao(s,!0);else throw lo();break;case 65546:if(ne=!Z,F(),!(D&12288))throw gs();s=new sr(ge,s.ancestor),F();break;case 11:case 12:throw gs();case 2688008:s=new ro(s,Bt(),t);break;case 2688019:s=ao(s,t);break;case 2163760:s=xh(s);break;case 2163761:s=xa(e,s,!0);break}for(;(D&65536)>0;)switch(D){case 2162701:s=Tv(s);break;case 65546:if(F(),!(D&12288))throw gs();s=Nd(s,!1);break;case 11:case 12:throw gs();case 2688008:s.$kind===tc?s=new Rd(s.name,Bt(),s.ancestor,!1):s.$kind===Qo?s=new _o(s.object,s.name,Bt(),s.optional,!1):s.$kind===ec?s=new uv(s.name,Bt()):s=new ro(s,Bt(),!1);break;case 2688019:s=ao(s,!1);break;case 2163760:if(Z)throw lo();s=xh(s);break;case 2163761:if(Z)throw lo();s=xa(e,s,!0);break}}if(D===11||D===12)throw gs();if(513<i)return s;for(;(D&262144)>0;){const r=D;if((r&960)<=i)break;F(),s=new dv(Gi[r&63],s,Ae(r&960,e)),ne=!1}if(63<i)return s;if(Yt(6291479)){const r=Ae(62,e);Ft(6291477),s=new lv(s,r,Ae(62,e)),ne=!1}if(62<i)return s;switch(D){case 4194350:case 4194356:case 4194357:case 4194358:case 4194359:{if(!ne)throw zv();const r=Gi[D&63];F(),s=new av(s,Ae(62,e),r);break}}if(61<i)return s;for(;Yt(6291481);){if(D===6291456)throw Hv();const r=ge;F();const o=new Array;for(;Yt(6291477);)o.push(Ae(62,e));s=new ov(s,r,o)}for(;Yt(6291480);){if(D===6291456)throw Uv();const r=ge;F();const o=new Array;for(;Yt(6291477);)o.push(Ae(62,e));s=new rv(s,r,o)}if(D!==6291456){if(e===bo&&D===7340046)return s;if(e===Dd&&D===6291478){if(Q===ss)throw Ta();return ic=Q-1,s}throw $s()==="of"?Wv():Ta()}return s}function xv(){const i=[],e=new mv(Td,i,void 0,void 0);let t="",s=!0,n=0;for(;s;)switch(F(),D){case 7340052:s=!1,r();break;case 6291472:r();break;case 4096:t=$s();break;default:throw Qv()}return Ft(7340052),e;function r(){t!==""?(i.push(new Ld(new al(ir,t),new Ed(ir,new Me(n++)),void 0)),t=""):n++}}function Bt(){const i=Z;F();const e=[];for(;D!==7340047&&(e.push(Ae(62,As)),!!Yt(6291472)););return Ft(7340047),ne=!1,Z=i,e}function ao(i,e){const t=Z;return F(),i=new Ed(i,Ae(62,As),e),Ft(7340052),ne=!t,Z=t,i}function Tv(i){if(Z=!0,ne=!1,F(),!(D&13312))throw nc();if(D&12288)return Nd(i,!0);if(D===2688008)return i.$kind===tc?new Rd(i.name,Bt(),i.ancestor,!0):i.$kind===Qo?new _o(i.object,i.name,Bt(),i.optional,!0):new ro(i,Bt(),!0);if(D===2688019)return ao(i,!0);throw lo()}function Nd(i,e){const t=ge;switch(D){case 2162701:{Z=!0,ne=!1;const s=Q,n=Pi,r=D,o=ue,a=ge,l=ne,c=Z;if(F(),!(D&13312))throw nc();return D===2688008?new _o(i,t,Bt(),e,!0):(Q=s,Pi=n,D=r,ue=o,ge=a,ne=l,Z=c,new al(i,t,e))}case 2688008:return ne=!1,new _o(i,t,Bt(),e,!1);default:return ne=!Z,F(),new al(i,t,e)}}function Iv(i){F();const e=Q,t=Pi,s=D,n=ue,r=ge,o=Z,a=[];let l=1,c=!1;e:for(;;){if(D===12){if(F(),D!==4096)throw gs();if(a.push(new vo(ge)),F(),D===6291472)throw Jv();if(D!==7340047||(F(),D!==51))throw dl();F();const d=Z,p=_t;++_t;const f=Ae(62,As);return Z=d,_t=p,ne=!1,new hl(a,f,!0)}switch(D){case 4096:a.push(new vo(ge)),F();break;case 7340047:F();break e;case 524297:case 2688019:F(),l=4;break;case 6291472:l=2,c=!0;break e;case 2688008:l=2;break e;default:F(),l=2;break}switch(D){case 6291472:if(F(),c=!0,l===1)break;break e;case 7340047:F();break e;case 4194350:l===1&&(l=3);break e;case 51:if(c)throw Kr();F(),l=2;break e;default:l===1&&(l=2);break e}}if(D===51){if(l===1){if(F(),D===524297)throw zd();const d=Z,p=_t;++_t;const f=Ae(62,As);return Z=d,_t=p,ne=!1,new hl(a,f)}throw Kr()}else if(l===1&&a.length===0)throw Fd(51);if(c)switch(l){case 2:throw Kr();case 3:throw Ph();case 4:throw Eh()}Q=e,Pi=t,D=s,ue=n,ge=r,Z=o;const u=Z,h=Ae(62,i);if(Z=u,Ft(7340047),D===51)switch(l){case 2:throw Kr();case 3:throw Ph();case 4:throw Eh()}return h}function Pv(i){const e=Z;F();const t=new Array;for(;D!==7340052;)if(Yt(6291472)){if(t.push(Vd),D===7340052)break}else if(t.push(Ae(62,i===ws?As:i)),Yt(6291472)){if(D===7340052)break}else break;return Z=e,Ft(7340052),i===ws?new pv(t):(ne=!1,new ll(t))}const Ev=[$d,Sd,xd,Td,sv];function Rv(i){if(!Ev.includes(i.$kind)||D!==4204594)throw Ih(i.$kind);F();const e=i,t=Ae(61,Dd);return new gv(e,t,ic)}function Ov(i){const e=Z,t=new Array,s=new Array;for(F();D!==7340046;){if(t.push(ge),D&49152)F(),Ft(6291477),s.push(Ae(62,i===ws?As:i));else if(D&12288){const n=ue,r=D,o=Q;F(),Yt(6291477)?s.push(Ae(62,i===ws?As:i)):(ue=n,D=r,Q=o,s.push(Ae(515,i===ws?As:i)))}else throw Kv();D!==7340046&&Ft(6291472)}return Z=e,Ft(7340046),i===ws?new fv(t,s):(ne=!1,new cl(t,s))}function Lv(){const i=[],e=[],t=ss;let s="";for(;Q<t;){switch(ue){case 36:if(Ei(Q+1)===123){i.push(s),s="",Q+=2,ue=Ei(Q),F();const n=Ae(61,bo);e.push(n);continue}else s+="$";break;case 92:s+=_r(sc(z()));break;default:s+=_r(ue)}z()}return e.length?(i.push(s),new _v(i,e)):null}function xa(i,e,t){const s=Z,n=[ge];Ft(2163761);const r=[Ae(62,i)];for(;(D=Bv())!==2163760;)n.push(ge),Ft(2163761),r.push(Ae(62,i));return n.push(ge),ne=!1,Z=s,t?(F(),new Od(n,n,e,r)):(F(),new mo(n,r))}function xh(i){ne=!1;const e=[ge];return F(),new Od(e,e,i)}function F(){for(;Q<ss;)if(Pi=Q,(D=Zv[ue]())!=null)return;D=6291456}function z(){return ue=Ei(++Q)}function Vv(){for(;eb[z()];);const i=Xv[ge=$s()];return i===void 0?4096:i}function Th(i){let e=ue;if(i===!1){do e=z();while(e<=57&&e>=48);if(e!==46)return ge=parseInt($s(),10),32768;if(e=z(),Q>=ss)return ge=parseInt($s().slice(0,-1),10),32768}if(e<=57&&e>=48)do e=z();while(e<=57&&e>=48);else ue=Ei(--Q);return ge=parseFloat($s()),32768}function Dv(){const i=ue;z();let e=0;const t=new Array;let s=Q;for(;ue!==i;)if(ue===92)t.push(te.slice(s,Q)),z(),e=sc(ue),z(),t.push(_r(e)),s=Q;else{if(Q>=ss)throw Gv();z()}const n=te.slice(s,Q);return z(),t.push(n),ge=t.join(""),16384}function Md(){let i=!0,e="";for(;z()!==96;)if(ue===36)if(Q+1<ss&&Ei(Q+1)===123){Q++,i=!1;break}else e+="$";else if(ue===92)e+=_r(sc(z()));else{if(Q>=ss)throw jd();e+=_r(ue)}return z(),ge=e,i?2163760:2163761}const Bv=()=>{if(Q>=ss)throw jd();return Q--,Md()},Yt=i=>D===i?(F(),!0):!1,Ft=i=>{if(D===i)F();else throw Fd(i)},Nv=()=>de(151,te),dl=()=>de(152,te),gs=()=>de(153,te),Mv=()=>de(154,te),jv=()=>de(155,te),Ta=()=>de(156,$s(),Q,te),Fv=()=>de(157),zv=()=>de(158,te),Hv=()=>de(159,te),Uv=()=>de(160,te),Wv=()=>de(161,te),qv=()=>de(162,te),Ih=i=>de(163,te,i),Kv=()=>de(164,te),Gv=()=>de(165,te),jd=()=>de(166,te),Fd=i=>de(167,Gi[i&63],te),Qv=()=>de(170,$s(),Q,te),nc=()=>de(171,$s(),Q-1,te),lo=()=>de(172,te),Kr=()=>de(173,te),Ph=()=>de(174,te),Eh=()=>de(175,te),Jv=()=>de(176,te),zd=()=>de(178,te),Yv=()=>de(179,Q-1,te),Gi=[yv,Cv,kv,Vd,"this","$this",null,"$parent","(","{",".","..","...","?.","}",")",",","[","]",":",";","?","'",'"',"&","|","??","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",2163760,2163761,"of","=>","+=","-=","*=","/=","++","--"],Xv=Object.assign(oo(),{true:8193,null:8194,false:8192,undefined:8195,this:12293,$this:12292,$parent:12295,in:6562213,instanceof:6562214,typeof:139305,void:139306,of:4204594}),{CharScanners:Zv,IdParts:eb}=(()=>{const i=()=>{throw de(168,te)};i.notMapped=!0;const e={AsciiIdPart:[36,0,48,58,65,91,95,0,97,123],IdStart:[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],Digit:[48,58],Skip:[0,33,127,161]},t=(o,a,l,c)=>{const u=l.length;for(let h=0;h<u;h+=2){const d=l[h];let p=l[h+1];p=p>0?p:d+1,o&&o.fill(c,d,p)}},s=(o=>(t(o,null,e.IdStart,1),t(o,null,e.Digit,1),o))(new Uint8Array(65535)),n=o=>()=>(z(),o),r=new Array(65535);return r.fill(i,0,65535),t(r,null,e.Skip,()=>(z(),null)),t(r,null,e.IdStart,Vv),t(r,null,e.Digit,()=>Th(!1)),r[34]=r[39]=()=>Dv(),r[96]=()=>Md(),r[33]=()=>z()!==61?131119:z()!==61?6553950:(z(),6553952),r[61]=()=>z()===62?(z(),51):ue!==61?4194350:z()!==61?6553949:(z(),6553951),r[38]=()=>z()!==38?6291480:(z(),6553884),r[124]=()=>z()!==124?6291481:(z(),6553819),r[63]=()=>{if(z()===46){const o=Ei(Q+1);return o<=48||o>=57?(z(),2162701):6291479}return ue!==63?6291479:(z(),6553754)},r[46]=()=>z()<=57&&ue>=48?Th(!0):ue===46?z()!==46?11:(z(),12):65546,r[60]=()=>z()!==61?6554017:(z(),6554019),r[62]=()=>z()!==61?6554018:(z(),6554020),r[37]=n(6554156),r[40]=n(2688008),r[41]=n(7340047),r[42]=()=>z()!==61?6554155:(z(),4194358),r[43]=()=>z()===43?(z(),2228280):ue!==61?2490855:(z(),4194356),r[44]=n(6291472),r[45]=()=>z()===45?(z(),2228281):ue!==61?2490856:(z(),4194357),r[47]=()=>z()!==61?6554157:(z(),4194359),r[58]=n(6291477),r[59]=n(6291478),r[91]=n(2688019),r[93]=n(7340052),r[123]=n(524297),r[125]=n(7340046),{CharScanners:r,IdParts:s}})(),tb=Object.prototype.hasOwnProperty,zt=Reflect.defineProperty;function xs(i,e,t){return zt(i,e,{enumerable:!1,configurable:!0,writable:!0,value:t}),t}function bs(i,e,t){e in i||xs(i,e,t)}const Hd=Object.assign,rc=Object.freeze,mr=String,Jo=ut.createInterface,sb=xt.get,ib=xt.define,Ud=ut.createInterface("ICoercionConfiguration"),Yo=0,Ps=1,nb=2,rb=4,oc=rc({None:Yo,Observer:Ps,Node:nb,Layout:rb});function Ri(i=0){const e=Array(i);let t=0;for(;t<i;)e[t]=t++;return e.deletedIndices=[],e.deletedItems=[],e.isIndexMap=!0,e}let ob=!1;const It=(()=>{function i(a,l){return a==null?r:r(a)}function e(){return xs(this,"subs",new o)}function t(a){return this.subs.add(a)}function s(a){return this.subs.remove(a)}const n=new WeakSet;function r(a,l){if(!n.has(a)){n.add(a);const c=a.prototype;zt(c,"subs",{get:e}),bs(c,"subscribe",t),bs(c,"unsubscribe",s)}return a}class o{constructor(){this.count=0,this._subs=[],this._requestDirtySubs=[],this._hasDirtySubs=!1}add(l){return this._subs.includes(l)?!1:(this._subs[this._subs.length]=l,"handleDirty"in l&&(this._requestDirtySubs[this._requestDirtySubs.length]=l,this._hasDirtySubs=!0),++this.count,!0)}remove(l){let c=this._subs.indexOf(l);return c!==-1?(this._subs.splice(c,1),c=this._requestDirtySubs.indexOf(l),c!==-1&&(this._requestDirtySubs.splice(c,1),this._hasDirtySubs=this._requestDirtySubs.length>0),--this.count,!0):!1}notify(l,c){for(const u of this._subs.slice(0))u.handleChange(l,c)}notifyCollection(l,c){const u=this._subs.slice(0),h=u.length;let d=0;for(;d<h;++d)u[d].handleCollectionChange(l,c)}notifyDirty(){if(this._hasDirtySubs)for(const l of this._requestDirtySubs.slice(0))l.handleDirty()}}return i})(),Je=(i,...e)=>new Error(`AUR${mr(i).padStart(4,"0")}: ${lb(i,...e)}`),ab={99:"Method {{0}} not implemented",101:'Ast eval error: binding behavior "{{0}}" could not be found. Did you forget to register it as a dependency?',102:'Ast eval error: binding behavior "{{0}}" already applied.',103:'Ast eval error: value converter "{{0}}" could not be found. Did you forget to register it as a dependency?',105:"Ast eval error: unable to find $host context. Did you forget [au-slot] attribute?",106:'Ast eval error: invalid assignment. "$host" is a reserved keyword.',107:"Ast eval error: expression is not a function.",109:'Ast eval error: unknown unary operator: "{{0}}"',108:'Ast eval error: unknown binary operator: "{{0}}"',110:"Ast eval error: left-hand side of tagged template expression is not a function.",111:'Ast eval error: expected "{{0}}" to be a function',112:"Ast eval error: cannot use non-object value for destructuring assignment.",151:'Expression error: invalid start: "{{0}}"',152:'Expression error: spread operator is not supported: "{{0}}"',153:'Expression error: expected identifier: "{{0}}"',154:'Expression error: invalid member expression: "{{0}}"',155:'Expression error: unexpected end of expression: "{{0}}"',156:'Expression error: unconsumed token: "{{0}}" at position {{1}} of "{{2}}"',157:"Expression error: invalid empty expression. Empty expression is only valid in event bindings (trigger, delegate, capture etc...)",158:'Expression error: left hand side of expression is not assignable: "{{0}}"',159:'Expression error: expected identifier to come after value converter operator: "{{0}}"',160:"Expression error: expected identifier to come after binding behavior operator: {{0}}",161:'Expression error: unexpected keyword "of": "{{0}}"',162:'Expression error: unexpected keyword "import": "{{0}}"',163:'Expression error: invalid BindingIdentifier at left hand side of "of": "{{0}}" | kind: {{1}}',164:'Expression error: invalid or unsupported property definition in object literal: "{{0}}"',165:'Expression error: unterminated quote in string literal: "{{0}}"',166:'Expression error: unterminated template string: "{{0}}"',167:'Expression error: missing expected token "{{0}}" in "{{1}}"',168:'Expression error: unexpected character: "{{0}}"',170:'Expression error: unexpected "{{0}}" at position "{{1}}" for destructuring assignment in "{{2}}"',171:'Expression error: unexpected {{0}} at position "{{1}}" for optional chain in "{{2}}"',172:'Expression error: invalid tagged template on optional chain in "{{1}}"',173:'Expression error: invalid arrow parameter list in "{{0}}"',174:'Expression error: arrow function with default parameters is not supported: "{{0}}"',175:'Expression error: arrow function with destructuring parameters is not supported: "{{0}}"',176:'Expression error: rest parameter must be last formal parameter in arrow function: "{{0}}"',178:'Expression error: arrow function with function body is not supported: "{{0}}"',179:`Expression error: unexpected token '.' at position "{{1}}" in "{{0}}"`,199:"Trying to observe property {{0}} on null/undefined",203:"Trying to retrieve a property or build a scope from a null/undefined scope",204:"Trying to create a scope with null/undefined binding context",206:"Trying to switch to a null/undefined connectable",207:"Trying to enter an active connectable",208:"Trying to pop a null/undefined connectable",209:"Trying to exit an inactive connectable",210:"Unrecognised collection type {{0:toString}}.",217:"There is no registration for IDirtyChecker interface. If you want to use your own dirty checker, make sure you register it.",218:"Dirty checked is not permitted in this application. Property key {{0}} is being dirty checked.",219:"Trying to set value for property {{0}} in dirty checker",220:'Map/Set "size" is a readonly property',221:'Trying to assign value to readonly property "{{0}}" through computed observer.',224:"Invalid @observable decorator usage, cannot determine property name",225:"Trying to stop an effect that has already been stopped",226:"Maximum number of recursive effect run reached. Consider handle effect dependencies differently."},lb=(i,...e)=>{var s;let t=ab[i];for(let n=0;n<e.length;++n){const r=new RegExp(`{{${n}(:.*)?}}`,"g");let o=r.exec(t);for(;o!=null;){const a=(s=o[1])==null?void 0:s.slice(1);let l=e[n];if(l!=null)switch(a){case"typeof":l=typeof l;break;case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=mr(l[a.slice(1)]):l=mr(l)}t=t.slice(0,o.index)+l+t.slice(r.lastIndex),o=r.exec(t)}}return t};class Wd{constructor(e){this.owner=e,this.type=Ps,this._value=(this._obj=e.collection).length}getValue(){return this._obj.length}setValue(e){e!==this._value&&(Number.isNaN(e)?console.warn(`Invalid value "${e}" for array length`):(this._obj.splice(e),this._value=this._obj.length))}handleDirty(){this._value!==this._obj.length&&this.subs.notifyDirty()}handleCollectionChange(e,t){const s=this._value,n=this._obj.length;(this._value=n)!==s&&(this.subs.notifyDirty(),this.subs.notify(this._value,s))}}qd(Wd);class ac{constructor(e){this.owner=e,this.type=Ps,this._value=(this._obj=e.collection).size}getValue(){return this._obj.size}setValue(){throw Je(220)}handleDirty(){this._value!==this._obj.size&&this.subs.notifyDirty()}handleCollectionChange(e,t){const s=this._value,n=this._obj.size;(this._value=n)!==s&&this.subs.notify(this._value,s)}}qd(ac);function qd(i){const e=i.prototype;return bs(e,"subscribe",cb),bs(e,"unsubscribe",hb),It(i,null)}function cb(i){this.subs.add(i)&&this.subs.count===1&&this.owner.subscribe(this)}function hb(i){this.subs.remove(i)&&this.subs.count===0&&this.owner.subscribe(this)}const nr=(()=>{const i=Symbol.for("__au_arr_obs__"),e=Array[i]??xs(Array,i,new WeakMap);function t(_,g){return _===g?0:(_=_===null?"null":_.toString(),g=g===null?"null":g.toString(),_<g?-1:1)}function s(_,g){return _===void 0?g===void 0?0:1:g===void 0?-1:0}function n(_,g,v,m,A){let w,k,O,R,N,V,M;for(V=v+1;V<m;V++){for(w=_[V],k=g[V],M=V-1;M>=v&&(O=_[M],R=g[M],N=A(O,w),N>0);M--)_[M+1]=O,g[M+1]=R;_[M+1]=w,g[M+1]=k}}function r(_,g,v,m,A){let w=0,k=0,O,R,N,V,M,K,xe,me,ve,Pe,T,le,Fe,j,ce,et,Ue,Et,y;for(;;){if(m-v<=10){n(_,g,v,m,A);return}w=v+(m-v>>1),O=_[v],V=g[v],R=_[m-1],M=g[m-1],N=_[w],K=g[w],xe=A(O,R),xe>0&&(Pe=O,T=V,O=R,V=M,R=Pe,M=T),me=A(O,N),me>=0?(Pe=O,T=V,O=N,V=K,N=R,K=M,R=Pe,M=T):(ve=A(R,N),ve>0&&(Pe=R,T=M,R=N,M=K,N=Pe,K=T)),_[v]=O,g[v]=V,_[m-1]=N,g[m-1]=K,le=R,Fe=M,j=v+1,ce=m-1,_[w]=_[j],g[w]=g[j],_[j]=le,g[j]=Fe;e:for(k=j+1;k<ce;k++)if(et=_[k],Ue=g[k],Et=A(et,le),Et<0)_[k]=_[j],g[k]=g[j],_[j]=et,g[j]=Ue,j++;else if(Et>0){do{if(ce--,ce==k)break e;y=_[ce],Et=A(y,le)}while(Et>0);_[k]=_[ce],g[k]=g[ce],_[ce]=et,g[ce]=Ue,Et<0&&(et=_[k],Ue=g[k],_[k]=_[j],g[k]=g[j],_[j]=et,g[j]=Ue,j++)}m-ce<j-v?(r(_,g,ce,m,A),m=j):(r(_,g,v,j,A),v=ce)}}const o=Array.prototype,a=["push","unshift","pop","shift","splice","reverse","sort"];let l;function c(){const _=o.push,g=o.unshift,v=o.pop,m=o.shift,A=o.splice,w=o.reverse,k=o.sort;l={push:function(...O){const R=e.get(this);if(R===void 0)return _.apply(this,O);const N=this.length,V=O.length;if(V===0)return N;this.length=R.indexMap.length=N+V;let M=N;for(;M<this.length;)this[M]=O[M-N],R.indexMap[M]=-2,M++;return R.notify(),this.length},unshift:function(...O){const R=e.get(this);if(R===void 0)return g.apply(this,O);const N=O.length,V=new Array(N);let M=0;for(;M<N;)V[M++]=-2;g.apply(R.indexMap,V);const K=g.apply(this,O);return R.notify(),K},pop:function(){const O=e.get(this);if(O===void 0)return v.call(this);const R=O.indexMap,N=v.call(this),V=R.length-1;return R[V]>-1&&(R.deletedIndices.push(R[V]),R.deletedItems.push(N)),v.call(R),O.notify(),N},shift:function(){const O=e.get(this);if(O===void 0)return m.call(this);const R=O.indexMap,N=m.call(this);return R[0]>-1&&(R.deletedIndices.push(R[0]),R.deletedItems.push(N)),m.call(R),O.notify(),N},splice:function(...O){const R=O[0],N=O[1],V=e.get(this);if(V===void 0)return A.apply(this,O);const M=this.length,K=R|0,xe=K<0?Math.max(M+K,0):Math.min(K,M),me=V.indexMap,ve=O.length,Pe=ve===0?0:ve===1?M-xe:N;let T=xe;if(Pe>0){const Fe=T+Pe;for(;T<Fe;)me[T]>-1&&(me.deletedIndices.push(me[T]),me.deletedItems.push(this[T])),T++}if(T=0,ve>2){const Fe=ve-2,j=new Array(Fe);for(;T<Fe;)j[T++]=-2;A.call(me,R,N,...j)}else A.apply(me,O);const le=A.apply(this,O);return(Pe>0||T>0)&&V.notify(),le},reverse:function(){const O=e.get(this);if(O===void 0)return w.call(this),this;const R=this.length,N=R/2|0;let V=0;for(;V!==N;){const M=R-V-1,K=this[V],xe=O.indexMap[V],me=this[M],ve=O.indexMap[M];this[V]=me,O.indexMap[V]=ve,this[M]=K,O.indexMap[M]=xe,V++}return O.notify(),this},sort:function(O){const R=e.get(this);if(R===void 0)return k.call(this,O),this;let N=this.length;if(N<2)return this;r(this,R.indexMap,0,N,s);let V=0;for(;V<N&&this[V]!==void 0;)V++;(O===void 0||!Y(O))&&(O=t),r(this,R.indexMap,0,V,O);let M=!1;for(V=0,N=R.indexMap.length;N>V;++V)if(R.indexMap[V]!==V){M=!0;break}return(M||ob)&&R.notify(),this}};for(const O of a)zt(l[O],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1})}let u=!1;const h="__au_arr_on__";function d(){if(l===void 0&&c(),!(sb(h,Array)??!1)){ib(!0,Array,h);for(const _ of a)o[_].observing!==!0&&xs(o,_,l[_])}}class p{constructor(g){this.type=Ps,u||(u=!0,d()),this.indexObservers={},this.collection=g,this.indexMap=Ri(g.length),this.lenObs=void 0,e.set(g,this)}notify(){const g=this.subs;g.notifyDirty();const v=this.indexMap,m=this.collection,A=m.length;this.indexMap=Ri(A),g.notifyCollection(m,v)}getLengthObserver(){return this.lenObs??(this.lenObs=new Wd(this))}getIndexObserver(g){var v;return(v=this.indexObservers)[g]??(v[g]=new f(this,g))}}It(p,null);class f{constructor(g,v){this.owner=g,this.index=v,this.doNotCache=!0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(g){if(g===this.getValue())return;const v=this.owner,m=this.index,A=v.indexMap;A[m]>-1&&A.deletedIndices.push(A[m]),A[m]=-2,v.collection[m]=g,v.notify()}handleDirty(){this.value!==this.getValue()&&this.subs.notifyDirty()}handleCollectionChange(g,v){const m=this.index;if(v[m]===m)return;const w=this.value,k=this.value=this.getValue();w!==k&&this.subs.notify(k,w)}subscribe(g){this.subs.add(g)&&this.subs.count===1&&this.owner.subscribe(this)}unsubscribe(g){this.subs.remove(g)&&this.subs.count===0&&this.owner.unsubscribe(this)}}return It(f,null),function(g){let v=e.get(g);return v===void 0&&(e.set(g,v=new p(g)),d()),v}})(),wo=(()=>{const i=Symbol.for("__au_set_obs__"),e=Set[i]??xs(Set,i,new WeakMap),{add:t,clear:s,delete:n}=Set.prototype,r=["add","clear","delete"],o={add:function(c){const u=e.get(this);if(u===void 0)return t.call(this,c),this;const h=this.size;return t.call(this,c),this.size===h?this:(u.indexMap[h]=-2,u.notify(),this)},clear:function(){const c=e.get(this);if(c===void 0)return s.call(this);if(this.size>0){const h=c.indexMap;let d=0;for(const p of this.keys())h[d]>-1&&(h.deletedIndices.push(h[d]),h.deletedItems.push(p)),d++;s.call(this),h.length=0,c.notify()}},delete:function(c){const u=e.get(this);if(u===void 0)return n.call(this,c);if(this.size===0)return!1;let d=0;const p=u.indexMap;for(const f of this.keys()){if(f===c){p[d]>-1&&(p.deletedIndices.push(p[d]),p.deletedItems.push(f)),p.splice(d,1);const _=n.call(this,c);return _===!0&&u.notify(),_}d++}return!1}};function a(c){for(const u of r)xs(c,u,o[u])}class l{constructor(u){this.type=Ps,this.collection=u,this.indexMap=Ri(u.size),this.lenObs=void 0}notify(){const u=this.subs;u.notifyDirty();const h=this.indexMap,d=this.collection,p=d.size;this.indexMap=Ri(p),u.notifyCollection(d,h)}getLengthObserver(){return this.lenObs??(this.lenObs=new ac(this))}}return It(l,null),function(u){let h=e.get(u);return h===void 0&&(e.set(u,h=new l(u)),a(u)),h}})(),yo=(()=>{const i=Symbol.for("__au_map_obs__"),e=Map[i]??xs(Map,i,new WeakMap),{set:t,clear:s,delete:n}=Map.prototype,r=["set","clear","delete"],o={set:function(c,u){const h=e.get(this);if(h===void 0)return t.call(this,c,u),this;const d=this.get(c),p=this.size;if(t.call(this,c,u),this.size===p){let _=0;for(const g of this.entries()){if(g[0]===c)return g[1]!==d&&(h.indexMap.deletedIndices.push(h.indexMap[_]),h.indexMap.deletedItems.push(g),h.indexMap[_]=-2,h.notify()),this;_++}return this}return h.indexMap[p]=-2,h.notify(),this},clear:function(){const c=e.get(this);if(c===void 0)return s.call(this);if(this.size>0){const h=c.indexMap;let d=0;for(const p of this.keys())h[d]>-1&&(h.deletedIndices.push(h[d]),h.deletedItems.push(p)),d++;s.call(this),h.length=0,c.notify()}},delete:function(c){const u=e.get(this);if(u===void 0)return n.call(this,c);if(this.size===0)return!1;let d=0;const p=u.indexMap;for(const f of this.keys()){if(f===c){p[d]>-1&&(p.deletedIndices.push(p[d]),p.deletedItems.push(f)),p.splice(d,1);const _=n.call(this,c);return _===!0&&u.notify(),_}++d}return!1}};function a(c){for(const u of r)xs(c,u,o[u])}class l{constructor(u){this.type=Ps,this.collection=u,this.indexMap=Ri(u.size),this.lenObs=void 0}notify(){const u=this.subs;u.notifyDirty();const h=this.indexMap,d=this.collection,p=d.size;this.indexMap=Ri(p),u.notifyCollection(d,h)}getLengthObserver(){return this.lenObs??(this.lenObs=new ac(this))}}return It(l,null),function(u){let h=e.get(u);return h===void 0&&(e.set(u,h=new l(u)),a(u)),h}})(),Rh=(()=>{class i{constructor(u){this.version=0,this.count=0,this.o=new Map,this.b=u}add(u){this.o.has(u)||(u.subscribe(this.b),++this.count),this.o.set(u,this.version)}clear(){this.o.forEach(t,this),this.count=this.o.size}clearAll(){this.o.forEach(e,this),this.o.clear(),this.count=0}}function e(c,u){u.unsubscribe(this.b)}function t(c,u){this.version!==c&&(u.unsubscribe(this.b),this.o.delete(u))}function s(){return xs(this,"obs",new i(this))}function n(c,u){this.obs.add(this.oL.getObserver(c,u))}function r(c){let u;if(Ie(c))u=nr(c);else if(An(c))u=wo(c);else if(Us(c))u=yo(c);else throw Je(210,c);this.obs.add(u)}function o(c){this.obs.add(c)}function a(){throw Je(99,"handleChange")}function l(){throw Je(99,"handleCollectionChange")}return function(u,h){const d=u.prototype;return bs(d,"observe",n),bs(d,"observeCollection",r),bs(d,"subscribeTo",o),zt(d,"obs",{get:s}),bs(d,"handleChange",a),bs(d,"handleCollectionChange",l),u}})();function as(i,e){return i==null?Rh:Rh(i,e)}let X=null;const tn=[];let Ts=!1;function ub(){Ts=!1}function db(){Ts=!0}function Xo(){return X}function lc(i){if(i==null)throw Je(206);if(X==null){X=i,tn[0]=X,Ts=!0;return}if(X===i)throw Je(207);tn.push(i),X=i,Ts=!0}function cc(i){if(i==null)throw Je(208);if(X!==i)throw Je(209);tn.pop(),X=tn.length>0?tn[tn.length-1]:null,Ts=X!=null}const pb=rc({get current(){return X},get connecting(){return Ts},enter:lc,exit:cc,pause:ub,resume:db}),_n=Reflect.get,fb=Object.prototype.toString,pl=new WeakMap,gb="__au_nw__",_b="__au_nw";function Kd(i){switch(fb.call(i)){case"[object Object]":return i.constructor[gb]!==!0;case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const Sn="__raw__";function J(i){return Kd(i)?Zo(i):i}function Zo(i){return pl.get(i)??mb(i)}function se(i){return i[Sn]??i}function at(i){return Kd(i)&&i[Sn]||i}function hc(i,e){return e==="constructor"||e==="__proto__"||e==="$observers"||e===Symbol.toPrimitive||e===Symbol.toStringTag||i.constructor[`${_b}_${mr(e)}__`]===!0}function mb(i){const e=Ie(i)?bb:Us(i)||An(i)?zb:vb,t=new Proxy(i,e);return pl.set(i,t),pl.set(t,t),t}const vb={get(i,e,t){if(e===Sn)return i;const s=Xo();return!Ts||hc(i,e)||s==null?_n(i,e,t):(s.observe(i,e),J(_n(i,e,t)))}},bb={get(i,e,t){if(e===Sn)return i;if(!Ts||hc(i,e)||X==null)return _n(i,e,t);switch(e){case"length":return X.observe(i,"length"),i.length;case"map":return wb;case"includes":return kb;case"indexOf":return Ab;case"lastIndexOf":return $b;case"every":return yb;case"filter":return Cb;case"find":return xb;case"findIndex":return Sb;case"flat":return Tb;case"flatMap":return Ib;case"join":return Pb;case"push":return Rb;case"pop":return Eb;case"reduce":return jb;case"reduceRight":return Fb;case"reverse":return Db;case"shift":return Ob;case"unshift":return Lb;case"slice":return Mb;case"splice":return Vb;case"some":return Bb;case"sort":return Nb;case"keys":return Gd;case"values":case Symbol.iterator:return fl;case"entries":return gl}return X.observe(i,e),J(_n(i,e,t))},ownKeys(i){var e;return(e=Xo())==null||e.observe(i,"length"),Reflect.ownKeys(i)}};function wb(i,e){const t=se(this),s=t.map((n,r)=>at(i.call(e,J(n),r,this)));return Ce(X,t),J(s)}function yb(i,e){const t=se(this),s=t.every((n,r)=>i.call(e,J(n),r,this));return Ce(X,t),s}function Cb(i,e){const t=se(this),s=t.filter((n,r)=>at(i.call(e,J(n),r,this)));return Ce(X,t),J(s)}function kb(i){const e=se(this),t=e.includes(at(i));return Ce(X,e),t}function Ab(i){const e=se(this),t=e.indexOf(at(i));return Ce(X,e),t}function $b(i){const e=se(this),t=e.lastIndexOf(at(i));return Ce(X,e),t}function Sb(i,e){const t=se(this),s=t.findIndex((n,r)=>at(i.call(e,J(n),r,this)));return Ce(X,t),s}function xb(i,e){const t=se(this),s=t.find((n,r)=>i(J(n),r,this),e);return Ce(X,t),J(s)}function Tb(){const i=se(this);return Ce(X,i),J(i.flat())}function Ib(i,e){const t=se(this);return Ce(X,t),Zo(t.flatMap((s,n)=>J(i.call(e,J(s),n,this))))}function Pb(i){const e=se(this);return Ce(X,e),e.join(i)}function Eb(){return J(se(this).pop())}function Rb(...i){return se(this).push(...i)}function Ob(){return J(se(this).shift())}function Lb(...i){return se(this).unshift(...i)}function Vb(...i){return J(se(this).splice(...i))}function Db(...i){const e=se(this),t=e.reverse();return Ce(X,e),J(t)}function Bb(i,e){const t=se(this),s=t.some((n,r)=>at(i.call(e,J(n),r,this)));return Ce(X,t),s}function Nb(i){const e=se(this),t=e.sort(i);return Ce(X,e),J(t)}function Mb(i,e){const t=se(this);return Ce(X,t),Zo(t.slice(i,e))}function jb(i,e){const t=se(this),s=t.reduce((n,r,o)=>i(n,J(r),o,this),e);return Ce(X,t),J(s)}function Fb(i,e){const t=se(this),s=t.reduceRight((n,r,o)=>i(n,J(r),o,this),e);return Ce(X,t),J(s)}const zb={get(i,e,t){if(e===Sn)return i;const s=Xo();if(!Ts||hc(i,e)||s==null)return _n(i,e,t);switch(e){case"size":return s.observe(i,"size"),i.size;case"clear":return Gb;case"delete":return Qb;case"forEach":return Hb;case"add":if(An(i))return Kb;break;case"get":if(Us(i))return Wb;break;case"set":if(Us(i))return qb;break;case"has":return Ub;case"keys":return Gd;case"values":return fl;case"entries":return gl;case Symbol.iterator:return Us(i)?gl:fl}return J(_n(i,e,t))}};function Hb(i,e){const t=se(this);return Ce(X,t),t.forEach((s,n)=>{i.call(e,J(s),J(n),this)})}function Ub(i){const e=se(this);return Ce(X,e),e.has(at(i))}function Wb(i){const e=se(this);return Ce(X,e),J(e.get(at(i)))}function qb(i,e){return J(se(this).set(at(i),at(e)))}function Kb(i){return J(se(this).add(at(i)))}function Gb(){return J(se(this).clear())}function Qb(i){return J(se(this).delete(at(i)))}function Gd(){const i=se(this);Ce(X,i);const e=i.keys();return{next(){const t=e.next(),s=t.value,n=t.done;return n?{value:void 0,done:n}:{value:J(s),done:n}},[Symbol.iterator](){return this}}}function fl(){const i=se(this);Ce(X,i);const e=i.values();return{next(){const t=e.next(),s=t.value,n=t.done;return n?{value:void 0,done:n}:{value:J(s),done:n}},[Symbol.iterator](){return this}}}function gl(){const i=se(this);Ce(X,i);const e=i.entries();return{next(){const t=e.next(),s=t.value,n=t.done;return n?{value:void 0,done:n}:{value:[J(s[0]),J(s[1])],done:n}},[Symbol.iterator](){return this}}}const Ce=(i,e)=>i==null?void 0:i.observeCollection(e),Jb=rc({getProxy:Zo,getRaw:se,wrap:J,unwrap:at,rawKey:Sn});class Co{constructor(e,t,s,n,r){this.type=Ps,this._value=void 0,this._isRunning=!1,this._isDirty=!1,this._callback=void 0,this._coercer=void 0,this._coercionConfig=void 0,this._obj=e,this._wrapped=r?J(e):e,this.$get=t,this.$set=s,this.oL=n}init(e){this._value=e,this._isDirty=!1}getValue(){return this.subs.count===0?this.$get.call(this._obj,this._obj,this):(this._isDirty&&(this.compute(),this._isDirty=!1),this._value)}setValue(e){if(Y(this.$set))this._coercer!==void 0&&(e=this._coercer.call(null,e,this._coercionConfig)),Ks(e,this._value)||(this._isRunning=!0,this.$set.call(this._obj,e),this._isRunning=!1,this.run());else throw Je(221)}useCoercer(e,t){return this._coercer=e,this._coercionConfig=t,!0}useCallback(e){return this._callback=e,!0}handleDirty(){this._isDirty||(this._isDirty=!0,this.subs.notifyDirty())}handleChange(){this._isDirty=!0,this.subs.count>0&&this.run()}handleCollectionChange(){this._isDirty=!0,this.subs.count>0&&this.run()}subscribe(e){this.subs.add(e)&&this.subs.count===1&&(this.compute(),this._isDirty=!1)}unsubscribe(e){this.subs.remove(e)&&this.subs.count===0&&(this._isDirty=!0,this.obs.clearAll())}run(){var s;if(this._isRunning)return;const e=this._value,t=this.compute();this._isDirty=!1,Ks(t,e)||((s=this._callback)==null||s.call(this,t,e),this.subs.notify(this._value,e))}compute(){this._isRunning=!0,this.obs.version++;try{return lc(this),this._value=at(this.$get.call(this._wrapped,this._wrapped,this))}finally{this.obs.clear(),this._isRunning=!1,cc(this)}}}as(Co,null),It(Co,null);const uc=Jo("IDirtyChecker",i=>i.callback(()=>{throw Je(217)})),Yb={timeoutsPerCheck:25,disabled:!1,throw:!1,resetToDefault(){this.timeoutsPerCheck=6,this.disabled=!1,this.throw=!1}};class Xb{static register(e){e.register(bt.singleton(this,this),bt.aliasTo(this,uc))}constructor(){this.tracked=[],this._task=null,this._elapsedFrames=0,this.p=S($n),this.check=()=>{if(++this._elapsedFrames<Yb.timeoutsPerCheck)return;this._elapsedFrames=0;const e=this.tracked,t=e.length;let s,n=0;for(;n<t;++n)s=e[n],s.isDirty()&&s.flush()},It(Oh,null)}createProperty(e,t){return new Oh(this,e,t)}addProperty(e){this.tracked.push(e),this.tracked.length===1&&(this._task=this.p.taskQueue.queueTask(this.check,{persistent:!0}))}removeProperty(e){this.tracked.splice(this.tracked.indexOf(e),1),this.tracked.length===0&&(this._task.cancel(),this._task=null)}}class Oh{constructor(e,t,s){this.obj=t,this.key=s,this.type=Yo,this._oldValue=void 0,this._dirtyChecker=e}getValue(){return this.obj[this.key]}setValue(e){throw Je(219,this.key)}isDirty(){return this._oldValue!==this.obj[this.key]}flush(){const e=this._oldValue,t=this.getValue();this._oldValue=t,this.subs.notify(t,e)}subscribe(e){this.subs.add(e)&&this.subs.count===1&&(this._oldValue=this.obj[this.key],this._dirtyChecker.addProperty(this))}unsubscribe(e){this.subs.remove(e)&&this.subs.count===0&&this._dirtyChecker.removeProperty(this)}}class Zb{get doNotCache(){return!0}constructor(e,t){this.type=Yo,this._obj=e,this._key=t}getValue(){return this._obj[this._key]}setValue(){}subscribe(){}unsubscribe(){}}class Qd{constructor(){this.type=Yo}getValue(e,t){return e[t]}setValue(e,t,s){t[s]=e}}class dc{constructor(e,t){this.type=Ps,this._value=void 0,this._observing=!1,this._callback=void 0,this._coercer=void 0,this._coercionConfig=void 0,this._obj=e,this._key=t}getValue(){return this._value}setValue(e){var t,s;if(this._coercer!==void 0&&(e=this._coercer.call(void 0,e,this._coercionConfig)),this._observing){if(Ks(e,this._value))return;Gr=this._value,this._value=e,(t=this._callback)==null||t.call(this,e,Gr),this.subs.notifyDirty(),this.subs.notify(e,Gr)}else this._value=this._obj[this._key]=e,(s=this._callback)==null||s.call(this,e,Gr)}useCallback(e){return this._callback=e,this.start(),!0}useCoercer(e,t){return this._coercer=e,this._coercionConfig=t,this.start(),!0}subscribe(e){this._observing===!1&&this.start(),this.subs.add(e)}start(){return this._observing===!1&&(this._observing=!0,this._value=this._obj[this._key],zt(this._obj,this._key,{enumerable:!0,configurable:!0,get:Hd(()=>this.getValue(),{getObserver:()=>this}),set:e=>{this.setValue(e)}})),this}stop(){return this._observing&&(zt(this._obj,this._key,{enumerable:!0,configurable:!0,writable:!0,value:this._value}),this._observing=!1),this}}It(dc,null);let Gr;const _l=new Qd,xn=Jo("IObserverLocator",i=>i.singleton(sw)),pc=Jo("INodeObserverLocator",i=>i.cachedCallback(e=>(e.getAll(Be).forEach(t=>{t.error("Using default INodeObserverLocator implementation. Will not be able to observe nodes (HTML etc...).")}),new ew)));class ew{handles(){return!1}getObserver(){return _l}getAccessor(){return _l}}const tw=Jo("IComputedObserverLocator",i=>i.singleton(class{getObserver(t,s,n,r){const o=new Co(t,n.get,n.set,r,!0);return zt(t,s,{enumerable:n.enumerable,configurable:!0,get:Hd(()=>o.getValue(),{getObserver:()=>o}),set:a=>{o.setValue(a)}}),o}}));class sw{constructor(){this._adapters=[],this._dirtyChecker=S(uc),this._nodeObserverLocator=S(pc),this._computedObserverLocator=S(tw)}addAdapter(e){this._adapters.push(e)}getObserver(e,t){if(e==null)throw Je(199,t);if(!Zi(e))return new Zb(e,Y(t)?"":t);if(Y(t))return new Co(e,t,void 0,this,!0);const s=Jd(e);let n=s[t];return n===void 0&&(n=this.createObserver(e,t),n.doNotCache||(s[t]=n)),n}getAccessor(e,t){var n;const s=(n=e.$observers)==null?void 0:n[t];return s!==void 0?s:this._nodeObserverLocator.handles(e,t,this)?this._nodeObserverLocator.getAccessor(e,t,this):_l}getArrayObserver(e){return nr(e)}getMapObserver(e){return yo(e)}getSetObserver(e){return wo(e)}createObserver(e,t){var n,r;if(this._nodeObserverLocator.handles(e,t,this))return this._nodeObserverLocator.getObserver(e,t,this);switch(t){case"length":if(Ie(e))return nr(e).getLengthObserver();break;case"size":if(Us(e))return yo(e).getLengthObserver();if(An(e))return wo(e).getLengthObserver();break;default:if(Ie(e)&&fn(t))return nr(e).getIndexObserver(Number(t));break}let s=Vh(e,t);if(s===void 0){let o=Lh(e);for(;o!==null&&(s=Vh(o,t),s===void 0);)o=Lh(o)}if(s!==void 0&&!tb.call(s,"value")){let o=this._getAdapterObserver(e,t,s);return o==null&&(o=(r=(n=s.get)==null?void 0:n.getObserver)==null?void 0:r.call(n,e)),o??(s.configurable?this._computedObserverLocator.getObserver(e,t,s,this):this._dirtyChecker.createProperty(e,t))}return new dc(e,t)}_getAdapterObserver(e,t,s){if(this._adapters.length>0)for(const n of this._adapters){const r=n.getObserver(e,t,s,this);if(r!=null)return r}return null}}const fc=i=>{let e;return Ie(i)?e=nr(i):Us(i)?e=yo(i):An(i)&&(e=wo(i)),e},Lh=Object.getPrototypeOf,Vh=Object.getOwnPropertyDescriptor,Jd=i=>{let e=i.$observers;return e===void 0&&zt(i,"$observers",{enumerable:!1,value:e=ae()}),e};class iw{constructor(e,t){this.oL=e,this.fn=t,this.maxRunCount=10,this.queued=!1,this.running=!1,this.runCount=0,this.stopped=!1}handleChange(){this.queued=!0,this.run()}handleCollectionChange(){this.queued=!0,this.run()}run(){if(this.stopped)throw Je(225);if(!this.running){++this.runCount,this.running=!0,this.queued=!1,++this.obs.version;try{lc(this),this.fn(this)}finally{this.obs.clear(),this.running=!1,cc(this)}if(this.queued){if(this.runCount>this.maxRunCount)throw this.runCount=0,Je(226);this.run()}else this.runCount=0}}stop(){this.stopped=!0,this.obs.clearAll()}}as(iw,null);const nw=(()=>{function i(r){return r.$observers===void 0&&zt(r,"$observers",{value:{}}),r.$observers}const e={};function t(r,o){n.mixed||(n.mixed=!0,It(n,null));let a=!1,l;if(typeof r=="object"?l=r:r!=null?(l={name:r},a=!0):l=$t,arguments.length===0)return function(h,d){if(d.kind!=="field")throw Je(224);return c(d)};if((o==null?void 0:o.kind)==="field")return c(o);if(a)return function(h,d){u(h,l.name,()=>e,!0)};return function(h,d){switch(d.kind){case"field":return c(d);case"class":return u(h,l.name,()=>e,!0);default:throw Je(224)}};function c(h){let d;return h.addInitializer(function(){u(this,h.name,()=>d,!1)}),function(p){return d=p}}function u(h,d,p,f){const _=l.callback||`${mr(d)}Changed`,g=l.set,v=function(){var w;const A=s(this,d,_,p,g);return(w=Xo())==null||w.subscribeTo(A),A.getValue()};v.getObserver=function(A){return s(A,d,_,p,g)};const m={enumerable:!0,configurable:!0,get:v,set(A){s(this,d,_,p,g).setValue(A)}};zt(f?h.prototype:h,d,m)}}function s(r,o,a,l,c){const u=i(r);let h=u[o];if(h==null){const d=l();h=new n(r,a,c,d===e?void 0:d),u[o]=h}return h}class n{constructor(o,a,l,c){this.type=Ps,this._value=void 0,this._oldValue=void 0,this._obj=o,this._setter=l,this._hasSetter=Y(l);const u=o[a];this.cb=Y(u)?u:void 0,this._value=c}getValue(){return this._value}setValue(o){var a;this._hasSetter&&(o=this._setter(o)),Ks(o,this._value)||(this._oldValue=this._value,this._value=o,(a=this.cb)==null||a.call(this._obj,this._value,this._oldValue),o=this._oldValue,this._oldValue=this._value,this.subs.notifyDirty(),this.subs.notify(this._value,o))}}return n.mixed=!1,t})();const ea=i=>typeof i=="string",ls=ut.createInterface,Tn=Object.freeze,{aliasTo:Dh,singleton:gc}=bt,Dt="Interpolation",Yd="IsFunction",cs="IsProperty",Qi="custom-element",Ni=Tn({default:0,oneTime:1,toView:2,fromView:4,twoWay:6}),ta=ls("ITemplateCompiler"),Xd=ls("IAttrMapper"),ke=(i,...e)=>new Error(`AUR${String(i).padStart(4,"0")}: ${ow(i,...e)}`),rw={88:"AttributeParser is already initialized; cannot add patterns after initialization.",89:'Attribute pattern "{{0}}" has already been registered.',99:"Method {{0}} not implemented",157:"Binding command {{0}} has already been registered.",701:'Template compilation error in element "{{0:name}}": the root <template> cannot be a local element template.',702:'Template compilation error: attribute "{{0}}" is invalid on element surrogate.',703:'Template compilation error: template controller "{{0}}" is invalid on element surrogate.',704:'Template compilation error: Invalid command "{{0:.command}}" for <let>. Only to-view/bind supported.',706:'Template compilation error: detected projection with [au-slot="{{0}}"] attempted on a non custom element {{1}}.',707:"Template compilation error: creating binding to non-bindable property {{0}} on {{1}}.",708:'Template compilation error: the custom element "{{0}}" does not have any content other than local template(s).',709:'Template compilation error: local element template needs to be defined directly under root of element "{{0}}".',710:'Template compilation error: bindable properties of local element "{{0}}" template needs to be defined directly under <template>.',711:`Template compilation error: the attribute 'property' is missing in {{0:outerHTML}} in local element "{{1}}"`,712:"Template compilation error: Bindable property and attribute needs to be unique; found property: {{0}}, attribute: {{1}}",713:'Template compilation error: unknown binding command: "{{0}}".{{0:bindingCommandHelp}}',714:'Template compilation error: primary already exists on element/attribute "{{0}}"',715:'Template compilation error: the value of "as-custom-element" attribute cannot be empty for local element in element "{{0}}"',716:'Template compilation error: duplicate definition of the local template named "{{0}} in element {{1}}"',717:'Template compilation error: detected a usage of "<slot>" element without specifying shadow DOM options in element: {{0}}',718:'Spreading template controller "{{0}}" is not supported.',719:"Attribute {{0}} has been already registered for {{1:element}}",720:'Spreading syntax "...xxx" is reserved. Encountered "...{{0}}"',721:'Usage of $bindables is only allowed on custom element. Encountered: <{{0}} {{1}}="{{2}}">',722:"Invalid platform object provided to the compilation, no DOM API found.",9998:"Spread binding does not support spreading custom attributes/template controllers. Did you build the spread instruction manually?"},ow=(i,...e)=>{var s;let t=rw[i];for(let n=0;n<e.length;++n){const r=new RegExp(`{{${n}(:.*)?}}`,"g");let o=r.exec(t);for(;o!=null;){const a=(s=o[1])==null?void 0:s.slice(1);let l=e[n];if(l!=null)switch(a){case"nodeName":l=l.nodeName.toLowerCase();break;case"name":l=l.name;break;case"typeof":l=typeof l;break;case"ctor":l=l.constructor.name;break;case"controller":l=l.controller.name;break;case"target@property":l=`${l.target}@${l.targetProperty}`;break;case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"bindingCommandHelp":l=aw(l);break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=String(l[a.slice(1)]):l=String(l)}t=t.slice(0,o.index)+l+t.slice(r.lastIndex),o=r.exec(t)}}return t};function aw(i){switch(i){case"delegate":return`
The ".delegate" binding command has been removed in v2. Binding command ".trigger" should be used instead. If you are migrating v1 application, install compat package to add back the ".delegate" binding command for ease of migration.`;case"call":return`
The ".call" binding command has been removed in v2. If you want to pass a callback that preserves the context of the function call, you can use lambda instead. Refer to lambda expression doc for more details.`;default:return""}}var Zd,ep,tp,sp,ip;class _c{constructor(e,t,s,n){if(this.chars=e,this.repeat=t,this.isSymbol=s,this.isInverted=n,n)switch(e.length){case 0:this.has=this._hasOfNoneInverse;break;case 1:this.has=this._hasOfSingleInverse;break;default:this.has=this._hasOfMultipleInverse}else switch(e.length){case 0:this.has=this._hasOfNone;break;case 1:this.has=this._hasOfSingle;break;default:this.has=this._hasOfMultiple}}equals(e){return this.chars===e.chars&&this.repeat===e.repeat&&this.isSymbol===e.isSymbol&&this.isInverted===e.isInverted}_hasOfMultiple(e){return this.chars.includes(e)}_hasOfSingle(e){return this.chars===e}_hasOfNone(e){return!1}_hasOfMultipleInverse(e){return!this.chars.includes(e)}_hasOfSingleInverse(e){return this.chars!==e}_hasOfNoneInverse(e){return!0}}class lw{constructor(){this.parts=U,this._pattern="",this._currentRecord={},this._partsRecord={}}get pattern(){const e=this._pattern;return e===""?null:e}set pattern(e){e==null?(this._pattern="",this.parts=U):(this._pattern=e,this.parts=this._partsRecord[e])}append(e,t){const s=this._currentRecord;s[e]===void 0?s[e]=t:s[e]+=t}next(e){const t=this._currentRecord;let s;t[e]!==void 0&&(s=this._partsRecord,s[e]===void 0?s[e]=[t[e]]:s[e].push(t[e]),t[e]=void 0)}}class mc{get _pattern(){return this._isEndpoint?this._patterns[0]:null}constructor(e,...t){this.charSpec=e,this._nextStates=[],this._types=null,this._isEndpoint=!1,this._patterns=t}findChild(e){const t=this._nextStates,s=t.length;let n=null,r=0;for(;r<s;++r)if(n=t[r],e.equals(n.charSpec))return n;return null}append(e,t){const s=this._patterns;s.includes(t)||s.push(t);let n=this.findChild(e);return n==null&&(n=new mc(e,t),this._nextStates.push(n),e.repeat&&n._nextStates.push(n)),n}findMatches(e,t){const s=[],n=this._nextStates,r=n.length;let o=0,a=null,l=0,c=0;for(;l<r;++l)if(a=n[l],a.charSpec.has(e))if(s.push(a),o=a._patterns.length,c=0,a.charSpec.isSymbol)for(;c<o;++c)t.next(a._patterns[c]);else for(;c<o;++c)t.append(a._patterns[c],e);return s}}let Bh=class{constructor(e){this.text=e;const t=this._len=e.length,s=this._specs=[];let n=0;for(;t>n;++n)s.push(new _c(e[n],!1,!1,!1))}eachChar(e){const t=this._len,s=this._specs;let n=0;for(;t>n;++n)e(s[n])}},cw=class{constructor(e){this.text="PART",this._spec=new _c(e,!0,!1,!0)}eachChar(e){e(this._spec)}};class hw{constructor(e){this.text=e,this._spec=new _c(e,!1,!0,!1)}eachChar(e){e(this._spec)}}class uw{constructor(){this.statics=0,this.dynamics=0,this.symbols=0}}const dw=ls("ISyntaxInterpreter",i=>i.singleton(pw));class pw{constructor(){this._rootState=new mc(null),this._initialStates=[this._rootState]}add(e){e=e.slice(0).sort((d,p)=>d.pattern>p.pattern?1:-1);const t=e.length;let s,n,r,o,a,l,c,u=0,h;for(;t>u;){for(s=this._rootState,n=e[u],r=n.pattern,o=new uw,a=this._parse(n,o),l=a.length,c=d=>s=s.append(d,r),h=0;l>h;++h)a[h].eachChar(c);s._types=o,s._isEndpoint=!0,++u}}interpret(e){const t=new lw,s=e.length;let n=this._initialStates,r=0,o;for(;r<s&&(n=this._getNextStates(n,e.charAt(r),t),n.length!==0);++r);return n=n.filter(fw),n.length>0&&(n.sort(gw),o=n[0],o.charSpec.isSymbol||t.next(o._pattern),t.pattern=o._pattern),t}_getNextStates(e,t,s){const n=[];let r=null;const o=e.length;let a=0;for(;a<o;++a)r=e[a],n.push(...r.findMatches(t,s));return n}_parse(e,t){const s=[],n=e.pattern,r=n.length,o=e.symbols;let a=0,l=0,c="";for(;a<r;)c=n.charAt(a),o.length===0||!o.includes(c)?a===l&&c==="P"&&n.slice(a,a+4)==="PART"?(l=a=a+4,s.push(new cw(o)),++t.dynamics):++a:a!==l?(s.push(new Bh(n.slice(l,a))),++t.statics,l=a):(s.push(new hw(n.slice(l,a+1))),++t.symbols,l=++a);return l!==a&&(s.push(new Bh(n.slice(l,a))),++t.statics),s}}function fw(i){return i._isEndpoint}function gw(i,e){const t=i._types,s=e._types;return t.statics!==s.statics?s.statics-t.statics:t.dynamics!==s.dynamics?s.dynamics-t.dynamics:t.symbols!==s.symbols?s.symbols-t.symbols:0}class wt{constructor(e,t,s,n,r=null){this.rawName=e,this.rawValue=t,this.target=s,this.command=n,this.parts=r}}const _w=ls("IAttributePattern"),vc=ls("IAttributeParser",i=>i.singleton(mw));class mw{constructor(){this._cache={},this._patterns={},this._initialized=!1,this._allDefinitions=[],this._interpreter=S(dw),this._container=S(Bi)}registerPattern(e,t){if(this._initialized)throw ke(88);const s=this._patterns;for(const{pattern:n}of e){if(s[n]!=null)throw ke(89,n);s[n]={patternType:t}}this._allDefinitions.push(...e)}_initialize(){this._interpreter.add(this._allDefinitions);const e=this._container;for(const[,t]of Object.entries(this._patterns))t.pattern=e.get(t.patternType)}parse(e,t){this._initialized||(this._initialize(),this._initialized=!0);let s=this._cache[e];s==null&&(s=this._cache[e]=this._interpreter.interpret(e));const n=s.pattern;return n==null?new wt(e,t,e,null,null):this._patterns[n].pattern[n](e,t,s.parts)}}const Zs=Tn({name:Xs("attribute-pattern"),create(i,e){return{register(t){t.get(vc).registerPattern(i,e),gc(_w,e).register(t)}}}});class ml{"PART.PART"(e,t,s){return new wt(e,t,s[0],s[1])}"PART.PART.PART"(e,t,s){return new wt(e,t,`${s[0]}.${s[1]}`,s[2])}}Zd=Symbol.metadata;ml[Zd]={[rs]:Zs.create([{pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."}],ml)};class vl{ref(e,t,s){return new wt(e,t,"element","ref")}"PART.ref"(e,t,s){let n=s[0];return n==="view-model"&&(n="component",console.warn(`[aurelia] Detected view-model.ref usage: "${e}=${t}". This is deprecated and component.ref should be used instead`)),new wt(e,t,n,"ref")}}ep=Symbol.metadata;vl[ep]={[rs]:Zs.create([{pattern:"ref",symbols:""},{pattern:"PART.ref",symbols:"."}],vl)};class bl{"PART.trigger:PART"(e,t,s){return new wt(e,t,s[0],"trigger",s)}"PART.capture:PART"(e,t,s){return new wt(e,t,s[0],"capture",s)}}tp=Symbol.metadata;bl[tp]={[rs]:Zs.create([{pattern:"PART.trigger:PART",symbols:".:"},{pattern:"PART.capture:PART",symbols:".:"}],bl)};class Nh{":PART"(e,t,s){return new wt(e,t,s[0],"bind")}}sp=Symbol.metadata;Nh[sp]={[rs]:Zs.create([{pattern:":PART",symbols:":"}],Nh)};class Mh{"@PART"(e,t,s){return new wt(e,t,s[0],"trigger")}"@PART:PART"(e,t,s){return new wt(e,t,s[0],"trigger",[s[0],"trigger",...s.slice(1)])}}ip=Symbol.metadata;Mh[ip]={[rs]:Zs.create([{pattern:"@PART",symbols:"@"},{pattern:"@PART:PART",symbols:"@:"}],Mh)};const wl=xt.get,jh=xt.define,np="ra",rp="rb",op="rc",ap="rd",lp="re",cp="rf",bc="rg",hp="ri",up="rj",dp="rk",pp="rl",fp="ha",gp="hb",_p="hc",vw="hd",mp="he",vp="hf",bp="hg",wp="hs",yp="hp",Cp="svb",Re=Tn({hydrateElement:np,hydrateAttribute:rp,hydrateTemplateController:op,hydrateLetElement:ap,setProperty:lp,interpolation:cp,propertyBinding:bc,letBinding:hp,refBinding:up,iteratorBinding:dp,multiAttr:pp,textBinding:fp,listenerBinding:gp,attributeBinding:_p,stylePropertyBinding:vw,setAttribute:mp,setClassAttribute:vp,setStyleAttribute:bp,spreadTransferedBinding:wp,spreadElementProp:yp,spreadValueBinding:Cp}),In=ls("Instruction");class ps{constructor(e,t){this.from=e,this.to=t,this.type=cp}}class Or{constructor(e,t,s){this.from=e,this.to=t,this.mode=s,this.type=bc}}class bw{constructor(e,t,s){this.forOf=e,this.to=t,this.props=s,this.type=dp}}class ww{constructor(e,t){this.from=e,this.to=t,this.type=up}}class Wi{constructor(e,t){this.value=e,this.to=t,this.type=lp}}class yw{constructor(e,t,s){this.value=e,this.to=t,this.command=s,this.type=pp}}class Cw{constructor(e,t,s,n,r,o){this.res=e,this.props=t,this.projections=s,this.containerless=n,this.captures=r,this.data=o,this.type=np}}class Ia{constructor(e,t,s){this.res=e,this.alias=t,this.props=s,this.type=rp}}class kw{constructor(e,t,s,n){this.def=e,this.res=t,this.alias=s,this.props=n,this.type=op}}class Aw{constructor(e,t){this.instructions=e,this.toBindingContext=t,this.type=ap}}class Fh{constructor(e,t){this.from=e,this.to=t,this.type=hp}}class $w{constructor(e){this.from=e,this.type=fp}}class kp{constructor(e,t,s,n){this.from=e,this.to=t,this.capture=s,this.modifier=n,this.type=gp}}class zh{constructor(e,t){this.value=e,this.to=t,this.type=mp}}class Hh{constructor(e){this.value=e,this.type=vp}}class Uh{constructor(e){this.value=e,this.type=bp}}class wc{constructor(e,t,s){this.attr=e,this.from=t,this.to=s,this.type=_p}}class Wh{constructor(){this.type=wp}}class qh{constructor(e){this.instruction=e,this.type=yp}}class yl{constructor(e,t){this.target=e,this.from=t,this.type=Cp}}class ko{constructor(e,t,s,n){this.Type=e,this.name=t,this.aliases=s,this.key=n}static create(e,t){let s,n;return ea(e)?(s=e,n={name:s}):(s=e.name,n=e),new ko(t,js(Cl(t,"name"),s),Ee(Cl(t,"aliases"),n.aliases,t.aliases),hn(s))}register(e,t){const s=this.Type,n=typeof t=="string"?hn(t):this.key,r=this.aliases;e.has(n,!1)?console.warn(`[DEV:aurelia] ${ke(157,this.name)}`):e.register(e.has(s,!1)?null:gc(s,s),Dh(s,n),...r.map(o=>Dh(s,hn(o))))}}const Ye="binding-command",co=Xs(Ye),hn=i=>`${co}:${i}`,Cl=(i,e)=>wl(vd.annotation.keyFor(e),i),Sw=(()=>{const i="__au_static_resource__",e=(t,s,n)=>{var o;let r=wl(i,t);return r==null&&((o=t.$au)==null?void 0:o.type)===s&&(r=n(t.$au,t),jh(r,t,i)),r};return Tn({name:co,keyFrom:hn,define(t,s){const n=ko.create(t,s),r=n.Type;return jh(n,r,co,Nt),r},getAnnotation:Cl,find(t,s){const n=t.find(Ye,s);return n==null?null:wl(co,n)??e(n,Ye,ko.create)??null},get(t,s){try{return t.get(gn(hn(s)))}catch(n){throw console.log(`


[DEV:aurelia] Cannot retrieve binding command with name




`,s),n}return t.get(gn(hn(s)))}})})();class Ap{get ignoreAttr(){return!1}build(e,t,s){let r=e.attr.target,o=e.attr.rawValue;return o=o===""?Le(r):o,e.bindable==null?r=s.map(e.node,r)??Le(r):r=e.bindable.name,new Or(t.parse(o,cs),r,1)}}Ap.$au={type:Ye,name:"one-time"};class $p{get ignoreAttr(){return!1}build(e,t,s){let r=e.attr.target,o=e.attr.rawValue;return o=o===""?Le(r):o,e.bindable==null?r=s.map(e.node,r)??Le(r):r=e.bindable.name,new Or(t.parse(o,cs),r,2)}}$p.$au={type:Ye,name:"to-view"};class Sp{get ignoreAttr(){return!1}build(e,t,s){const n=e.attr;let r=n.target,o=n.rawValue;return o=o===""?Le(r):o,e.bindable==null?r=s.map(e.node,r)??Le(r):r=e.bindable.name,new Or(t.parse(o,cs),r,4)}}Sp.$au={type:Ye,name:"from-view"};class xp{get ignoreAttr(){return!1}build(e,t,s){const n=e.attr;let r=n.target,o=n.rawValue;return o=o===""?Le(r):o,e.bindable==null?r=s.map(e.node,r)??Le(r):r=e.bindable.name,new Or(t.parse(o,cs),r,6)}}xp.$au={type:Ye,name:"two-way"};class Tp{get ignoreAttr(){return!1}build(e,t,s){const n=e.attr,r=e.bindable;let o=n.rawValue,a=n.target,l,c;return o=o===""?Le(a):o,r==null?(c=s.isTwoWay(e.node,a)?6:2,a=s.map(e.node,a)??Le(a)):(l=e.def.defaultBindingMode??0,c=r.mode===0||r.mode==null?l==null||l===0?2:l:r.mode,a=r.name),new Or(t.parse(o,cs),a,ea(c)?Ni[c]??0:c)}}Tp.$au={type:Ye,name:"bind"};class Ip{constructor(){this._attrParser=S(vc)}get ignoreAttr(){return!1}build(e,t){const s=e.bindable===null?Le(e.attr.target):e.bindable.name,n=t.parse(e.attr.rawValue,"IsIterator");let r=U;if(n.semiIdx>-1){const o=e.attr.rawValue.slice(n.semiIdx+1),a=o.indexOf(":");if(a>-1){const l=o.slice(0,a).trim(),c=o.slice(a+1).trim(),u=this._attrParser.parse(l,c);r=[new yw(c,u.target,u.command)]}}return new bw(n,s,r)}}Ip.$au={type:Ye,name:"for"};class Pp{get ignoreAttr(){return!0}build(e,t){var s;return new kp(t.parse(e.attr.rawValue,Yd),e.attr.target,!1,((s=e.attr.parts)==null?void 0:s[2])??null)}}Pp.$au={type:Ye,name:"trigger"};class Ep{get ignoreAttr(){return!0}build(e,t){var s;return new kp(t.parse(e.attr.rawValue,Yd),e.attr.target,!0,((s=e.attr.parts)==null?void 0:s[2])??null)}}Ep.$au={type:Ye,name:"capture"};class Rp{get ignoreAttr(){return!0}build(e,t){const s=e.attr,n=s.target;let r=s.rawValue;return r=r===""?Le(n):r,new wc(n,t.parse(r,cs),n)}}Rp.$au={type:Ye,name:"attr"};class Op{get ignoreAttr(){return!0}build(e,t){return new wc("style",t.parse(e.attr.rawValue,cs),e.attr.target)}}Op.$au={type:Ye,name:"style"};class Lp{get ignoreAttr(){return!0}build(e,t){return new wc("class",t.parse(e.attr.rawValue,cs),e.attr.target)}}Lp.$au={type:Ye,name:"class"};class Vp{get ignoreAttr(){return!0}build(e,t){return new ww(t.parse(e.attr.rawValue,cs),e.attr.target)}}Vp.$au={type:Ye,name:"ref"};class Dp{get ignoreAttr(){return!1}build(e){return new yl(e.attr.target,e.attr.rawValue)}}Dp.$au={type:Ye,name:"spread"};const xw=ls("ITemplateElementFactory",i=>i.singleton(Tw)),Kh={};class Tw{constructor(){this.p=S($n),this._template=this.t()}t(){return this.p.document.createElement("template")}createTemplate(e){var s;if(ea(e)){let n=Kh[e];if(n===void 0){const r=this._template;r.innerHTML=e;const o=r.content.firstElementChild;t(o)?(this._template=this.t(),n=r):(r.content.removeChild(o),n=o),Kh[e]=n}return n.cloneNode(!0)}if(e.nodeName!=="TEMPLATE"){const n=this.t();return n.content.appendChild(e),n}return(s=e.parentNode)==null||s.removeChild(e),e.cloneNode(!0);function t(n){if(n==null||n.nodeName!=="TEMPLATE"||n.nextElementSibling!=null)return!0;const o=n.previousSibling;if(o!=null)switch(o.nodeType){case 3:return o.textContent.trim().length>0}const a=n.nextSibling;if(a!=null)switch(a.nodeType){case 3:return a.textContent.trim().length>0}return!1}}}const Pa="au-start",Ea="au-end",Ra=(i,e,t)=>i.insertBefore(e,t),Gh=(i,e,t)=>{if(i===null)return;const s=t.length;let n=0;for(;s>n;)i.insertBefore(t[n],e),++n},ai=(i,e)=>i.content.appendChild(e),Qh=(i,e)=>{const t=e.length;let s=0;for(;t>s;)i.content.appendChild(e[s]),++s},Jh=i=>i.nodeType===1,Yh=i=>i.nodeType===3,Ln="au-slot",Xh="default",Vn=(i=>()=>`anonymous-${++i}`)(0);class Bp{constructor(){this.debug=!1,this.resolveResources=!0}compile(e,t){var h,d;if(e.template==null||e.needsCompile===!1)return e;const s=new Ao(e,t,null,null,void 0),n=ea(e.template)||!e.enhance?s._templateFactory.createTemplate(e.template):e.template,r=n.nodeName===Oa&&n.content!=null,o=r?n.content:n,a=Lw.findAll(t),l=a.length;let c=0;if(l>0)for(;l>c;)(d=(h=a[c]).compiling)==null||d.call(h,n),++c;if(n.hasAttribute(kl))throw ke(701,e);return this._compileLocalElement(o,s),this._compileNode(o,s),{...e,name:e.name||Vn(),dependencies:(e.dependencies??U).concat(s.deps??U),instructions:s.rows,surrogates:r?this._compileSurrogate(n,s):U,template:n,hasSlots:s.hasSlot,needsCompile:!1}}compileSpread(e,t,s,n,r){const o=new Ao(e,s,null,null,void 0),a=[],l=r??o._findElement(n.nodeName.toLowerCase()),c=l!==null,u=o._exprParser,h=t.length;let d=0,p,f=null,_,g,v,m,A,w=null,k,O,R,N;for(;h>d;++d){if(p=t[d],R=p.target,N=p.rawValue,R==="...$attrs"){a.push(new Wh);continue}if(w=o._getCommand(p),w!==null&&w.ignoreAttr){B.node=n,B.attr=p,B.bindable=null,B.def=null,a.push(w.build(B,o._exprParser,o._attrMapper));continue}if(c&&(v=o._getBindables(l),m=v.attrs[R],m!==void 0)){w==null?(k=u.parse(N,Dt),a.push(new qh(k==null?new Wi(N,m.name):new ps(k,m.name)))):(B.node=n,B.attr=p,B.bindable=m,B.def=l,a.push(new qh(w.build(B,o._exprParser,o._attrMapper))));continue}if(f=o._findAttr(R),f!==null){if(f.isTemplateController)throw ke(9998,R);v=o._getBindables(f),O=f.noMultiBindings===!1&&w===null&&La(N),O?g=this._compileMultiBindings(n,N,f,o):(A=v.primary,w===null?(k=u.parse(N,Dt),g=[k===null?new Wi(N,A.name):new ps(k,A.name)]):(B.node=n,B.attr=p,B.bindable=A,B.def=f,g=[w.build(B,o._exprParser,o._attrMapper)])),(_??(_=[])).push(new Ia(this.resolveResources?f:f.name,f.aliases!=null&&f.aliases.includes(R)?R:void 0,g));continue}if(w==null)if(k=u.parse(N,Dt),k!=null)a.push(new ps(k,o._attrMapper.map(n,R)??Le(R)));else switch(R){case"class":a.push(new Hh(N));break;case"style":a.push(new Uh(N));break;default:a.push(new zh(N,R))}else B.node=n,B.attr=p,B.bindable=null,B.def=null,a.push(w.build(B,o._exprParser,o._attrMapper))}return Qr(),_!=null?_.concat(a):a}_compileSurrogate(e,t){const s=[],n=e.attributes,r=t._exprParser;let o=n.length,a=0,l,c,u,h,d=null,p,f,_,g,v=null,m,A,w,k;for(;o>a;++a){if(l=n[a],c=l.name,u=l.value,h=t._attrParser.parse(c,u),w=h.target,k=h.rawValue,Pw[w])throw ke(702,c);if(v=t._getCommand(h),v!==null&&v.ignoreAttr){B.node=e,B.attr=h,B.bindable=null,B.def=null,s.push(v.build(B,t._exprParser,t._attrMapper));continue}if(d=t._findAttr(w),d!==null){if(d.isTemplateController)throw ke(703,w);_=t._getBindables(d),A=d.noMultiBindings===!1&&v===null&&La(k),A?f=this._compileMultiBindings(e,k,d,t):(g=_.primary,v===null?(m=r.parse(k,Dt),f=m===null?k===""?[]:[new Wi(k,g.name)]:[new ps(m,g.name)]):(B.node=e,B.attr=h,B.bindable=g,B.def=d,f=[v.build(B,t._exprParser,t._attrMapper)])),e.removeAttribute(c),--a,--o,(p??(p=[])).push(new Ia(this.resolveResources?d:d.name,d.aliases!=null&&d.aliases.includes(w)?w:void 0,f));continue}if(v===null)if(m=r.parse(k,Dt),m!=null)e.removeAttribute(c),--a,--o,s.push(new ps(m,t._attrMapper.map(e,w)??Le(w)));else switch(c){case"class":s.push(new Hh(k));break;case"style":s.push(new Uh(k));break;default:s.push(new zh(k,c))}else B.node=e,B.attr=h,B.bindable=null,B.def=null,s.push(v.build(B,t._exprParser,t._attrMapper))}return Qr(),p!=null?p.concat(s):s}_compileNode(e,t){switch(e.nodeType){case 1:switch(e.nodeName){case"LET":return this._compileLet(e,t);default:return this._compileElement(e,t)}case 3:return this._compileText(e,t);case 11:{let s=e.firstChild;for(;s!==null;)s=this._compileNode(s,t);break}}return e.nextSibling}_compileLet(e,t){const s=e.attributes,n=s.length,r=[],o=t._exprParser;let a=!1,l=0,c,u,h,d,p,f,_,g;for(;n>l;++l){if(c=s[l],h=c.name,d=c.value,h==="to-binding-context"){a=!0;continue}if(u=t._attrParser.parse(h,d),f=u.target,_=u.rawValue,p=t._getCommand(u),p!==null){if(u.command==="bind")r.push(new Fh(o.parse(_,cs),Le(f)));else throw ke(704,u);continue}g=o.parse(_,Dt),g===null&&console.warn(`[DEV:aurelia] Property "${f}" is declared with literal string ${_}. Did you mean ${f}.bind="${_}"?`),r.push(new Fh(g===null?new Me(_):g,Le(f)))}return t.rows.push([new Aw(r,a)]),this._markAsTarget(e,t).nextSibling}_compileElement(e,t){var ct,C,I,W,H,pe,Oe,Wt;const s=e.nextSibling,n=(e.getAttribute("as-element")??e.nodeName).toLowerCase(),r=t._findElement(n),o=r!==null,a=o&&r.shadowOptions!=null,l=r==null?void 0:r.capture,c=l!=null&&typeof l!="boolean",u=l?[]:U,h=t._exprParser,d=this.debug?jt:()=>{e.removeAttribute(m),--g,--_};let p=e.attributes,f,_=p.length,g=0,v,m,A,w,k,O,R=null,N=!1,V,M,K,xe,me,ve,Pe,T=null,le,Fe,j,ce,et=!0,Ue=!1,Et=!1,y=!1,x,b=0;if(n==="slot"){if(t.root.def.shadowOptions==null)throw ke(717,t.root.def.name);t.root.hasSlot=!0}for(o&&(x={},et=(ct=r.processContent)==null?void 0:ct.call(r.Type,e,t.p,x),p=e.attributes,_=p.length);_>g;++g){switch(v=p[g],m=v.name,A=v.value,m){case"as-element":case"containerless":d(),Ue=Ue||m==="containerless";continue}if(w=t._attrParser.parse(m,A),T=t._getCommand(w),j=w.target,ce=w.rawValue,l&&(!c||c&&l(j))){if(T!=null&&T.ignoreAttr){d(),u.push(w);continue}if(Et=j!==Ln&&j!=="slot"&&((b=j.indexOf("..."))===-1||b===0&&j==="...$attrs"),Et&&(le=t._getBindables(r),le.attrs[j]==null&&!((C=t._findAttr(j))!=null&&C.isTemplateController))){d(),u.push(w);continue}}if(j==="...$attrs"){(k??(k=[])).push(new Wh),d();continue}if(T!=null&&T.ignoreAttr){B.node=e,B.attr=w,B.bindable=null,B.def=null,(k??(k=[])).push(T.build(B,t._exprParser,t._attrMapper)),d();continue}if(j.indexOf("...")===0){if(o&&(j=j.slice(3))!=="$element"){(O??(O=[])).push(new yl("$bindables",j==="$bindables"?ce:j)),d();continue}throw(j==="$bindable"||j==="bindables")&&console.warn(`[DEV:aurelia] Detected usage of ${j} on <${e.nodeName}>, did you mean "$bindables"?`),ke(720,j)}if(o){if(le=t._getBindables(r),V=le.attrs[j],V!==void 0){T===null?(ve=h.parse(ce,Dt),(O??(O=[])).push(ve==null?new Wi(ce,V.name):new ps(ve,V.name))):(B.node=e,B.attr=w,B.bindable=V,B.def=r,(O??(O=[])).push(T.build(B,t._exprParser,t._attrMapper))),d(),R=t._findAttr(j),R!==null&&console.warn(`[DEV:aurelia] Binding with bindable "${j}" on custom element "${r.name}" is ambiguous.There is a custom attribute with the same name.`);continue}if(j==="$bindables"){if(T!=null){B.node=e,B.attr=w,B.bindable=null,B.def=r;{const q=T.build(B,t._exprParser,t._attrMapper);q instanceof yl||console.warn(`[DEV:aurelia] Binding with "$bindables" on custom element "${r.name}" with command ${w.command}  did not result in a spread binding instruction. This likely won't work as expected.`),(O??(O=[])).push(q)}}else console.warn(`[DEV:aurelia] Usage of "$bindables" on custom element "<${r.name}>" is ignored.`);d();continue}}if(j==="$bindables")throw ke(721,e.nodeName,j,ce);if(R=t._findAttr(j),R!==null){le=t._getBindables(R),N=R.noMultiBindings===!1&&T===null&&La(ce),N?K=this._compileMultiBindings(e,ce,R,t):(Fe=le.primary,T===null?(ve=h.parse(ce,Dt),K=ve===null?ce===""?[]:[new Wi(ce,Fe.name)]:[new ps(ve,Fe.name)]):(B.node=e,B.attr=w,B.bindable=Fe,B.def=R,K=[T.build(B,t._exprParser,t._attrMapper)])),d(),R.isTemplateController?(xe??(xe=[])).push(new kw(Iw,this.resolveResources?R:R.name,void 0,K)):(M??(M=[])).push(new Ia(this.resolveResources?R:R.name,R.aliases!=null&&R.aliases.includes(j)?j:void 0,K));continue}if(T===null){ve=h.parse(ce,Dt),ve!=null&&(d(),(k??(k=[])).push(new ps(ve,t._attrMapper.map(e,j)??Le(j))));continue}B.node=e,B.attr=w,B.bindable=null,B.def=null,(k??(k=[])).push(T.build(B,t._exprParser,t._attrMapper)),d()}Qr(),this._shouldReorderAttrs(e,k)&&k!=null&&k.length>1&&this._reorder(e,k),o&&(Pe=new Cw(this.resolveResources?r:r.name,O??U,null,Ue,u,x)),(k!=null||Pe!=null||M!=null)&&(f=U.concat(Pe??U,M??U,k??U),y=!0);let $;if(xe!=null){_=xe.length-1,g=_,me=xe[g];let q;Zh(e)?(q=t.t(),Qh(q,[t._marker(),t._comment(Pa),t._comment(Ea)])):(this._replaceByMarker(e,t),e.nodeName==="TEMPLATE"?q=e:(q=t.t(),ai(q,e)));const Rt=q,tt=t._createChild(f==null?[]:[f]);let Pn,Ot,ni=!1,ri,Lt,qt,Kt,En,Vs,oi=0,fh=0,We=e.firstChild,gh=!1;if(et!==!1)for(;We!==null;){if(Ot=Jh(We)?We.getAttribute(Ln):null,ni=Ot!==null||o&&!a,Pn=We.nextSibling,ni){if(!o)throw ke(706,Ot,n);(I=We.removeAttribute)==null||I.call(We,Ln),gh=Yh(We)&&We.textContent.trim()==="",gh||((W=Lt??(Lt={}))[H=Ot||Xh]??(W[H]=[])).push(We),e.removeChild(We)}We=Pn}if(Lt!=null){ri={};for(Ot in Lt){for(q=t.t(),qt=Lt[Ot],oi=0,fh=qt.length;fh>oi;++oi)Kt=qt[oi],Kt.nodeName==="TEMPLATE"?Kt.attributes.length>0?ai(q,Kt):ai(q,Kt.content):ai(q,Kt);Vs=t._createChild(),this._compileNode(q.content,Vs),ri[Ot]={name:Vn(),type:Qi,template:q,instructions:Vs.rows,needsCompile:!1}}Pe.projections=ri}if(y&&(o&&(Ue||r.containerless)?this._replaceByMarker(e,t):this._markAsTarget(e,t)),$=!o||!r.containerless&&!Ue&&et!==!1,$)if(e.nodeName===Oa)this._compileNode(e.content,tt);else for(We=e.firstChild;We!==null;)We=this._compileNode(We,tt);for(me.def={name:Vn(),type:Qi,template:Rt,instructions:tt.rows,needsCompile:!1};g-- >0;)me=xe[g],q=t.t(),En=t._marker(),Qh(q,[En,t._comment(Pa),t._comment(Ea)]),me.def={name:Vn(),type:Qi,template:q,needsCompile:!1,instructions:[[xe[g+1]]]};t.rows.push([me])}else{f!=null&&t.rows.push(f);let q=e.firstChild,Rt,tt,Pn=!1,Ot=null,ni,ri,Lt,qt,Kt,En=!1,Vs=0,oi=0;if(et!==!1)for(;q!==null;){if(tt=Jh(q)?q.getAttribute(Ln):null,Pn=tt!==null||o&&!a,Rt=q.nextSibling,Pn){if(!o)throw ke(706,tt,n);(pe=q.removeAttribute)==null||pe.call(q,Ln),En=Yh(q)&&q.textContent.trim()==="",En||((Oe=ni??(ni={}))[Wt=tt||Xh]??(Oe[Wt]=[])).push(q),e.removeChild(q)}q=Rt}if(ni!=null){Ot={};for(tt in ni){for(qt=t.t(),ri=ni[tt],Vs=0,oi=ri.length;oi>Vs;++Vs)Lt=ri[Vs],Lt.nodeName===Oa?Lt.attributes.length>0?ai(qt,Lt):ai(qt,Lt.content):ai(qt,Lt);Kt=t._createChild(),this._compileNode(qt.content,Kt),Ot[tt]={name:Vn(),type:Qi,template:qt,instructions:Kt.rows,needsCompile:!1}}Pe.projections=Ot}if(y&&(o&&(Ue||r.containerless)?this._replaceByMarker(e,t):this._markAsTarget(e,t)),$=!o||!r.containerless&&!Ue&&et!==!1,$&&e.childNodes.length>0)for(q=e.firstChild;q!==null;)q=this._compileNode(q,t)}return s}_compileText(e,t){const s=e.parentNode,n=t._exprParser.parse(e.textContent,Dt),r=e.nextSibling;let o,a,l,c,u;if(n!==null){for({parts:o,expressions:a}=n,(u=o[0])&&Ra(s,t._text(u),e),l=0,c=a.length;c>l;++l)Gh(s,e,[t._marker(),t._text(" ")]),(u=o[l+1])&&Ra(s,t._text(u),e),t.rows.push([new $w(a[l])]);s.removeChild(e)}return r}_compileMultiBindings(e,t,s,n){const r=n._getBindables(s),o=t.length,a=[];let l,c,u=0,h=0,d,p,f,_;for(let g=0;g<o;++g)if(h=t.charCodeAt(g),h===92)++g;else if(h===58){for(l=t.slice(u,g);t.charCodeAt(++g)<=32;);for(u=g;g<o;++g)if(h=t.charCodeAt(g),h===92)++g;else if(h===59){c=t.slice(u,g);break}if(c===void 0&&(c=t.slice(u)),p=n._attrParser.parse(l,c),f=n._getCommand(p),_=r.attrs[p.target],_==null)throw ke(707,p.target,s.name);for(f===null?(d=n._exprParser.parse(c,Dt),a.push(d===null?new Wi(c,_.name):new ps(d,_.name))):(B.node=e,B.attr=p,B.bindable=_,B.def=s,a.push(f.build(B,n._exprParser,n._attrMapper)));g<o&&t.charCodeAt(++g)<=32;);u=g,l=void 0,c=void 0}return Qr(),a}_compileLocalElement(e,t){const s=t.root.def.name,n=e,r=Ca(n.querySelectorAll("template[as-custom-element]")),o=r.length;if(o===0)return;if(o===n.childElementCount)throw ke(708,s);const a=new Set,l=[];for(const u of r){if(u.parentNode!==n)throw ke(709,s);const h=Ow(s,u,a),d=u.content,p=Ca(d.querySelectorAll("bindable")),f=new Set,_=new Set,g=p.reduce((m,A)=>{if(A.parentNode!==d)throw ke(710,h);const w=A.getAttribute("name");if(w===null)throw ke(711,A,h);const k=A.getAttribute("attribute");if(k!==null&&_.has(k)||f.has(w))throw ke(712,f,k);k!==null&&_.add(k),f.add(w);const O=Ca(A.attributes).filter(R=>!eu.includes(R.name));return O.length>0&&console.warn(`[DEV:aurelia] The attribute(s) ${O.map(R=>R.name).join(", ")} will be ignored for ${A.outerHTML}. Only ${eu.join(", ")} are processed.`),A.remove(),m[w]={name:w,attribute:k??void 0,mode:A.getAttribute("mode")??"default"},m},{});class v{}v.$au={type:Qi,name:h,template:u,bindables:g},Reflect.defineProperty(v,"name",{value:fd(h)}),l.push(v),n.removeChild(u)}const c=(t.root.def.dependencies??[]).concat(t.root.def.Type==null?U:[t.root.def.Type]);for(const u of l)u.dependencies=c.concat(l.filter(h=>h!==u)),t._addLocalDep(u)}_shouldReorderAttrs(e,t){const s=e.nodeName;return s==="INPUT"&&Ew[e.type]===1||s==="SELECT"&&(e.hasAttribute("multiple")||(t==null?void 0:t.some(n=>n.type===bc&&n.to==="multiple")))}_reorder(e,t){switch(e.nodeName){case"INPUT":{const s=t;let n,r,o=0,a;for(let l=0;l<s.length&&o<3;l++)switch(a=s[l],a.to){case"model":case"value":case"matcher":n=l,o++;break;case"checked":r=l,o++;break}r!==void 0&&n!==void 0&&r<n&&([s[n],s[r]]=[s[r],s[n]]);break}case"SELECT":{const s=t;let n=0,r=0,o=0,a;for(let l=0;l<s.length&&o<2;++l){switch(a=s[l],a.to){case"multiple":r=l,o++;break;case"value":n=l,o++;break}o===2&&n<r&&([s[r],s[n]]=[s[n],s[r]])}}}}_markAsTarget(e,t){return Ra(e.parentNode,t._comment("au*"),e),e}_replaceByMarker(e,t){if(Zh(e))return e;const s=e.parentNode,n=t._marker();return Gh(s,e,[n,t._comment(Pa),t._comment(Ea)]),s.removeChild(e),n}}Bp.register=Ko(ta);const Oa="TEMPLATE",Zh=i=>i.nodeValue==="au*";class Ao{constructor(e,t,s,n,r){var a;this.hasSlot=!1,this.deps=null;const o=s!==null;if(this.c=t,this.root=n===null?this:n,this.def=e,this.parent=s,this._resourceResolver=o?s._resourceResolver:t.get(Np),this._commandResolver=o?s._commandResolver:t.get(Rw),this._templateFactory=o?s._templateFactory:t.get(xw),this._attrParser=o?s._attrParser:t.get(vc),this._exprParser=o?s._exprParser:t.get(Rr),this._attrMapper=o?s._attrMapper:t.get(Xd),this._logger=o?s._logger:t.get(Be),typeof((a=(this.p=o?s.p:t.get($n)).document)==null?void 0:a.nodeType)!="number")throw ke(722);this.localEls=o?s.localEls:new Set,this.rows=r??[]}_addLocalDep(e){var t;return((t=this.root).deps??(t.deps=[])).push(e),this.root.c.register(e),this}_text(e){return this.p.document.createTextNode(e)}_comment(e){return this.p.document.createComment(e)}_marker(){return this._comment("au*")}h(e){const t=this.p.document.createElement(e);return e==="template"&&this.p.document.adoptNode(t.content),t}t(){return this.h("template")}_findElement(e){return this._resourceResolver.el(this.c,e)}_findAttr(e){return this._resourceResolver.attr(this.c,e)}_getBindables(e){return this._resourceResolver.bindables(e)}_createChild(e){return new Ao(this.def,this.c,this,this.root,e)}_getCommand(e){const t=e.command;return t===null?null:this._commandResolver.get(this.c,t)}}const La=i=>{const e=i.length;let t=0,s=0;for(;e>s;){if(t=i.charCodeAt(s),t===92)++s;else{if(t===58)return!0;if(t===36&&i.charCodeAt(s+1)===123)return!1}++s}return!1},Qr=()=>{B.node=B.attr=B.bindable=B.def=null},Iw={name:"unnamed",type:Qi},B={node:null,attr:null,bindable:null,def:null},Pw={id:!0,name:!0,"au-slot":!0,"as-element":!0},Ew={checkbox:1,radio:1},Np=ls("IResourceResolver"),Rw=ls("IBindingCommandResolver",i=>{class e{constructor(){this._cache=new WeakMap}get(s,n){let r=this._cache.get(s);return r||this._cache.set(s,r={}),n in r?r[n]:r[n]=Sw.get(s,n)}}return i.singleton(e)}),eu=Tn(["name","attribute","mode"]),kl="as-custom-element",Ow=(i,e,t)=>{const s=e.getAttribute(kl);if(s===null||s==="")throw ke(715,i);if(t.has(s))throw ke(716,s,i);return t.add(s),e.removeAttribute(kl),s},tu=ls("ITemplateCompilerHooks"),Lw=Tn({name:Xs("compiler-hooks"),define(i){return{register(e){gc(tu,i).register(e)}}},findAll(i){return i.get(vm(tu))}}),Dn="pending",ho="running",Va="completed",Jr="canceled",Da=new Map,su=i=>()=>{throw Oi(`AUR1005: The PLATFORM did not receive a valid reference to the global function '${i}'.`)};class yc{constructor(e,t={}){var s,n;this.macroTaskRequested=!1,this.macroTaskHandle=-1,this.globalThis=e,"decodeURI decodeURIComponent encodeURI encodeURIComponent Date Reflect console".split(" ").forEach(r=>{this[r]=r in t?t[r]:e[r]}),"clearInterval clearTimeout queueMicrotask setInterval setTimeout".split(" ").forEach(r=>{var o;this[r]=r in t?t[r]:((o=e[r])==null?void 0:o.bind(e))??su(r)}),this.performanceNow="performanceNow"in t?t.performanceNow:((n=(s=e.performance)==null?void 0:s.now)==null?void 0:n.bind(e.performance))??su("performance.now"),this.flushMacroTask=this.flushMacroTask.bind(this),this.taskQueue=new Cc(this,this.requestMacroTask.bind(this),this.cancelMacroTask.bind(this))}static getOrCreate(e,t={}){let s=Da.get(e);return s===void 0&&Da.set(e,s=new yc(e,t)),s}static set(e,t){Da.set(e,t)}requestMacroTask(){this.macroTaskRequested=!0,this.macroTaskHandle===-1&&(this.macroTaskHandle=this.setTimeout(this.flushMacroTask,0))}cancelMacroTask(){this.macroTaskRequested=!1,this.macroTaskHandle>-1&&(this.clearTimeout(this.macroTaskHandle),this.macroTaskHandle=-1)}flushMacroTask(){this.macroTaskHandle=-1,this.macroTaskRequested===!0&&(this.macroTaskRequested=!1,this.taskQueue.flush())}}class Cc{get isEmpty(){return this._pendingAsyncCount===0&&this._processing.length===0&&this._pending.length===0&&this._delayed.length===0}get _hasNoMoreFiniteWork(){return this._pendingAsyncCount===0&&this._processing.every(Ba)&&this._pending.every(Ba)&&this._delayed.every(Ba)}constructor(e,t,s){this.platform=e,this.$request=t,this.$cancel=s,this._suspenderTask=void 0,this._pendingAsyncCount=0,this._processing=[],this._pending=[],this._delayed=[],this._flushRequested=!1,this._yieldPromise=void 0,this._lastRequest=0,this._lastFlush=0,this._requestFlush=()=>{this._tracer.enabled&&this._tracer.enter(this,"requestFlush"),this._flushRequested||(this._flushRequested=!0,this._lastRequest=this._now(),this.$request()),this._tracer.enabled&&this._tracer.leave(this,"requestFlush")},this._now=e.performanceNow,this._tracer=new Bw(e.console)}flush(e=this._now()){if(this._tracer.enabled&&this._tracer.enter(this,"flush"),this._flushRequested=!1,this._lastFlush=e,this._suspenderTask===void 0){let t;if(this._pending.length>0&&(this._processing.push(...this._pending),this._pending.length=0),this._delayed.length>0)for(let n=0;n<this._delayed.length;++n)t=this._delayed[n],t.queueTime<=e&&(this._processing.push(t),this._delayed.splice(n--,1));let s;for(;this._processing.length>0;)if((s=this._processing.shift()).run(),s.status===ho)if(s.suspend===!0){this._suspenderTask=s,this._requestFlush(),this._tracer.enabled&&this._tracer.leave(this,"flush early async");return}else++this._pendingAsyncCount;if(this._pending.length>0&&(this._processing.push(...this._pending),this._pending.length=0),this._delayed.length>0)for(let n=0;n<this._delayed.length;++n)t=this._delayed[n],t.queueTime<=e&&(this._processing.push(t),this._delayed.splice(n--,1));if((this._processing.length>0||this._delayed.length>0||this._pendingAsyncCount>0)&&this._requestFlush(),this._yieldPromise!==void 0&&this._hasNoMoreFiniteWork){const n=this._yieldPromise;this._yieldPromise=void 0,n.resolve()}}else this._requestFlush();this._tracer.enabled&&this._tracer.leave(this,"flush full")}cancel(){this._tracer.enabled&&this._tracer.enter(this,"cancel"),this._flushRequested&&(this.$cancel(),this._flushRequested=!1),this._tracer.enabled&&this._tracer.leave(this,"cancel")}async yield(){this._tracer.enabled&&this._tracer.enter(this,"yield"),this.isEmpty?this._tracer.enabled&&this._tracer.leave(this,"yield empty"):(this._yieldPromise===void 0&&(this._tracer.enabled&&this._tracer.trace(this,"yield - creating promise"),this._yieldPromise=Fp()),await this._yieldPromise,this._tracer.enabled&&this._tracer.leave(this,"yield task"))}queueTask(e,t){this._tracer.enabled&&this._tracer.enter(this,"queueTask");const{delay:s,preempt:n,persistent:r,suspend:o}={...Nw,...t};if(n){if(s>0)throw jw();if(r)throw Fw()}this._processing.length===0&&this._requestFlush();const a=this._now(),l=new Dw(this._tracer,this,a,a+s,n,r,o,e);return n?this._processing[this._processing.length]=l:s===0?this._pending[this._pending.length]=l:this._delayed[this._delayed.length]=l,this._tracer.enabled&&this._tracer.leave(this,"queueTask"),l}remove(e){this._tracer.enabled&&this._tracer.enter(this,"remove");let t=this._processing.indexOf(e);if(t>-1){this._processing.splice(t,1),this._tracer.enabled&&this._tracer.leave(this,"remove processing");return}if(t=this._pending.indexOf(e),t>-1){this._pending.splice(t,1),this._tracer.enabled&&this._tracer.leave(this,"remove pending");return}if(t=this._delayed.indexOf(e),t>-1){this._delayed.splice(t,1),this._tracer.enabled&&this._tracer.leave(this,"remove delayed");return}throw this._tracer.enabled&&this._tracer.leave(this,"remove error"),Oi(`Task #${e.id} could not be found`)}_resetPersistentTask(e){this._tracer.enabled&&this._tracer.enter(this,"resetPersistentTask"),e.reset(this._now()),e.createdTime===e.queueTime?this._pending[this._pending.length]=e:this._delayed[this._delayed.length]=e,this._tracer.enabled&&this._tracer.leave(this,"resetPersistentTask")}_completeAsyncTask(e){var t;if(this._tracer.enabled&&this._tracer.enter(this,"completeAsyncTask"),e.suspend===!0){if(this._suspenderTask!==e)throw this._tracer.enabled&&this._tracer.leave(this,"completeAsyncTask error"),Oi(`Async task completion mismatch: suspenderTask=${(t=this._suspenderTask)==null?void 0:t.id}, task=${e.id}`);this._suspenderTask=void 0}else--this._pendingAsyncCount;if(this._yieldPromise!==void 0&&this._hasNoMoreFiniteWork){const s=this._yieldPromise;this._yieldPromise=void 0,s.resolve()}this.isEmpty&&this.cancel(),this._tracer.enabled&&this._tracer.leave(this,"completeAsyncTask")}}class Al extends Error{constructor(e){super("Task was canceled."),this.task=e}}let Vw=0;class Dw{get result(){const e=this._result;if(e===void 0)switch(this._status){case Dn:{const t=this._result=Fp();return this._resolve=t.resolve,this._reject=t.reject,t}case ho:throw Oi("Trying to await task from within task will cause a deadlock.");case Va:return this._result=Promise.resolve();case Jr:return this._result=Promise.reject(new Al(this))}return e}get status(){return this._status}constructor(e,t,s,n,r,o,a,l){this.taskQueue=t,this.createdTime=s,this.queueTime=n,this.preempt=r,this.persistent=o,this.suspend=a,this.callback=l,this.id=++Vw,this._resolve=void 0,this._reject=void 0,this._result=void 0,this._status=Dn,this._tracer=e}run(e=this.taskQueue.platform.performanceNow()){if(this._tracer.enabled&&this._tracer.enter(this,"run"),this._status!==Dn)throw this._tracer.enabled&&this._tracer.leave(this,"run error"),Oi(`Cannot run task in ${this._status} state`);const{persistent:t,taskQueue:s,callback:n,_resolve:r,_reject:o,createdTime:a}=this;let l;this._status=ho;try{l=n(e-a),l instanceof Promise?l.then(c=>{this.persistent?s._resetPersistentTask(this):(t?this._status=Jr:this._status=Va,this.dispose()),s._completeAsyncTask(this),this._tracer.enabled&&this._tracer.leave(this,"run async then"),r!==void 0&&r(c)}).catch(c=>{if(this.persistent||this.dispose(),s._completeAsyncTask(this),this._tracer.enabled&&this._tracer.leave(this,"run async catch"),o!==void 0)o(c);else throw c}):(this.persistent?s._resetPersistentTask(this):(t?this._status=Jr:this._status=Va,this.dispose()),this._tracer.enabled&&this._tracer.leave(this,"run sync success"),r!==void 0&&r(l))}catch(c){if(this.persistent||this.dispose(),this._tracer.enabled&&this._tracer.leave(this,"run sync error"),o!==void 0)o(c);else throw c}}cancel(){if(this._tracer.enabled&&this._tracer.enter(this,"cancel"),this._status===Dn){const e=this.taskQueue,t=this._reject;return e.remove(this),e.isEmpty&&e.cancel(),this._status=Jr,this.dispose(),t!==void 0&&t(new Al(this)),this._tracer.enabled&&this._tracer.leave(this,"cancel true =pending"),!0}else if(this._status===ho&&this.persistent)return this.persistent=!1,this._tracer.enabled&&this._tracer.leave(this,"cancel true =running+persistent"),!0;return this._tracer.enabled&&this._tracer.leave(this,"cancel false"),!1}reset(e){this._tracer.enabled&&this._tracer.enter(this,"reset");const t=this.queueTime-this.createdTime;this.createdTime=e,this.queueTime=e+t,this._status=Dn,this._resolve=void 0,this._reject=void 0,this._result=void 0,this._tracer.enabled&&this._tracer.leave(this,"reset")}dispose(){this._tracer.enabled&&this._tracer.trace(this,"dispose"),this.callback=void 0,this._resolve=void 0,this._reject=void 0,this._result=void 0}}class Bw{constructor(e){this.console=e,this.enabled=!1,this.depth=0}enter(e,t){this.log(`${"  ".repeat(this.depth++)}> `,e,t)}leave(e,t){this.log(`${"  ".repeat(--this.depth)}< `,e,t)}trace(e,t){this.log(`${"  ".repeat(this.depth)}- `,e,t)}log(e,t,s){if(t instanceof Cc){const n=t._processing.length,r=t._pending.length,o=t._delayed.length,a=t._flushRequested,l=!!t._suspenderTask,c=`processing=${n} pending=${r} delayed=${o} flushReq=${a} susTask=${l}`;this.console.log(`${e}[Q.${s}] ${c}`)}else{const n=t.id,r=Math.round(t.createdTime*10)/10,o=Math.round(t.queueTime*10)/10,a=t.preempt,l=t.persistent,c=t.suspend,u=t._status,h=`id=${n} created=${r} queue=${o} preempt=${a} persistent=${l} status=${u} suspend=${c}`;this.console.log(`${e}[T.${s}] ${h}`)}}}const Nw={delay:0,preempt:!1,persistent:!1,suspend:!1};let Mp,jp;const Mw=(i,e)=>{Mp=i,jp=e},Fp=()=>{const i=new Promise(Mw);return i.resolve=Mp,i.reject=jp,i},Ba=i=>i.persistent,jw=()=>Oi("AUR1006: Invalid arguments: preempt cannot be combined with a greater-than-zero delay"),Fw=()=>Oi("AUR1007: Invalid arguments: preempt cannot be combined with persistent"),Oi=i=>new Error(i);class Hs extends yc{static getOrCreate(e,t={}){let s=Hs._lookup.get(e);return s===void 0&&Hs._lookup.set(e,s=new Hs(e,t)),s}static set(e,t){Hs._lookup.set(e,t)}get domWriteQueue(){return this.console.log("[DEV:aurelia] platform.domQueue is deprecated, please use platform.domQueue instead."),this.domQueue}get domReadQueue(){return this.console.log("[DEV:aurelia] platform.domReadQueue has been removed, please use platform.domQueue instead."),this.domQueue}constructor(e,t={}){super(e,t);const s=n=>()=>{throw new Error(`The PLATFORM did not receive a valid reference to the global function '${n}'.`)};"Node Element HTMLElement CustomEvent CSSStyleSheet ShadowRoot MutationObserver window document customElements".split(" ").forEach(n=>this[n]=n in t?t[n]:e[n]),"fetch requestAnimationFrame cancelAnimationFrame".split(" ").forEach(n=>{var r;return this[n]=n in t?t[n]:((r=e[n])==null?void 0:r.bind(e))??s(n)}),this.domQueue=(()=>{let n=!1,r=-1;const o=()=>{n=!0,r===-1&&(r=this.requestAnimationFrame(l))},a=()=>{n=!1,r>-1&&(this.cancelAnimationFrame(r),r=-1)},l=()=>{r=-1,n===!0&&(n=!1,c.flush())},c=new Cc(this,o,a);return c})()}}Hs._lookup=new WeakMap;const Lr=Object,Gs=String,zp=Lr.prototype,Ci=zp.hasOwnProperty,hs=Lr.freeze,Hp=Lr.assign,Up=Lr.getOwnPropertyNames,kc=Lr.keys,iu=ae(),$l=(i,e,t)=>{if(iu[e]===!0)return!0;if(!ee(e))return!1;const s=e.slice(0,5);return iu[e]=s==="aria-"||s==="data-"||t.isStandardSvgAttribute(i,e)},$o=i=>{throw i},So=Reflect.defineProperty,Mt=(i,e,t)=>(So(i,e,{enumerable:!1,configurable:!0,writable:!0,value:t}),t),Wp=(i,e,t)=>i.addSignalListener(e,t),qp=(i,e,t)=>i.removeSignalListener(e,t),zw="Interpolation",Hw="IsIterator",Uw="IsFunction",is="IsProperty",nu="pending",Na="running",Ac=oc.Observer,ei=oc.Node,us=oc.Layout,E=(i,...e)=>new Error(`AUR${Gs(i).padStart(4,"0")}: ${qw(i,...e)}`),Ww={99:"Method {{0}} not implemented",101:'Ast eval error: binding behavior "{{0}}" could not be found. Did you forget to register it as a dependency?',102:'Ast eval error: binding behavior "{{0}}" already applied.',103:'Ast eval error: value converter "{{0}}" could not be found. Did you forget to register it as a dependency?',105:"Ast eval error: unable to find $host context. Did you forget [au-slot] attribute?",106:'Ast eval error: invalid assignment. "$host" is a reserved keyword.',107:"Ast eval error: expression is not a function.",109:'Ast eval error: unknown unary operator: "{{0}}"',108:'Ast eval error: unknown binary operator: "{{0}}"',110:"Ast eval error: left-hand side of tagged template expression is not a function.",111:'Ast eval error: expected "{{0}}" to be a function',112:"Ast eval error: cannot use non-object value for destructuring assignment.",113:"Ast eval error: infinite loop detected. Increment operators should only be used in event handlers.",151:"No binding behavior definition found for type {{0:name}}",152:"No value converter definition found for type {{0:name}}",153:'Element "{{0}}" has already been registered.',154:'Attribute "{{0}}" has already been registered.',155:"Value converter {{0}} has already been registered.",156:"Binding behavior {{0}} has already been registered.",157:"Binding command {{0}} has already been registered.",203:"Trying to retrieve a property or build a scope from a null/undefined scope",204:"Trying to create a scope with null/undefined binding context",227:"@bindable is not supported for properties that uses a symbol for name. Use a string for the property name instead.",228:"@bindable cannot be used as a class decorator when no configuration object is supplied.",229:"@bindable cannot be used as a class decorator when no property name is supplied in the configuration object.",500:"There is no cached controller for the provided ViewModel: {{0}}",501:"Invalid combination: cannot combine the containerless custom element option with Shadow DOM.",502:"Trying to activate a disposed controller: {{0}}.",503:"Controller at {{0}} is in an unexpected state: {{1}} during activation.",504:"Synthetic view at {{0}} is being activated with null/undefined scope.",505:"Controller at {{0}} is in an unexpected state: {{1}} during deactivation.",506:"Invalid callback for @watch decorator: {{0}}",507:"Observer for bindable property {{0}} does not support coercion.",508:"Observer for property {{0}} does not support change handler.",759:"No attribute definition found for type {{0:name}}",760:"No element definition found for type {{0:name}}",761:"Cannot create a custom element definition with only a name and no type: {{0}}",762:"Trying to retrieve a custom element controller from a node, but the provided node <{{0:nodeName}} /> is not a custom element or containerless host.",763:"Trying to retrieve a custom element controller from a node, but the provided node <{{0:nodeName}} /> is not a custom element or containerless host.",764:"Trying to retrieve a custom element controller from a node. But the provided node <{{0:nodeName}} /> does not appear to be part of an Aurelia app DOM tree, or it was added to the DOM in a way that Aurelia cannot properly resolve its position in the component tree.",765:"Trying to retrieve a custom element controller from a node. But the provided node <{{0:nodeName}} /> does not appear to be part of an Aurelia app DOM tree, or it was added to the DOM in a way that Aurelia cannot properly resolve its position in the component tree.",766:"Invalid @processContent hook. Expected the hook to be a function (when defined in a class, it needs to be a static function) but got a {{0:typeof}}.",652:"Aurelia is unable to observe property {{0}}. Register observation mapping with .useConfig().",653:"Mapping for property {{0}} of <{{1}} /> already exists",654:"Array values can only be bound to a multi-select.",714:'Template compilation error: primary already exists on element/attribute "{{0}}"',719:"Attribute {{0}} has been already registered for {{1:element}}",767:"Aurelia.root was accessed without a valid root.",768:"An instance of Aurelia is already registered with the container or an ancestor of it.",769:"Failed to initialize the platform object. The host element's ownerDocument does not have a defaultView, did you create the host from a DOMParser and forget to call adoptNode()?",770:"Aurelia.start() was called without a composition root",771:"The aurelia instance must be fully stopped before it can be disposed",750:"view.ref is not supported. If you are migrating from v1, this can be understood as the controller.",751:`Attempted to reference "{{0}}", but it was not found amongst the target's API.`,752:"Element {{0:.res}} is not registered in {{1:name}}.",753:"Attribute {{0:.res}} is not registered in {{1:name}}.",754:"Attribute {{0:.res}} is not registered in {{1:name}}.",755:"Cannot resolve ViewFactory before the provider was prepared.",756:"Cannot resolve ViewFactory without a (valid) name.",757:"AUR0757: The compiled template is not aligned with the render instructions. There are {{0}} targets and {{1}} instructions.",772:"Invalid @watch decorator config. Expected an expression or a fn but received null/undefined.",773:'Invalid @watch decorator change handler config.Method "{{0}}" not found in class {{1}}',774:"Invalid @watch decorator usage: decorated target {{0}} is not a class method.",775:'Invalid command "{{0}}" usage with [repeat]',776:'Invalid [repeat] usage, found extraneous target "{{0}}"',777:"Unsupported: [repeat] cannot iterate over {{0:toString}}",778:"Unsupported: [repeat] cannot count {{0:toString}}",814:"[repeat] encountered an error: number of views != number of items {{0:join(!=)}}",779:"Invalid portal insertion position: {{0}}",801:'"& self" binding behavior only supports listener binding via trigger/capture command.',802:`"& updateTrigger" invalid usage. This binding behavior requires at least one event name argument: eg <input value.bind="firstName & updateTrigger:'blur'">`,803:'"& updateTrigger" invalid usage. This binding behavior can only be applied to two-way/ from-view bindings.',805:'Invalid scope behavior "{{0}}" on <au-compose />. Only "scoped" or "auto" allowed.',806:`<au-compose /> couldn't find a custom element with name "{{0}}", did you forget to register it locally or globally?`,807:"Composition has already been activated/deactivated. Id: {{0:controller}}",808:"Composition has already been deactivated.",810:"Invalid [else] usage, it should follow an [if]",811:"Invalid portal strict target query, empty query.",812:"Invalid portal strict target resolution, target not found.",813:'Invalid [pending]/[then]/[catch] usage. The parent [promise].resolve not found; only "*[promise.resolve] > *[pending|then|catch]" relation is supported.',815:'Invalid [case/default-case] usage. The parent [switch] not found; only "*[switch] > *[case|default-case]" relation is supported.',816:"Invalid [default-case] usage. Multiple 'default-case's are not allowed.",817:'"& signal" binding behavior can only be used with bindings that have a "handleChange" method',818:`"& signal" invalid usage. At least one signal name must be passed to the signal behavior, e.g. "expr & signal:'my-signal'"`,819:"Spreading to bindables onto non custom element",820:"Invalid spread target {{0}}",9999:"No scope context for spread binding.",9998:"Spread binding does not support spreading custom attributes/template controllers. Did you build the spread instruction manually?",9997:"Marker is malformed. This likely happens when a compiled template has been modified. Did you accidentally modified some compiled template? You can modify template before compilation with compiling Template compiler hook.",9996:"Invalid usage, a rate limit has already been applied. Did you have both throttle and debounce on the same binding?",9995:"The binding already has a target subscriber.",9994:`"& attr" can be only used on property binding. It's used on {{0:ctor}}`,9993:'"& updateTrigger" binding behavior only works with the default implementation of Aurelia HTML observation. Implement your own node observation + updateTrigger',9992:'"& updateTrigger" uses node observer to observe, but it does not know how to use events to observe property <{{0:target@property}} />',9991:"Invalid @children usage. @children decorator can only be used on a field",9990:"Invalid @slotted usage. @slotted decorator can only be used on a field",9989:"Invalid query selector. Only selectors with alpha-numeric characters, or $all are allowed. Got {{0}} instead."},qw=(i,...e)=>{var s;let t=Ww[i];for(let n=0;n<e.length;++n){const r=new RegExp(`{{${n}(:.*)?}}`,"g");let o=r.exec(t);for(;o!=null;){const a=(s=o[1])==null?void 0:s.slice(1);let l=e[n];if(l!=null)switch(a){case"nodeName":l=l.nodeName.toLowerCase();break;case"name":l=l.name;break;case"typeof":l=typeof l;break;case"ctor":l=l.constructor.name;break;case"controller":l=l.controller.name;break;case"target@property":l=`${l.target}@${l.targetProperty}`;break;case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"bindingCommandHelp":l=Kw(l);break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=Gs(l[a.slice(1)]):l=Gs(l)}t=t.slice(0,o.index)+l+t.slice(r.lastIndex),o=r.exec(t)}}return t};function Kw(i){switch(i){case"delegate":return`
The ".delegate" binding command has been removed in v2. Binding command ".trigger" should be used instead. If you are migrating v1 application, install compat package to add back the ".delegate" binding command for ease of migration.`;case"call":return`
The ".call" binding command has been removed in v2. If you want to pass a callback that preserves the context of the function call, you can use lambda instead. Refer to lambda expression doc for more details.`;default:return""}}class De{constructor(e,t,s,n){this.parent=e,this.bindingContext=t,this.overrideContext=s,this.isBoundary=n}static getContext(e,t,s){if(e==null)throw E(203);let n=e.overrideContext,r=e;if(s>0){for(;s>0;)if(s--,r=r.parent,r==null)return;return n=r.overrideContext,t in n?n:r.bindingContext}for(;r!=null&&!r.isBoundary&&!(t in r.overrideContext)&&!(t in r.bindingContext);)r=r.parent;return r==null?e.bindingContext:(n=r.overrideContext,t in n?n:r.bindingContext)}static create(e,t,s){if(e==null)throw E(204);return new De(null,e,t??new ou,s??!1)}static fromParent(e,t){if(e==null)throw E(203);return new De(e,t,new ou,!1)}}class ru{constructor(e,t){e!==void 0&&(this[e]=t)}}class ou{}const{astAssign:mn,astEvaluate:ye,astBind:ti,astUnbind:si}=(()=>{const i="AccessThis",e="AccessBoundary",t="AccessGlobal",s="AccessScope",n="ArrayLiteral",r="ObjectLiteral",o="PrimitiveLiteral",a="Template",l="Unary",c="CallScope",u="CallMember",h="CallFunction",d="CallGlobal",p="AccessMember",f="AccessKeyed",_="TaggedTemplate",g="Binary",v="Conditional",m="Assign",A="ArrowFunction",w="ValueConverter",k="BindingBehavior",O="ArrayBindingPattern",R="ObjectBindingPattern",N="BindingIdentifier",V="ForOfStatement",M="Interpolation",K="ArrayDestructuring",xe="ObjectDestructuring",me="DestructuringAssignmentLeaf",ve="Custom",Pe=De.getContext;function T(y,x,b,$){var ct;switch(y.$kind){case i:{let C=x.overrideContext,I=x,W=y.ancestor;for(;W--&&C;)I=I.parent,C=(I==null?void 0:I.overrideContext)??null;return W<1&&I?I.bindingContext:void 0}case e:{let C=x;for(;C!=null&&!C.isBoundary;)C=C.parent;return C?C.bindingContext:void 0}case s:{const C=Pe(x,y.name,y.ancestor);$!==null&&$.observe(C,y.name);const I=C[y.name];if(I==null&&y.name==="$host")throw E(105);return b!=null&&b.strict?b!=null&&b.boundFn&&Y(I)?I.bind(C):I:I==null?"":b!=null&&b.boundFn&&Y(I)?I.bind(C):I}case t:return globalThis[y.name];case d:{const C=globalThis[y.name];if(Y(C))return C(...y.args.map(I=>T(I,x,b,$)));if(!(b!=null&&b.strictFnCall)&&C==null)return;throw E(107)}case n:return y.elements.map(C=>T(C,x,b,$));case r:{const C={};for(let I=0;I<y.keys.length;++I)C[y.keys[I]]=T(y.values[I],x,b,$);return C}case o:return y.value;case a:{let C=y.cooked[0];for(let I=0;I<y.expressions.length;++I)C+=String(T(y.expressions[I],x,b,$)),C+=y.cooked[I+1];return C}case l:{const C=T(y.expression,x,b,$);switch(y.operation){case"void":return;case"typeof":return typeof C;case"!":return!C;case"-":return-C;case"+":return+C;case"--":if($!=null)throw E(113);return le(y.expression,x,b,C-1)+y.pos;case"++":if($!=null)throw E(113);return le(y.expression,x,b,C+1)-y.pos;default:throw E(109,y.operation)}}case c:{const C=y.args.map(H=>T(H,x,b,$)),I=Pe(x,y.name,y.ancestor),W=ce(b==null?void 0:b.strictFnCall,I,y.name);return W?W.apply(I,C):void 0}case u:{const C=T(y.object,x,b,$),I=y.args.map(pe=>T(pe,x,b,$)),W=ce(b==null?void 0:b.strictFnCall,C,y.name);let H;return W&&(H=W.apply(C,I),Ie(C)&&Et.includes(y.name)&&($==null||$.observeCollection(C))),H}case h:{const C=T(y.func,x,b,$);if(Y(C))return C(...y.args.map(I=>T(I,x,b,$)));if(!(b!=null&&b.strictFnCall)&&C==null)return;throw E(107)}case A:return(...I)=>{const W=y.args,H=y.rest,pe=W.length-1,Oe=W.reduce((q,Rt,tt)=>(H&&tt===pe?q[Rt.name]=I.slice(tt):q[Rt.name]=I[tt],q),{}),Wt=De.fromParent(x,Oe);return T(y.body,Wt,b,$)};case p:{const C=T(y.object,x,b,$);let I;return b!=null&&b.strict?C==null?void 0:($!==null&&!y.accessGlobal&&$.observe(C,y.name),I=C[y.name],b!=null&&b.boundFn&&Y(I)?I.bind(C):I):($!==null&&Zi(C)&&!y.accessGlobal&&$.observe(C,y.name),C?(I=C[y.name],b!=null&&b.boundFn&&Y(I)?I.bind(C):I):"")}case f:{const C=T(y.object,x,b,$),I=T(y.key,x,b,$);return Zi(C)?($!==null&&!y.accessGlobal&&$.observe(C,I),C[I]):C==null?void 0:C[I]}case _:{const C=y.expressions.map(W=>T(W,x,b,$)),I=T(y.func,x,b,$);if(!Y(I))throw E(110);return I(y.cooked,...C)}case g:{const C=y.left,I=y.right;switch(y.operation){case"&&":return T(C,x,b,$)&&T(I,x,b,$);case"||":return T(C,x,b,$)||T(I,x,b,$);case"??":return T(C,x,b,$)??T(I,x,b,$);case"==":return T(C,x,b,$)==T(I,x,b,$);case"===":return T(C,x,b,$)===T(I,x,b,$);case"!=":return T(C,x,b,$)!=T(I,x,b,$);case"!==":return T(C,x,b,$)!==T(I,x,b,$);case"instanceof":{const W=T(I,x,b,$);return Y(W)?T(C,x,b,$)instanceof W:!1}case"in":{const W=T(I,x,b,$);return Zi(W)?T(C,x,b,$)in W:!1}case"+":{const W=T(C,x,b,$),H=T(I,x,b,$);if(b!=null&&b.strict)return W+H;if(!W||!H){if(et(W)||et(H))return(W||0)+(H||0);if(Ue(W)||Ue(H))return(W||"")+(H||"")}return W+H}case"-":return T(C,x,b,$)-T(I,x,b,$);case"*":return T(C,x,b,$)*T(I,x,b,$);case"/":return T(C,x,b,$)/T(I,x,b,$);case"%":return T(C,x,b,$)%T(I,x,b,$);case"<":return T(C,x,b,$)<T(I,x,b,$);case">":return T(C,x,b,$)>T(I,x,b,$);case"<=":return T(C,x,b,$)<=T(I,x,b,$);case">=":return T(C,x,b,$)>=T(I,x,b,$);default:throw E(108,y.operation)}}case v:return T(y.condition,x,b,$)?T(y.yes,x,b,$):T(y.no,x,b,$);case m:{let C=T(y.value,x,b,$);if(y.op!=="="){if($!=null)throw E(113);const I=T(y.target,x,b,$);switch(y.op){case"/=":C=I/C;break;case"*=":C=I*C;break;case"+=":C=I+C;break;case"-=":C=I-C;break;default:throw E(108,y.op)}}return le(y.target,x,b,C)}case w:{const C=(ct=b==null?void 0:b.getConverter)==null?void 0:ct.call(b,y.name);if(C==null)throw E(103,y.name);return"toView"in C?C.toView(T(y.expression,x,b,$),...y.args.map(I=>T(I,x,b,$))):T(y.expression,x,b,$)}case k:return T(y.expression,x,b,$);case N:return y.name;case V:return T(y.iterable,x,b,$);case M:if(y.isMulti){let C=y.parts[0],I=0;for(;I<y.expressions.length;++I)C+=Gs(T(y.expressions[I],x,b,$)),C+=y.parts[I+1];return C}else return`${y.parts[0]}${T(y.firstExpression,x,b,$)}${y.parts[1]}`;case me:return T(y.target,x,b,$);case K:return y.list.map(C=>T(C,x,b,$));case O:case R:case xe:default:return;case ve:return y.evaluate(x,b,$)}}function le(y,x,b,$){var ct;switch(y.$kind){case s:{if(y.name==="$host")throw E(106);const C=Pe(x,y.name,y.ancestor);return C[y.name]=$}case p:{const C=T(y.object,x,b,null);return Zi(C)?y.name==="length"&&Ie(C)&&!isNaN($)?C.splice($):C[y.name]=$:le(y.object,x,b,{[y.name]:$}),$}case f:{const C=T(y.object,x,b,null),I=T(y.key,x,b,null);if(Ie(C)){if(I==="length"&&!isNaN($))return C.splice($),$;if(fn(I))return C.splice(I,1,$),$}return C[I]=$}case m:return le(y.value,x,b,$),le(y.target,x,b,$);case w:{const C=(ct=b==null?void 0:b.getConverter)==null?void 0:ct.call(b,y.name);if(C==null)throw E(103,y.name);return"fromView"in C&&($=C.fromView($,...y.args.map(I=>T(I,x,b,null)))),le(y.expression,x,b,$)}case k:return le(y.expression,x,b,$);case K:case xe:{const C=y.list,I=C.length;let W,H;for(W=0;W<I;W++)switch(H=C[W],H.$kind){case me:le(H,x,b,$);break;case K:case xe:{if(typeof $!="object"||$===null)throw E(112);let pe=T(H.source,De.create($),b,null);pe===void 0&&H.initializer&&(pe=T(H.initializer,x,b,null)),le(H,x,b,pe);break}}break}case me:{if(y instanceof Ld){if($==null)return;if(typeof $!="object")throw E(112);let C=T(y.source,De.create($),b,null);C===void 0&&y.initializer&&(C=T(y.initializer,x,b,null)),le(y.target,x,b,C)}else{if($==null)return;if(typeof $!="object")throw E(112);const C=y.indexOrProperties;let I;if(fn(C)){if(!Array.isArray($))throw E(112);I=$.slice(C)}else I=Object.entries($).reduce((W,[H,pe])=>(C.includes(H)||(W[H]=pe),W),{});le(y.target,x,b,I)}break}case ve:return y.assign(x,b,$);default:return}}function Fe(y,x,b){var $,ct,C,I,W;switch(y.$kind){case k:{const H=y.name,pe=y.key,Oe=($=b.getBehavior)==null?void 0:$.call(b,H);if(Oe==null)throw E(101,H);if(b[pe]===void 0)b[pe]=Oe,(ct=Oe.bind)==null||ct.call(Oe,x,b,...y.args.map(Wt=>T(Wt,x,b,null)));else throw E(102,H);Fe(y.expression,x,b);return}case w:{const H=y.name,pe=(C=b.getConverter)==null?void 0:C.call(b,H);if(pe==null)throw E(103,H);const Oe=pe.signals;if(Oe!=null){const Wt=(I=b.getSignaler)==null?void 0:I.call(b),q=Oe.length;let Rt=0;for(;Rt<q;++Rt)Wt==null||Wt.addSignalListener(Oe[Rt],b)}Fe(y.expression,x,b);return}case V:{Fe(y.iterable,x,b);break}case ve:(W=y.bind)==null||W.call(y,x,b)}}function j(y,x,b){var $,ct,C,I,W;switch(y.$kind){case k:{const H=y.key,pe=b;pe[H]!==void 0&&((ct=($=pe[H]).unbind)==null||ct.call($,x,b),pe[H]=void 0),j(y.expression,x,b);break}case w:{const H=(C=b.getConverter)==null?void 0:C.call(b,y.name);if((H==null?void 0:H.signals)===void 0)return;const pe=(I=b.getSignaler)==null?void 0:I.call(b);let Oe=0;for(;Oe<H.signals.length;++Oe)pe==null||pe.removeSignalListener(H.signals[Oe],b);j(y.expression,x,b);break}case V:{j(y.iterable,x,b);break}case ve:(W=y.unbind)==null||W.call(y,x,b)}}const ce=(y,x,b)=>{const $=x==null?null:x[b];if(Y($))return $;if(!y&&$==null)return null;throw E(111,b)},et=y=>{switch(typeof y){case"number":case"bigint":return!0;default:return!1}},Ue=y=>{switch(typeof y){case"string":return!0;case"object":return y instanceof Date;default:return!1}},Et="at map filter includes indexOf lastIndexOf findIndex find flat flatMap join reduce reduceRight slice every some sort".split(" ");return{astEvaluate:T,astAssign:le,astBind:Fe,astUnbind:j}})();const{default:$c,oneTime:sa,toView:Se,fromView:Is,twoWay:Kp}=Ni,Xe=xt.get,ia=xt.has,Ut=xt.define,{annotation:Gw}=vd,Es=Gw.keyFor;function it(i,e){let t;function s(n,r){var c;let o;switch(r.kind){case"getter":case"field":{const u=r.name;if(typeof u!="string")throw E(227);o=u;break}case"class":if(t==null)throw E(228);if(typeof t=="string")o=t;else{const u=t.name;if(!u)throw E(229);if(typeof u!="string")throw E(227);o=u}break}const a=t==null||typeof t=="string"?{name:o}:t,l=(c=r.metadata)[Fs]??(c[Fs]=ae());l[o]=ys.create(o,a)}if(arguments.length>1){t={},s(i,e);return}else if(ee(i))return t=i,s;return t={},s}const Fs=Es("bindables"),ft=hs({name:Fs,keyFrom:i=>`${Fs}:${i}`,from(...i){const e={},t=Array.isArray;function s(o){e[o]=ys.create(o)}function n(o,a){e[o]=a instanceof ys?a:ys.create(o,a===!0?{}:a)}function r(o){t(o)?o.forEach(a=>ee(a)?s(a):n(a.name,a)):o instanceof ys?e[o.name]=o:o!==void 0&&kc(o).forEach(a=>n(a,o[a]))}return i.forEach(r),e},getAll(i){const e=[],t=Q_(i);let s=t.length,n;for(;--s>=0;){n=t[s];const r=Xe(Fs,n);r!=null&&e.push(...Object.values(r))}return e},_add(i,e){let t=Xe(Fs,e);t==null&&Ut(t=ae(),e,Fs),t[i.name]=i}});class ys{constructor(e,t,s,n,r,o){this.attribute=e,this.callback=t,this.mode=s,this.primary=n,this.name=r,this.set=o}static create(e,t={}){const s=t.mode??Se;return new ys(t.attribute??gd(e),t.callback??`${e}Changed`,ee(s)?Ni[s]??$c:s,t.primary??!1,t.name??e,t.set??Qw(t))}}const Sl={key:Es("coercer"),define(i,e){Ut(i[e].bind(i),i,Sl.key)},for(i){return Xe(Sl.key,i)}};function Qw(i={}){const e=i.type??null;if(e==null)return jt;let t;switch(e){case Number:case Boolean:case String:case BigInt:t=e;break;default:{const s=e.coerce;t=typeof s=="function"?s.bind(e):Sl.for(e)??jt;break}}return t===jt?t:Jw(t,i.nullable)}function Jw(i,e){return function(t,s){return s!=null&&s.enableCoercion?(e??!((s==null?void 0:s.coerceNullish)??!1))&&t==null?t:i(t,s):t}}const re=ut.createInterface,ds=bt.singleton,Qs=bt.aliasTo,Sc=bt.instance,_e=(i,e,t)=>i.registerResolver(e,t),Yw="custom-element",Xw="custom-attribute",Js=(i,e,t,s="__au_static_resource__")=>{var r;let n=Xe(s,i);return n==null&&((r=i.$au)==null?void 0:r.type)===e&&(n=t(i.$au,i),Ut(n,i,s)),n};class rr{constructor(e,t,s,n){this.Type=e,this.name=t,this.aliases=s,this.key=n}static create(e,t){let s,n;return ee(e)?(s=e,n={name:s}):(s=e.name,n=e),new rr(t,js(au(t,"name"),s),Ee(au(t,"aliases"),n.aliases,t.aliases),Gp.keyFrom(s))}register(e,t){const s=this.Type,n=typeof t=="string"?or(t):this.key,r=this.aliases;e.has(n,!1)?console.warn(`[DEV:aurelia] ${E(156,this.name)}`):e.register(e.has(s,!1)?null:ds(s,s),Qs(s,n),...r.map(o=>Qs(s,or(o))))}}const St="binding-behavior",Ji=Xs(St),au=(i,e)=>Xe(Es(e),i),or=i=>`${Ji}:${i}`,Gp=hs({name:Ji,keyFrom:or,isType(i){var e;return Y(i)&&(ia(Ji,i)||((e=i.$au)==null?void 0:e.type)===St)},define(i,e){const t=rr.create(i,e),s=t.Type;return Ut(t,s,Ji,Nt),s},getDefinition(i){const e=Xe(Ji,i)??Js(i,St,rr.create);if(e===void 0)throw E(151,i);return e},find(i,e){const t=i.find(St,e);return t==null?null:Xe(Ji,t)??Js(t,St,rr.create)??null},get(i,e){try{return i.get(gn(or(e)))}catch(t){throw console.error("[DEV:aurelia] Cannot retrieve binding behavior with name",e),t}return i.get(gn(or(e)))}}),Ma=new Map,na=i=>({type:St,name:i});class ra{bind(e,t){Ma.set(t,t.mode),t.mode=this.mode}unbind(e,t){t.mode=Ma.get(t),Ma.delete(t)}}class Qp extends ra{get mode(){return sa}}Qp.$au=na("oneTime");class Jp extends ra{get mode(){return Se}}Jp.$au=na("toView");class Yp extends ra{get mode(){return Is}}Yp.$au=na("fromView");class Xp extends ra{get mode(){return Kp}}Xp.$au=na("twoWay");const ja=new WeakMap,Zw=200;class Zp{constructor(){this._platform=S($n)}bind(e,t,s,n){var a;const r={type:"debounce",delay:s??Zw,now:this._platform.performanceNow,queue:this._platform.taskQueue,signals:ee(n)?[n]:n??U},o=(a=t.limit)==null?void 0:a.call(t,r);o==null?console.warn(`Binding ${t.constructor.name} does not support debounce rate limiting`):ja.set(t,o)}unbind(e,t){var s;(s=ja.get(t))==null||s.dispose(),ja.delete(t)}}Zp.$au={type:St,name:"debounce"};const xc=re("ISignaler",i=>i.singleton(ey));class ey{constructor(){this.signals=ae()}dispatchSignal(e){const t=this.signals[e];if(t===void 0)return;let s;for(s of t.keys())s.handleChange(void 0,void 0)}addSignalListener(e,t){var s;((s=this.signals)[e]??(s[e]=new Set)).add(t)}removeSignalListener(e,t){var s;(s=this.signals[e])==null||s.delete(t)}}class ef{constructor(){this._lookup=new Map,this._signaler=S(xc)}bind(e,t,...s){if(!("handleChange"in t))throw E(817);if(s.length===0)throw E(818);this._lookup.set(t,s);let n;for(n of s)Wp(this._signaler,n,t)}unbind(e,t){const s=this._lookup.get(t);this._lookup.delete(t);let n;for(n of s)qp(this._signaler,n,t)}}ef.$au={type:St,name:"signal"};const Fa=new WeakMap,ty=200;class tf{constructor(){({performanceNow:this._now,taskQueue:this._taskQueue}=S($n))}bind(e,t,s,n){var a;const r={type:"throttle",delay:s??ty,now:this._now,queue:this._taskQueue,signals:ee(n)?[n]:n??U},o=(a=t.limit)==null?void 0:a.call(t,r);o==null?console.warn(`Binding ${t.constructor.name} does not support debounce rate limiting`):Fa.set(t,o)}unbind(e,t){var s;(s=Fa.get(t))==null||s.dispose(),Fa.delete(t)}}tf.$au={type:St,name:"throttle"};const xl=re("IAppTask");class lu{constructor(e,t,s){this.c=void 0,this.slot=e,this.k=t,this.cb=s}register(e){return this.c=e.register(Sc(xl,this))}run(){const e=this.k,t=this.cb;return e===null?t():t(this.c.get(e))}}const Yr=hs({creating:li("creating"),hydrating:li("hydrating"),hydrated:li("hydrated"),activating:li("activating"),activated:li("activated"),deactivating:li("deactivating"),deactivated:li("deactivated")});function li(i){function e(t,s){return Y(s)?new lu(i,t,s):new lu(i,null,t)}return e}const Ne=$n,Tl=(()=>{const i=new WeakMap;return hs({add(e,t){let s=i.get(e);s==null&&i.set(e,s=[]),s.push(t)},getDefinitions(e){return i.get(e)??U}})})();function sy(i){return function(e,t){return t.addInitializer(function(){oa(i,this)}),e}}class Li{get type(){return Xw}constructor(e,t,s,n,r,o,a,l,c,u,h){this.Type=e,this.name=t,this.aliases=s,this.key=n,this.defaultBindingMode=r,this.isTemplateController=o,this.bindables=a,this.noMultiBindings=l,this.watches=c,this.dependencies=u,this.containerStrategy=h}static create(e,t){let s,n;ee(e)?(s=e,n={name:s}):(s=e.name,n=e);const r=js(_s(t,"defaultBindingMode"),n.defaultBindingMode,t.defaultBindingMode,Se);for(const o of Object.values(ft.from(n.bindables)))ft._add(o,t);return new Li(t,js(_s(t,"name"),s),Ee(_s(t,"aliases"),n.aliases,t.aliases),un(s),ee(r)?Ni[r]??$c:r,js(_s(t,"isTemplateController"),n.isTemplateController,t.isTemplateController,!1),ft.from(...ft.getAll(t),_s(t,"bindables"),t.bindables,n.bindables),js(_s(t,"noMultiBindings"),n.noMultiBindings,t.noMultiBindings,!1),Ee(Tl.getDefinitions(t),t.watches),Ee(_s(t,"dependencies"),n.dependencies,t.dependencies),js(_s(t,"containerStrategy"),n.containerStrategy,t.containerStrategy,"reuse"))}register(e,t){const s=this.Type,n=typeof t=="string"?un(t):this.key,r=this.aliases;e.has(n,!1)?(Li.warnDuplicate&&e.get(Be).warn(E(154,this.name)),console.warn(`[DEV:aurelia] ${E(154,this.name)}`)):e.register(e.has(s,!1)?null:ds(s,s),Qs(s,n),...r.map(o=>Qs(s,un(o))))}toString(){return`au:ca:${this.name}`}}Li.warnDuplicate=!0;const Ze="custom-attribute",vn=Xs(Ze),un=i=>`${vn}:${i}`,_s=(i,e)=>Xe(Es(e),i),iy=i=>{var e;return Y(i)&&(ia(vn,i)||((e=i.$au)==null?void 0:e.type)===Ze)},sf=(i,e)=>ki(i,un(e))??void 0,oa=(i,e)=>{const t=Li.create(i,e),s=t.Type;return Ut(t,s,vn,Nt),s},Tc=i=>{const e=Xe(vn,i)??Js(i,Ze,Li.create);if(e===void 0)throw E(759,i);return e},ny=(i,e)=>{let t="",s="";if(ee(e))t=un(e),s=e;else{const r=Tc(e);t=r.key,s=r.name}let n=i;for(;n!==null;){const r=ki(n,t);if(r!=null&&r.is(s))return r;n=Io(n)}return null},Vr=hs({name:vn,keyFrom:un,isType:iy,for:sf,closest:ny,define:oa,getDefinition:Tc,annotate(i,e,t){Ut(t,i,Es(e))},getAnnotation:_s,find(i,e){const t=i.find(Ze,e);return t===null?null:Xe(vn,t)??Js(t,Ze,Li.create)??null}}),qi=re("ILifecycleHooks");class ry{constructor(e,t){this.definition=e,this.instance=t}}class Ic{constructor(e,t){this.Type=e,this.propertyNames=t}static create(e,t){const s=new Set;let n=t.prototype;for(;n!==zp;){for(const r of Up(n))r!=="constructor"&&!r.startsWith("_")&&s.add(r);n=Object.getPrototypeOf(n)}return new Ic(t,s)}}const cu=(()=>{const i=new WeakMap,e=new WeakMap;return hs({define(t,s){const n=Ic.create(t,s),r=n.Type;return e.set(r,n),{register(o){ds(qi,r).register(o)}}},resolve(t){let s=i.get(t);if(s===void 0){i.set(t,s=new oy);const n=t.root,r=n===t?t.getAll(qi):t.has(qi,!1)?n.getAll(qi).concat(t.getAll(qi)):n.getAll(qi);let o,a,l,c,u;for(o of r){a=e.get(o.constructor),l=new ry(a,o);for(c of a.propertyNames)u=s[c],u===void 0?s[c]=[l]:u.push(l)}}return s}})})();class oy{}class ar{constructor(e,t,s,n){this.Type=e,this.name=t,this.aliases=s,this.key=n}static create(e,t){let s,n;return ee(e)?(s=e,n={name:s}):(s=e.name,n=e),new ar(t,js(Il(t,"name"),s),Ee(Il(t,"aliases"),n.aliases,t.aliases),nf.keyFrom(s))}register(e,t){const s=this.Type,n=typeof t=="string"?lr(t):this.key,r=this.aliases;e.has(n,!1)?console.warn(`[DEV:aurelia] ${E(155,this.name)}`):e.register(e.has(s,!1)?null:ds(s,s),Qs(s,n),...r.map(o=>Qs(s,lr(o))))}}const sn="value-converter",Yi=Xs(sn),Il=(i,e)=>Xe(Es(e),i),lr=i=>`${Yi}:${i}`,nf=hs({name:Yi,keyFrom:lr,isType(i){var e;return Y(i)&&(ia(Yi,i)||((e=i.$au)==null?void 0:e.type)===sn)},define(i,e){const t=ar.create(i,e),s=t.Type;return Ut(t,s,Yi,Nt),s},getDefinition(i){const e=Xe(Yi,i)??Js(i,sn,ar.create);if(e===void 0)throw E(152,i);return e},annotate(i,e,t){Ut(t,i,Es(e))},getAnnotation:Il,find(i,e){const t=i.find(sn,e);return t==null?null:Xe(Yi,t)??Js(t,sn,ar.create)??null},get(i,e){try{return i.get(gn(lr(e)))}catch(t){throw console.error("[DEV:aurelia] Cannot retrieve value converter with name",e),t}return i.get(gn(lr(e)))}});class ay{constructor(e,t){this._value=void 0,this.b=e,this._flushQueue=t}flush(){this.b.updateSource(this._value)}handleChange(e,t){const s=this.b;e!==ye(s.ast,s._scope,s,null)&&(this._value=e,this._flushQueue.add(this))}}const Mi=(()=>{function i(e){this._scope=e}return e=>{Mt(e.prototype,"useScope",i)}})(),Rs=(()=>{const i=new WeakMap,e=new WeakMap;function t(o){return this.l.get(o)}function s(){return this.l.root.get(xc)}function n(o){let a=i.get(this);return a==null&&i.set(this,a=new hu),a[o]??(a[o]=nf.get(this.l,o))}function r(o){let a=e.get(this);return a==null&&e.set(this,a=new hu),a[o]??(a[o]=Gp.get(this.l,o))}return(o,a=!0)=>l=>{const c=l.prototype;o!=null&&So(c,"strict",{enumerable:!0,get:function(){return o}}),So(c,"strictFnCall",{enumerable:!0,get:function(){return a}}),Mt(c,"get",t),Mt(c,"getSignaler",s),Mt(c,"getConverter",n),Mt(c,"getBehavior",r)}})();class hu{}const ly=re("IFlushQueue",i=>i.singleton(cy));class cy{constructor(){this._flushing=!1,this._items=new Set}get count(){return this._items.size}add(e){if(this._items.add(e),!this._flushing){this._flushing=!0;try{this._items.forEach(hy)}finally{this._flushing=!1}}}clear(){this._items.clear(),this._flushing=!1}}const hy=function(i,e,t){t.delete(i),i.flush()},ji=(()=>{const i=new WeakSet,e=(s,n,r)=>{let o,a,l,c=!1;const u=s.queue,h=()=>n(l),d=f=>{l=f,r.isBound?(a=o,o=u.queueTask(h,{delay:s.delay}),a==null||a.cancel()):h()},p=d.dispose=()=>{a==null||a.cancel(),o==null||o.cancel(),a=o=void 0};return d.flush=()=>{c=(o==null?void 0:o.status)===nu,p(),c&&h()},d},t=(s,n,r)=>{let o,a,l=0,c=0,u,h=!1;const d=s.queue,p=()=>s.now(),f=()=>n(u),_=v=>{u=v,r.isBound?(c=p()-l,a=o,c>s.delay?(l=p(),f()):o=d.queueTask(()=>{l=p(),f()},{delay:s.delay-c}),a==null||a.cancel()):f()},g=_.dispose=()=>{a==null||a.cancel(),o==null||o.cancel(),a=o=void 0};return _.flush=()=>{h=(o==null?void 0:o.status)===nu,g(),h&&f()},_};return(s,n)=>{Mt(s.prototype,"limit",function(r){if(i.has(this))throw E(9996);i.add(this);const o=n(this,r),a=r.signals,l=a.length>0?this.get(xc):null,c=this[o],u=(...p)=>c.call(this,...p),h=r.type==="debounce"?e(r,u,this):t(r,u,this),d=l?{handleChange:h.flush}:null;return this[o]=h,l&&a.forEach(p=>Wp(l,p,d)),{dispose:()=>{l&&a.forEach(p=>qp(l,p,d)),i.delete(this),h.dispose(),delete this[o]}}})}})(),ii=((i=new WeakSet)=>e=>function(){i.has(this)||(i.add(this),e.call(this))})(),uy={preempt:!0};class _i{constructor(e,t,s,n,r,o,a,l,c){this.targetAttribute=a,this.targetProperty=l,this.mode=c,this.isBound=!1,this._scope=void 0,this._task=null,this._value=void 0,this.boundFn=!1,this.l=t,this.ast=r,this._controller=e,this.target=o,this.oL=s,this._taskQueue=n}updateTarget(e){const t=this.target,s=this.targetAttribute,n=this.targetProperty;switch(s){case"class":t.classList.toggle(n,!!e);break;case"style":{let r="",o=Gs(e);ee(o)&&o.includes("!important")&&(r="important",o=o.replace("!important","")),t.style.setProperty(n,o,r);break}default:e==null?t.removeAttribute(s):t.setAttribute(s,Gs(e))}}handleChange(){if(!this.isBound)return;let e;this.obs.version++;const t=ye(this.ast,this._scope,this,(this.mode&Se)>0?this:null);this.obs.clear(),t!==this._value&&(this._value=t,this._controller.state!==mt?(e=this._task,this._task=this._taskQueue.queueTask(()=>{this._task=null,this.updateTarget(t)},uy),e==null||e.cancel()):this.updateTarget(t))}handleCollectionChange(){this.handleChange()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,ti(this.ast,e,this),this.mode&(Se|sa)&&this.updateTarget(this._value=ye(this.ast,e,this,(this.mode&Se)>0?this:null)),this.isBound=!0}unbind(){var e;this.isBound&&(this.isBound=!1,si(this.ast,this._scope,this),this._scope=void 0,this._value=void 0,(e=this._task)==null||e.cancel(),this._task=null,this.obs.clearAll())}}_i.mix=ii(()=>{Mi(_i),ji(_i,()=>"updateTarget"),as(_i,null),Rs(!0)(_i)});const dy={preempt:!0};class py{constructor(e,t,s,n,r,o,a,l){this.ast=r,this.target=o,this.targetProperty=a,this.mode=l,this.isBound=!1,this._scope=void 0,this._task=null,this._controller=e,this.oL=s,this._taskQueue=n,this._targetObserver=s.getAccessor(o,a);const c=r.expressions,u=this.partBindings=Array(c.length),h=c.length;let d=0;for(;h>d;++d)u[d]=new mi(c[d],o,a,t,s,this)}_handlePartChange(){this.updateTarget()}updateTarget(){const e=this.partBindings,t=this.ast.parts,s=e.length;let n="",r=0;if(s===1)n=t[0]+e[0]._value+t[1];else for(n=t[0];s>r;++r)n+=e[r]._value+t[r+1];const o=this._targetObserver,a=this._controller.state!==mt&&(o.type&us)>0;let l;a?(l=this._task,this._task=this._taskQueue.queueTask(()=>{this._task=null,o.setValue(n,this.target,this.targetProperty)},dy),l==null||l.cancel(),l=null):o.setValue(n,this.target,this.targetProperty)}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e;const t=this.partBindings,s=t.length;let n=0;for(;s>n;++n)t[n].bind(e);this.updateTarget(),this.isBound=!0}unbind(){var n;if(!this.isBound)return;this.isBound=!1,this._scope=void 0;const e=this.partBindings,t=e.length;let s=0;for(;t>s;++s)e[s].unbind();(n=this._task)==null||n.cancel(),this._task=null}useAccessor(e){this._targetObserver=e}}class mi{constructor(e,t,s,n,r,o){this.ast=e,this.target=t,this.targetProperty=s,this.owner=o,this.mode=Se,this.task=null,this.isBound=!1,this._value="",this.boundFn=!1,this.l=n,this.oL=r}updateTarget(){this.owner._handlePartChange()}handleChange(){if(!this.isBound)return;this.obs.version++;const e=ye(this.ast,this._scope,this,(this.mode&Se)>0?this:null);this.obs.clear(),e!=this._value&&(this._value=e,Ie(e)&&this.observeCollection(e),this.updateTarget())}handleCollectionChange(){this.updateTarget()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,ti(this.ast,e,this),this._value=ye(this.ast,this._scope,this,(this.mode&Se)>0?this:null),Ie(this._value)&&this.observeCollection(this._value),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,si(this.ast,this._scope,this),this._scope=void 0,this.obs.clearAll())}}mi.mix=ii(()=>{Mi(mi),ji(mi,()=>"updateTarget"),as(mi,null),Rs(!0)(mi)});const fy={preempt:!0};class vi{constructor(e,t,s,n,r,o,a){this.p=r,this.ast=o,this.target=a,this.isBound=!1,this.mode=Se,this._task=null,this._value="",this._needsRemoveNode=!1,this.boundFn=!1,this.strict=!0,this.l=t,this._controller=e,this.oL=s,this._taskQueue=n}updateTarget(e){var n,r;const t=this.target,s=this._value;this._value=e,this._needsRemoveNode&&((n=s.parentNode)==null||n.removeChild(s),this._needsRemoveNode=!1),e instanceof this.p.Node&&((r=t.parentNode)==null||r.insertBefore(e,t),e="",this._needsRemoveNode=!0),t.textContent=Gs(e??"")}handleChange(){var s;if(!this.isBound)return;this.obs.version++;const e=ye(this.ast,this._scope,this,(this.mode&Se)>0?this:null);if(this.obs.clear(),e===this._value){(s=this._task)==null||s.cancel(),this._task=null;return}this._controller.state!==mt?this._queueUpdate(e):this.updateTarget(e)}handleCollectionChange(){if(!this.isBound)return;this.obs.version++;const e=this._value=ye(this.ast,this._scope,this,(this.mode&Se)>0?this:null);this.obs.clear(),Ie(e)&&this.observeCollection(e),this._controller.state!==mt?this._queueUpdate(e):this.updateTarget(e)}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,ti(this.ast,e,this);const t=this._value=ye(this.ast,this._scope,this,(this.mode&Se)>0?this:null);Ie(t)&&this.observeCollection(t),this.updateTarget(t),this.isBound=!0}unbind(){var e,t;this.isBound&&(this.isBound=!1,si(this.ast,this._scope,this),this._needsRemoveNode&&((e=this._value.parentNode)==null||e.removeChild(this._value)),this._scope=void 0,this.obs.clearAll(),(t=this._task)==null||t.cancel(),this._task=null)}_queueUpdate(e){const t=this._task;this._task=this._taskQueue.queueTask(()=>{this._task=null,this.updateTarget(e)},fy),t==null||t.cancel()}}vi.mix=ii(()=>{Mi(vi),ji(vi,()=>"updateTarget"),as(vi,null),Rs(void 0,!1)(vi)});class bi{constructor(e,t,s,n,r=!1){this.ast=s,this.targetProperty=n,this.isBound=!1,this._scope=void 0,this.target=null,this.boundFn=!1,this.l=e,this.oL=t,this._toBindingContext=r}updateTarget(){this.target[this.targetProperty]=this._value}handleChange(){this.isBound&&(this.obs.version++,this._value=ye(this.ast,this._scope,this,this),this.obs.clear(),this.updateTarget())}handleCollectionChange(){this.handleChange()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,this.target=this._toBindingContext?e.bindingContext:e.overrideContext,ti(this.ast,e,this),this._value=ye(this.ast,this._scope,this,this),this.updateTarget(),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,si(this.ast,this._scope,this),this._scope=void 0,this.obs.clearAll())}}bi.mix=ii(()=>{Mi(bi),ji(bi,()=>"updateTarget"),as(bi,null),Rs(!0)(bi)});class rt{constructor(e,t,s,n,r,o,a,l){this.ast=r,this.target=o,this.targetProperty=a,this.mode=l,this.isBound=!1,this._scope=void 0,this._targetObserver=void 0,this._task=null,this._targetSubscriber=null,this.boundFn=!1,this.l=t,this._controller=e,this._taskQueue=n,this.oL=s}updateTarget(e){this._targetObserver.setValue(e,this.target,this.targetProperty)}updateSource(e){mn(this.ast,this._scope,this,e)}handleChange(){if(!this.isBound)return;this.obs.version++;const e=ye(this.ast,this._scope,this,(this.mode&Se)>0?this:null);this.obs.clear(),this._controller.state!==mt&&(this._targetObserver.type&us)>0?(Bn=this._task,this._task=this._taskQueue.queueTask(()=>{this.updateTarget(e),this._task=null},gy),Bn==null||Bn.cancel(),Bn=null):this.updateTarget(e)}handleCollectionChange(){this.handleChange()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,ti(this.ast,e,this);const t=this.oL,s=this.mode;let n=this._targetObserver;n||(s&Is?n=t.getObserver(this.target,this.targetProperty):n=t.getAccessor(this.target,this.targetProperty),this._targetObserver=n);const r=(s&Se)>0;s&(Se|sa)&&this.updateTarget(ye(this.ast,this._scope,this,r?this:null)),s&Is&&(n.subscribe(this._targetSubscriber??(this._targetSubscriber=new ay(this,this.l.get(ly)))),r||this.updateSource(n.getValue(this.target,this.targetProperty))),this.isBound=!0}unbind(){var e;this.isBound&&(this.isBound=!1,si(this.ast,this._scope,this),this._scope=void 0,this._targetSubscriber&&(this._targetObserver.unsubscribe(this._targetSubscriber),this._targetSubscriber=null),(e=this._task)==null||e.cancel(),this._task=null,this.obs.clearAll())}useTargetObserver(e){var t;(t=this._targetObserver)==null||t.unsubscribe(this),(this._targetObserver=e).subscribe(this)}useTargetSubscriber(e){if(this._targetSubscriber!=null)throw E(9995);this._targetSubscriber=e}}rt.mix=ii(()=>{Mi(rt),ji(rt,i=>i.mode&Is?"updateSource":"updateTarget"),as(rt,null),Rs(!0,!1)(rt)});let Bn=null;const gy={preempt:!0};class Pl{constructor(e,t,s){this.ast=t,this.target=s,this.isBound=!1,this._scope=void 0,this.l=e}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,ti(this.ast,e,this),mn(this.ast,this._scope,this,this.target),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,ye(this.ast,this._scope,this,null)===this.target&&mn(this.ast,this._scope,this,null),si(this.ast,this._scope,this),this._scope=void 0)}}Pl.mix=ii(()=>{Rs(!1)(Pl)});class _y{constructor(e,t=!1){this.prevent=e,this.capture=t}}class nn{constructor(e,t,s,n,r,o){this.ast=t,this.target=s,this.targetEvent=n,this.isBound=!1,this.self=!1,this.boundFn=!0,this._modifiedEventHandler=null,this.l=e,this._options=r,this._modifiedEventHandler=o}callSource(e){const t=this._scope.overrideContext;t.$event=e;let s=ye(this.ast,this._scope,this,null);return delete t.$event,Y(s)&&(s=s(e)),s!==!0&&this._options.prevent&&e.preventDefault(),s}handleEvent(e){var t;this.self&&this.target!==e.composedPath()[0]||((t=this._modifiedEventHandler)==null?void 0:t.call(this,e))!==!1&&this.callSource(e)}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,ti(this.ast,e,this),this.target.addEventListener(this.targetEvent,this,this._options),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,si(this.ast,this._scope,this),this._scope=void 0,this.target.removeEventListener(this.targetEvent,this,this._options))}}nn.mix=ii(function(){Mi(nn),ji(nn,()=>"callSource"),Rs(!0,!0)(nn)});const aa=re("IEventModifier"),rf=re("IKeyMapping",i=>i.instance({meta:hs(["ctrl","alt","shift","meta"]),keys:{escape:"Escape",enter:"Enter",space:"Space",tab:"tab",...Array.from({length:25}).reduce((e,t,s)=>{let n=String.fromCharCode(s+65);return e[s+65]=n,n=String.fromCharCode(s+97),e[s+97]=e[n]=n,e},{})}}));class Pc{constructor(){this.type=["click","mousedown","mousemove","mouseup","dblclick","contextmenu"],this._mapping=S(rf),this._mouseButtons=["left","middle","right"]}static register(e){e.register(ds(aa,Pc))}getHandler(e){const t=e.split(/[:+.]/);return s=>{let n=!1,r=!1,o;for(o of t){switch(o){case"prevent":n=!0;continue;case"stop":r=!0;continue;case"left":case"middle":case"right":if(s.button!==this._mouseButtons.indexOf(o))return!1;continue}if(this._mapping.meta.includes(o)&&s[`${o}Key`]!==!0)return!1;console.warn(`Modifier '${o}' is not supported for mouse events.`)}return n&&s.preventDefault(),r&&s.stopPropagation(),!0}}}class Ec{constructor(){this._mapping=S(rf),this.type=["keydown","keyup"]}static register(e){e.register(ds(aa,Ec))}getHandler(e){const t=e.split(/[:+.]/);return s=>{let n=!1,r=!1,o;for(o of t){switch(o){case"prevent":n=!0;continue;case"stop":r=!0;continue}if(this._mapping.meta.includes(o)){if(s[`${o}Key`]!==!0)return!1;continue}if(this._mapping.keys[o]!==s.key)return!1;console.warn(`Modifier '${o}' is not supported for keyboard event with key "${s.key}".`)}return n&&s.preventDefault(),r&&s.stopPropagation(),!0}}}class Rc{constructor(){this.type=["$ALL"]}static register(e){e.register(ds(aa,Rc))}getHandler(e){const t=e.split(/[:+.]/);return s=>{let n=!1,r=!1,o;for(o of t){switch(o){case"prevent":n=!0;continue;case"stop":r=!0;continue}console.warn(`Modifier '${o}' is not supported for event "${s.type}".`)}return n&&s.preventDefault(),r&&s.stopPropagation(),!0}}}const of=re("IEventModifierHandler",i=>i.instance({getHandler:()=>(console.warn("No event modifier handler registered"),null)}));class Oc{constructor(){this._reg=S(Xl(aa)).reduce((e,t)=>((Ie(t.type)?t.type:[t.type]).forEach(n=>e[n]=t),e),{})}static register(e){e.register(ds(of,Oc))}getHandler(e,t){var s;return ee(t)?((s=this._reg[e]??this._reg.$ALL)==null?void 0:s.getHandler(t))??null:null}}const my={register(i){i.register(Oc,Pc,Ec,Rc)}},yt=re("IViewFactory");class la{constructor(e,t){this.isCaching=!1,this._cache=null,this._cacheSize=-1,this.name=t.name,this.container=e,this.def=t}setCacheSize(e,t){e&&(e==="*"?e=la.maxCacheSize:ee(e)&&(e=parseInt(e,10)),(this._cacheSize===-1||!t)&&(this._cacheSize=e)),this._cacheSize>0?this._cache=[]:this._cache=null,this.isCaching=this._cacheSize>0}canReturnToCache(e){return this._cache!=null&&this._cache.length<this._cacheSize}tryReturnToCache(e){return this.canReturnToCache(e)?(this._cache.push(e),!0):!1}create(e){const t=this._cache;let s;return t!=null&&t.length>0?(s=t.pop(),s):(s=Qe.$view(this,e),s)}}la.maxCacheSize=65535;const vy=(()=>{const i=(e,t)=>e.document.createComment(t);return e=>{const t=i(e,"au-end");return t.$start=i(e,"au-start"),t}})(),Xr=(i,e,t)=>{if(i===null)return;const s=t.length;let n=0;for(;s>n;)i.insertBefore(t[n],e),++n},af=(i,e)=>new i.ownerDocument.defaultView.MutationObserver(e),by=i=>i.nodeType===1,lf="default",wy="au-slot",cf=re("IAuSlotsInfo");class hf{constructor(e){this.projectedSlots=e}}const yy=re("IAuSlotWatcher");class ca{static create(e,t,s,n,r,o,a,l){const c=[],u=n.renderers,h=p=>{let f=p,_=e;for(;_!=null&&f>0;)_=_.parent,--f;if(_==null)throw E(9999);return _},d=p=>{var m;const f=h(p),_=new ca(f),g=r.compileSpread(f.controller.definition,((m=f.instruction)==null?void 0:m.captures)??U,f.controller.container,t,s);let v;for(v of g)switch(v.type){case Re.spreadTransferedBinding:d(p+1);break;case Re.spreadElementProp:u[v.instruction.type].render(_,Si(t),v.instruction,o,a,l);break;default:u[v.type].render(_,t,v,o,a,l)}c.push(_)};return d(0),c}get container(){return this.locator}get definition(){return this.$controller.definition}get state(){return this.$controller.state}constructor(e){this.isBound=!1,this._innerBindings=[],this.locator=(this.$controller=(this._hydrationContext=e).controller).container}get(e){return this.locator.get(e)}bind(e){if(this.isBound)return;this.isBound=!0;const t=this.scope=this._hydrationContext.controller.scope.parent??void 0;if(t==null)throw E(9999);this._innerBindings.forEach(s=>s.bind(t))}unbind(){this._innerBindings.forEach(e=>e.unbind()),this.isBound=!1}addBinding(e){this._innerBindings.push(e)}addChild(e){if(e.vmKind!==gi)throw E(9998);this.$controller.addChild(e)}}class Zt{constructor(e,t,s,n,r,o,a){this.target=t,this.targetKeys=s,this.ast=n,this.isBound=!1,this._scope=void 0,this.boundFn=!1,this._bindingCache={},this._scopeCache=new WeakMap,this._controller=e,this.oL=r,this.l=o,this._taskQueue=a}updateTarget(){this.obs.version++;const e=ye(this.ast,this._scope,this,this);this.obs.clear(),this._createBindings(e,!0)}handleChange(){this.isBound&&this.updateTarget()}handleCollectionChange(){this.isBound&&this.updateTarget()}bind(e){if(this.isBound){if(e===this._scope)return;this.unbind()}this.isBound=!0,this._scope=e,ti(this.ast,e,this);const t=ye(this.ast,e,this,this);this._createBindings(t,!1)}unbind(){if(!this.isBound)return;this.isBound=!1,si(this.ast,this._scope,this),this._scope=void 0;let e;for(e in this._bindingCache)this._bindingCache[e].unbind()}_createBindings(e,t){var o,a;let s;if(!Zi(e)){console.warn(`[DEV:aurelia] $bindable spread is given a non object for properties: "${this.targetKeys.join(", ")}" of ${this.target.constructor.name}`);for(s in this._bindingCache)(o=this._bindingCache[s])==null||o.unbind();return}let n,r=this._scopeCache.get(e);r==null&&this._scopeCache.set(e,r=De.fromParent(this._scope,e));for(s of this.targetKeys)n=this._bindingCache[s],s in e?(n==null&&(n=this._bindingCache[s]=new rt(this._controller,this.l,this.oL,this._taskQueue,(a=Zt._astCache)[s]??(a[s]=new sr(s,0)),this.target,s,Ni.toView)),n.bind(r)):t&&(n==null||n.unbind())}}Zt.mix=ii(()=>{Mi(Zt),ji(Zt,()=>"updateTarget"),as(Zt,null),Rs(!0,!1)(Zt)});Zt._astCache={};const uu=(i,e,t,s)=>{i.addEventListener(e,t,s)},du=(i,e,t,s)=>{i.removeEventListener(e,t,s)},Lc=i=>{let e;const t=i.prototype;Mt(t,"subscribe",function(s){var n;if(this.subs.add(s)&&this.subs.count===1){for(e of this._config.events)uu(this._el,e,this);this._listened=!0,(n=this._start)==null||n.call(this)}}),Mt(t,"unsubscribe",function(s){var n;if(this.subs.remove(s)&&this.subs.count===0){for(e of this._config.events)du(this._el,e,this);this._listened=!1,(n=this._stop)==null||n.call(this)}}),Mt(t,"useConfig",function(s){if(this._config=s,this._listened){for(e of this._config.events)du(this._el,e,this);for(e of this._config.events)uu(this._el,e,this)}})},ha=i=>{Mt(i.prototype,"subscribe",jt),Mt(i.prototype,"unsubscribe",jt)};class ua{get doNotCache(){return!0}constructor(e,t={}){this.obj=e,this.mapping=t,this.type=ei|us,this._value="",this._nameIndex={},this._version=0}getValue(){return this._value}setValue(e){e!==this._value&&(this._value=e,this._flushChanges())}_flushChanges(){const e=this._nameIndex,t=++this._version,s=this.obj.classList,n=uf(this._value),r=n.length;let o=0,a;if(r>0)for(;o<r;o++)a=n[o],a=this.mapping[a]||a,a.length!==0&&(e[a]=this._version,s.add(a));if(t!==1)for(a in e)a=this.mapping[a]||a,e[a]!==t&&s.remove(a)}}ha(ua);function uf(i){if(ee(i))return pu(i);if(typeof i!="object")return U;if(Ie(i)){const s=i.length;if(s>0){const n=[];let r=0;for(;s>r;++r)n.push(...uf(i[r]));return n}else return U}const e=[];let t;for(t in i)i[t]&&(t.includes(" ")?e.push(...pu(t)):e.push(t));return e}function pu(i){const e=i.match(/\S+/g);return e===null?U:e}const df=i=>({$isResolver:!0,resolve(e,t){return t.get(Vi).controller.container.get(_m(i))}}),pf=re("IRenderer");function je(i,e){var s;const t=i[s=Symbol.metadata]??(i[s]=Object.create(null));return t[rs]={register(n){ds(pf,i).register(n)}},i}function ns(i,e,t){return ee(e)?i.parse(e,t):e}function da(i){return i.viewModel!=null?i.viewModel:i}function Cy(i,e){if(e==="element")return i;switch(e){case"controller":return Si(i);case"view":throw E(750);case"component":return Si(i).viewModel;default:{const t=sf(i,e);if(t!==void 0)return t.viewModel;const s=Si(i,{name:e});if(s===void 0)throw E(751,e);return s.viewModel}}}const ky=je(class{constructor(){this.target=Re.setProperty}render(e,t,s){var r;const n=da(t);((r=n.$observers)==null?void 0:r[s.to])!==void 0?n.$observers[s.to].setValue(s.value):n[s.to]=s.value}}),Ay=je(class{constructor(){this._rendering=S(Fi),this.target=Re.hydrateElement}render(e,t,s,n,r,o){let a,l,c;const u=s.res,h=s.projections,d=e.container;switch(typeof u){case"string":if(a=ie.find(d,u),a==null)throw E(752,s,e);break;default:a=u}const f=s.containerless||a.containerless?vr(t):null,_=qy(n,e,t,s,f,h==null?void 0:new hf(kc(h)));l=_.invoke(a.Type),c=Qe.$el(_,l,t,s,a,f),st(t,a.key,c);const g=this._rendering.renderers,v=s.props,m=v.length;let A=0,w;for(;m>A;)w=v[A],g[w.type].render(e,c,w,n,r,o),++A;e.addChild(c)}}),$y=je(class{constructor(){this._rendering=S(Fi),this.target=Re.hydrateAttribute}render(e,t,s,n,r,o){let a=e.container,l;switch(typeof s.res){case"string":if(l=Vr.find(a,s.res),l==null)throw E(753,s,e);break;default:l=s.res}const c=vf(n,l,e,t,s,void 0,void 0),u=Qe.$attr(c.ctn,c.vm,t,l);st(t,l.key,u);const h=this._rendering.renderers,d=s.props,p=d.length;let f=0,_;for(;p>f;)_=d[f],h[_.type].render(e,u,_,n,r,o),++f;e.addChild(u)}}),Sy=je(class{constructor(){this._rendering=S(Fi),this.target=Re.hydrateTemplateController}render(e,t,s,n,r,o){var m,A;let a=e.container,l;switch(typeof s.res){case"string":if(l=Vr.find(a,s.res),l==null)throw E(754,s,e);break;default:l=s.res}const c=this._rendering.getViewFactory(s.def,l.containerStrategy==="new"?a.createChild({inheritParentResources:!0}):a),u=vr(t),h=vf(n,l,e,t,s,c,u),d=Qe.$attr(h.ctn,h.vm,t,l);st(u,l.key,d),(A=(m=h.vm).link)==null||A.call(m,e,d,t,s);const p=this._rendering.renderers,f=s.props,_=f.length;let g=0,v;for(;_>g;)v=f[g],p[v.type].render(e,d,v,n,r,o),++g;e.addChild(d)}}),xy=je(class{constructor(){this.target=Re.hydrateLetElement,bi.mix()}render(e,t,s,n,r,o){t.remove();const a=s.instructions,l=s.toBindingContext,c=e.container,u=a.length;let h,d,p=0;for(;u>p;)h=a[p],d=ns(r,h.from,is),e.addBinding(new bi(c,o,d,h.to,l)),++p}}),Ty=je(class{constructor(){this.target=Re.refBinding}render(e,t,s,n,r){e.addBinding(new Pl(e.container,ns(r,s.from,is),Cy(t,s.to)))}}),Iy=je(class{constructor(){this.target=Re.interpolation,mi.mix()}render(e,t,s,n,r,o){const a=e.container,l=new py(e,a,o,n.domQueue,ns(r,s.from,zw),da(t),s.to,Se);if(s.to==="class"&&l.target.nodeType>0){const c=a.get(df(xo));l.useAccessor(new ua(l.target,c))}e.addBinding(l)}}),Py=je(class{constructor(){this.target=Re.propertyBinding,rt.mix()}render(e,t,s,n,r,o){const a=e.container,l=new rt(e,a,o,n.domQueue,ns(r,s.from,is),da(t),s.to,s.mode);if(s.to==="class"&&l.target.nodeType>0){const c=a.get(df(xo));l.useTargetObserver(new ua(l.target,c))}e.addBinding(l)}}),Ey=je(class{constructor(){this.target=Re.iteratorBinding,rt.mix()}render(e,t,s,n,r,o){e.addBinding(new rt(e,e.container,o,n.domQueue,ns(r,s.forOf,Hw),da(t),s.to,Se))}}),Ry=je(class{constructor(){this.target=Re.textBinding,vi.mix()}render(e,t,s,n,r,o){e.addBinding(new vi(e,e.container,o,n.domQueue,n,ns(r,s.from,is),t))}}),Oy=re("IListenerBindingOptions",i=>i.instance({prevent:!1})),Ly=je(class{constructor(){this.target=Re.listenerBinding,this._modifierHandler=S(of),this._defaultOptions=S(Oy),nn.mix()}render(e,t,s,n,r){e.addBinding(new nn(e.container,ns(r,s.from,Uw),t,s.to,new _y(this._defaultOptions.prevent,s.capture),this._modifierHandler.getHandler(s.to,s.modifier)))}}),Vy=je(class{constructor(){this.target=Re.setAttribute}render(e,t,s){t.setAttribute(s.to,s.value)}}),Dy=je(class{constructor(){this.target=Re.setClassAttribute}render(e,t,s){Uy(t.classList,s.value)}}),By=je(class{constructor(){this.target=Re.setStyleAttribute}render(e,t,s){t.style.cssText+=s.value}}),Ny=["height","width","border-width","padding","padding-left","padding-right","padding-top","padding-right","padding-inline","padding-block","margin","margin-left","margin-right","margin-top","margin-bottom","margin-inline","margin-block","top","right","bottom","left"],My=je(class{constructor(){this.target=Re.stylePropertyBinding,rt.mix()}render(e,t,s,n,r,o){if(Ny.includes(s.to)){e.addBinding(new jy(e,e.container,o,n.domQueue,ns(r,s.from,is),t.style,s.to,Se));return}e.addBinding(new rt(e,e.container,o,n.domQueue,ns(r,s.from,is),t.style,s.to,Se))}});class jy extends rt{updateTarget(e){return typeof e=="number"&&e>0&&console.warn(`[DEV]: Setting number ${e} as value for style.${this.targetProperty}. Did you meant "${e}px"?`),super.updateTarget(e)}}const Fy=je(class{constructor(){this.target=Re.attributeBinding,_i.mix()}render(e,t,s,n,r,o){const a=e.container,l=a.has(xo,!1)?a.get(xo):null;e.addBinding(new _i(e,a,o,n.domQueue,ns(r,s.from,is),t,s.attr,l==null?s.to:s.to.split(/\s/g).map(c=>l[c]??c).join(" "),Se))}}),zy=je(class{constructor(){this._compiler=S(ta),this._rendering=S(Fi),this.target=Re.spreadTransferedBinding}render(e,t,s,n,r,o){ca.create(e.container.get(Vi),t,void 0,this._rendering,this._compiler,n,r,o).forEach(a=>e.addBinding(a))}}),Hy=je(class{constructor(){this.target=Re.spreadValueBinding,Zt.mix()}render(e,t,s,n,r,o){const a=s.target;if(a==="$bindables")e.addBinding(new Zt(e,t.viewModel,kc(t.definition.bindables),r.parse(s.from,is),o,e.container,n.domQueue));else throw E(820,a)}});function Uy(i,e){const t=e.length;let s=0;for(let n=0;n<t;++n)e.charCodeAt(n)===32?(n!==s&&i.add(e.slice(s,n)),s=n+1):n+1===t&&i.add(e.slice(s))}const ff="IController",gf="IInstruction",Wy="IRenderLocation",_f="ISlotsInfo";function qy(i,e,t,s,n,r){const o=e.container.createChild();return Nr(o,t,i),_e(o,Dr,new $e(ff,e)),_e(o,In,new $e(gf,s)),_e(o,lt,n==null?wf:new bf(n)),_e(o,yt,yf),_e(o,cf,r==null?Cf:new $e(_f,r)),o}class mf{get $isResolver(){return!0}constructor(e){this.f=e}resolve(){const e=this.f;if(e===null)throw E(755);if(!ee(e.name)||e.name.length===0)throw E(756);return e}}function vf(i,e,t,s,n,r,o,a){const l=t instanceof Qe?t:t.$controller,c=l.container.createChild();return Nr(c,s,i),_e(c,Dr,new $e(ff,l)),_e(c,In,new $e(gf,n)),_e(c,lt,o==null?wf:new $e(Wy,o)),_e(c,yt,r==null?yf:new mf(r)),_e(c,cf,Cf),{vm:c.invoke(e.Type),ctn:c}}class bf{get name(){return"IRenderLocation"}get $isResolver(){return!0}constructor(e){this._location=e}resolve(){return this._location}}const wf=new bf(null),yf=new mf(null),Cf=new $e(_f,new hf(U)),Fi=re("IRendering",i=>i.singleton(Ky));class Ky{get renderers(){return this._renderers??(this._renderers=this._ctn.getAll(pf,!1).reduce((e,t)=>{var s;return e[t.target]!==void 0&&console.warn(`[DEV:aurelia] Renderer for target ${t.target} already exists.`),e[s=t.target]??(e[s]=t),e},ae()))}constructor(){this._compilationCache=new WeakMap,this._fragmentCache=new WeakMap;const e=this._ctn=S(Bi).root,t=this._platform=e.get(Ne);this._exprParser=e.get(Rr),this._observerLocator=e.get(xn),this._marker=t.document.createElement("au-m"),this._empty=new Wa(t,t.document.createDocumentFragment())}compile(e,t){const s=t.get(ta),n=this._compilationCache;let r=n.get(e);return r==null&&n.set(e,r=ot.create(e.needsCompile?s.compile(e,t):e)),r}getViewFactory(e,t){return new la(t,ot.getOrCreate(e))}createNodes(e){if(e.enhance===!0)return new Wa(this._platform,this._transformMarker(e.template));let t,s=!1;const n=this._fragmentCache,r=this._platform,o=r.document;if(n.has(e))t=n.get(e);else{const a=e.template;let l;a==null?t=null:a instanceof r.Node?a.nodeName==="TEMPLATE"?(t=a.content,s=!0):(t=o.createDocumentFragment()).appendChild(a.cloneNode(!0)):(l=o.createElement("template"),ee(a)&&(l.innerHTML=a),t=l.content,s=!0),this._transformMarker(t),n.set(e,t)}return t==null?this._empty:new Wa(this._platform,s?o.importNode(t,!0):o.adoptNode(t.cloneNode(!0)))}render(e,t,s,n){const r=s.instructions,o=this.renderers,a=t.length;let l=0,c=0,u=r.length,h,d,p;if(a!==u)throw E(757,a,u);if(a>0)for(;a>l;){for(h=r[l],p=t[l],c=0,u=h.length;u>c;)d=h[c],o[d.type].render(e,p,d,this._platform,this._exprParser,this._observerLocator),++c;++l}if(n!=null&&(h=s.surrogates,(u=h.length)>0))for(c=0;u>c;)d=h[c],o[d.type].render(e,n,d,this._platform,this._exprParser,this._observerLocator),++c}_transformMarker(e){if(e==null)return null;const t=this._platform.document.createTreeWalker(e,128);let s;for(;(s=t.nextNode())!=null;)s.nodeValue==="au*"&&s.parentNode.replaceChild(t.currentNode=this._marker.cloneNode(),s);return e}}const fu=re("IShadowDOMStyles"),Gy=re("IShadowDOMGlobalStyles",i=>i.instance({applyTo:jt})),{enter:Qy,exit:Jy}=pb,{wrap:Yy,unwrap:Xy}=Jb;class kf{get value(){return this._value}constructor(e,t,s,n,r){this.obj=e,this.$get=s,this.useProxy=r,this.isBound=!1,this.running=!1,this._value=void 0,this._callback=n,this.oL=t}handleChange(){this.run()}handleCollectionChange(){this.run()}bind(){this.isBound||(this.compute(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll())}run(){if(!this.isBound||this.running)return;const e=this.obj,t=this._value,s=this.compute();Ks(s,t)||this._callback.call(e,s,t,e)}compute(){this.running=!0,this.obs.version++;try{return Qy(this),this._value=Xy(this.$get.call(void 0,this.useProxy?Yy(this.obj):this.obj,this))}finally{this.obs.clear(),this.running=!1,Jy(this)}}}as(kf,null);class El{get value(){return this._value}constructor(e,t,s,n,r){this.scope=e,this.l=t,this.oL=s,this.isBound=!1,this.boundFn=!1,this.obj=e.bindingContext,this._expression=n,this._callback=r}handleChange(e){const t=this._expression,s=this.obj,n=this._value;t.$kind==="AccessScope"&&this.obs.count===1||(this.obs.version++,e=ye(t,this.scope,this,this),this.obs.clear()),Ks(e,n)||(this._value=e,this._callback.call(s,e,n,s))}bind(){this.isBound||(this.obs.version++,this._value=ye(this._expression,this.scope,this,this),this.obs.clear(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),this._value=void 0)}}as(El,null),Rs(!0)(El);class Qe{get lifecycleHooks(){return this._lifecycleHooks}get isActive(){return(this.state&(mt|wi))>0&&(this.state&cr)===0}get name(){var e;if(this.parent===null)switch(this.vmKind){case gi:return`[${this.definition.name}]`;case pt:return this.definition.name;case qe:return this.viewFactory.name}switch(this.vmKind){case gi:return`${this.parent.name}>[${this.definition.name}]`;case pt:return`${this.parent.name}>${this.definition.name}`;case qe:return this.viewFactory.name===((e=this.parent.definition)==null?void 0:e.name)?`${this.parent.name}[view]`:`${this.parent.name}[view:${this.viewFactory.name}]`}}get viewModel(){return this._vm}set viewModel(e){this._vm=e,this._vmHooks=e==null||this.vmKind===qe?rn.none:new rn(e)}constructor(e,t,s,n,r,o,a){this.container=e,this.vmKind=t,this.definition=s,this.viewFactory=n,this.host=o,this.head=null,this.tail=null,this.next=null,this.parent=null,this.bindings=null,this.children=null,this.hasLockedScope=!1,this.scope=null,this.isBound=!1,this._isBindingDone=!1,this.hostController=null,this.mountTarget=Af,this.shadowRoot=null,this.nodes=null,this.location=null,this._lifecycleHooks=null,this.state=za,this._fullyNamed=!1,this.$initiator=null,this.$resolve=void 0,this.$reject=void 0,this.$promise=void 0,this._activatingStack=0,this._detachingStack=0,this._unbindingStack=0,this._vm=r,this._vmHooks=t===qe?rn.none:new rn(r),this.logger=null,this.debug=!1,this.location=a,this._rendering=e.root.get(Fi),this.coercion=t===qe?void 0:e.get(t0)}static getCached(e){return Ds.get(e)}static getCachedOrThrow(e){const t=Qe.getCached(e);if(t===void 0)throw E(500,e);return t}static $el(e,t,s,n,r=void 0,o=null){if(Ds.has(t))return Ds.get(t);if(r==null)try{r=If(t.constructor)}catch(c){throw console.error(`[DEV:aurelia] Custom element definition not found for creating a controller with host: <${s.nodeName} /> and component ${t.constructor.name||"(Anonymous) class"}`),c}_e(e,r.Type,new $e(r.key,t,r.Type));const a=new Qe(e,pt,r,null,t,s,o),l=e.get(yd(Vi));return r.dependencies.length>0&&e.register(...r.dependencies),_e(e,Vi,new $e("IHydrationContext",new $f(a,n,l))),Ds.set(t,a),(n==null||n.hydrate!==!1)&&a._hydrateCustomElement(n,l),a}static $attr(e,t,s,n){if(Ds.has(t))return Ds.get(t);n=n??Tc(t.constructor),_e(e,n.Type,new $e(n.key,t,n.Type));const r=new Qe(e,gi,n,null,t,s,null);return n.dependencies.length>0&&e.register(...n.dependencies),Ds.set(t,r),r._hydrateCustomAttribute(),r}static $view(e,t=void 0){const s=new Qe(e.container,qe,null,e,null,null,null);return s.parent=t??null,s._hydrateSynthetic(),s}_hydrateCustomElement(e,t){this.logger=this.container.get(Be).root,this.debug=this.logger.config.level<=ym.debug,this.debug&&(this.logger=this.logger.scopeTo(this.name));const s=this.container,n=this._vm,r=this.definition;this.scope=De.create(n,null,!0),r.watches.length>0&&mu(this,s,r,n),gu(this,r,n),this._lifecycleHooks=cu.resolve(s),s.register(r.Type),r.injectable!==null&&_e(s,r.injectable,new $e("definition.injectable",n)),(e==null||e.hydrate!==!1)&&(this._hydrate(),this._hydrateChildren())}_hydrate(){this._lifecycleHooks.hydrating!=null&&this._lifecycleHooks.hydrating.forEach(a0,this),this._vmHooks._hydrating&&(this.debug&&this.logger.trace("invoking hydrating() hook"),this._vm.hydrating(this));const e=this.definition,t=this._compiledDef=this._rendering.compile(e,this.container),s=t.shadowOptions,n=t.hasSlots,r=t.containerless;let o=this.host,a=this.location;if((this.hostController=Si(o,e0))!==null&&(o=this.host=this.container.root.get(Ne).document.createElement(e.name),r&&a==null&&(a=this.location=vr(o))),st(o,He,this),st(o,e.key,this),s!==null||n){if(a!=null)throw E(501);st(this.shadowRoot=o.attachShadow(s??n0),He,this),st(this.shadowRoot,e.key,this),this.mountTarget=pi}else a!=null?(st(a,He,this),st(a,e.key,this),this.mountTarget=fi):this.mountTarget=di;this._vm.$controller=this,this.nodes=this._rendering.createNodes(t),this._lifecycleHooks.hydrated!==void 0&&this._lifecycleHooks.hydrated.forEach(l0,this),this._vmHooks._hydrated&&(this.debug&&this.logger.trace("invoking hydrated() hook"),this._vm.hydrated(this))}_hydrateChildren(){this._rendering.render(this,this.nodes.findTargets(),this._compiledDef,this.host),this._lifecycleHooks.created!==void 0&&this._lifecycleHooks.created.forEach(vu,this),this._vmHooks._created&&(this.debug&&this.logger.trace("invoking created() hook"),this._vm.created(this))}_hydrateCustomAttribute(){const e=this.definition,t=this._vm;e.watches.length>0&&mu(this,this.container,e,t),gu(this,e,t),t.$controller=this,this._lifecycleHooks=cu.resolve(this.container),this._lifecycleHooks.created!==void 0&&this._lifecycleHooks.created.forEach(vu,this),this._vmHooks._created&&(this.debug&&this.logger.trace("invoking created() hook"),this._vm.created(this))}_hydrateSynthetic(){this._compiledDef=this._rendering.compile(this.viewFactory.def,this.container),this._rendering.render(this,(this.nodes=this._rendering.createNodes(this._compiledDef)).findTargets(),this._compiledDef,void 0)}activate(e,t,s){switch(this.state){case za:case on:if(!(t===null||t.isActive))return;this.state=mt;break;case wi:return;case Ns:throw E(502,this.name);default:throw E(503,this.name,r0(this.state))}switch(this.parent=t,this.debug&&!this._fullyNamed&&(this._fullyNamed=!0,(this.logger??(this.logger=this.container.get(Be).root.scopeTo(this.name))).trace("activate()")),this.vmKind){case pt:this.scope.parent=s??null;break;case gi:this.scope=s??null;break;case qe:if(s==null)throw E(504,this.name);this.hasLockedScope||(this.scope=s);break}this.$initiator=e,this._enterActivating();let n;return this.vmKind!==qe&&this._lifecycleHooks.binding!=null&&(this.debug&&this.logger.trace("lifecycleHooks.binding()"),n=oe(...this._lifecycleHooks.binding.map(c0,this))),this._vmHooks._binding&&(this.debug&&this.logger.trace("binding()"),n=oe(n,this._vm.binding(this.$initiator,this.parent))),Te(n)?(this._ensurePromise(),n.then(()=>{this._isBindingDone=!0,this.state!==mt?this._leaveActivating():this.bind()}).catch(r=>{this._reject(r)}),this.$promise):(this._isBindingDone=!0,this.bind(),this.$promise)}bind(){this.debug&&this.logger.trace("bind()");let e=0,t=0,s;if(this.bindings!==null)for(e=0,t=this.bindings.length;t>e;)this.bindings[e].bind(this.scope),++e;if(this.vmKind!==qe&&this._lifecycleHooks.bound!=null&&(this.debug&&this.logger.trace("lifecycleHooks.bound()"),s=oe(...this._lifecycleHooks.bound.map(h0,this))),this._vmHooks._bound&&(this.debug&&this.logger.trace("bound()"),s=oe(s,this._vm.bound(this.$initiator,this.parent))),Te(s)){this._ensurePromise(),s.then(()=>{this.isBound=!0,this.state!==mt?this._leaveActivating():this._attach()}).catch(n=>{this._reject(n)});return}this.isBound=!0,this._attach()}_append(...e){switch(this.mountTarget){case di:this.host.append(...e);break;case pi:this.shadowRoot.append(...e);break;case fi:{let t=0;for(;t<e.length;++t)this.location.parentNode.insertBefore(e[t],this.location);break}}}_attach(){if(this.debug&&this.logger.trace("attach()"),this.hostController!==null)switch(this.mountTarget){case di:case pi:this.hostController._append(this.host);break;case fi:this.hostController._append(this.location.$start,this.location);break}switch(this.mountTarget){case di:this.nodes.appendTo(this.host,this.definition!=null&&this.definition.enhance);break;case pi:{const s=this.container;(s.has(fu,!1)?s.get(fu):s.get(Gy)).applyTo(this.shadowRoot),this.nodes.appendTo(this.shadowRoot);break}case fi:this.nodes.insertBefore(this.location);break}let e=0,t;if(this.vmKind!==qe&&this._lifecycleHooks.attaching!=null&&(this.debug&&this.logger.trace("lifecycleHooks.attaching()"),t=oe(...this._lifecycleHooks.attaching.map(u0,this))),this._vmHooks._attaching&&(this.debug&&this.logger.trace("attaching()"),t=oe(t,this._vm.attaching(this.$initiator,this.parent))),Te(t)&&(this._ensurePromise(),this._enterActivating(),t.then(()=>{this._leaveActivating()}).catch(s=>{this._reject(s)})),this.children!==null)for(;e<this.children.length;++e)this.children[e].activate(this.$initiator,this,this.scope);this._leaveActivating()}deactivate(e,t){var o;let s;switch(this.state&~an){case wi:this.state=cr;break;case mt:this.state=cr,s=(o=this.$promise)==null?void 0:o.catch(a=>{this.logger.warn("The activation error will be ignored, as the controller is already scheduled for deactivation. The activation was rejected with: %s",a)});break;case za:case on:case Ns:case on|Ns:return;default:throw E(505,this.name,this.state)}this.debug&&this.logger.trace("deactivate()"),this.$initiator=e,e===this&&this._enterDetaching();let n=0,r;if(this.children!==null)for(n=0;n<this.children.length;++n)this.children[n].deactivate(e,this);return L(s,()=>{if(this.isBound&&(this.vmKind!==qe&&this._lifecycleHooks.detaching!=null&&(this.debug&&this.logger.trace("lifecycleHooks.detaching()"),r=oe(...this._lifecycleHooks.detaching.map(p0,this))),this._vmHooks._detaching&&(this.debug&&this.logger.trace("detaching()"),r=oe(r,this._vm.detaching(this.$initiator,this.parent)))),Te(r)&&(this._ensurePromise(),e._enterDetaching(),r.then(()=>{e._leaveDetaching()}).catch(a=>{e._reject(a)})),e.head===null?e.head=this:e.tail.next=this,e.tail=this,e===this)return this._leaveDetaching(),this.$promise})}removeNodes(){switch(this.vmKind){case pt:case qe:this.nodes.remove(),this.nodes.unlink()}if(this.hostController!==null)switch(this.mountTarget){case di:case pi:this.host.remove();break;case fi:this.location.$start.remove(),this.location.remove();break}}unbind(){this.debug&&this.logger.trace("unbind()");let e=0;if(this.bindings!==null)for(;e<this.bindings.length;++e)this.bindings[e].unbind();switch(this.parent=null,this.vmKind){case gi:this.scope=null;break;case qe:this.hasLockedScope||(this.scope=null),(this.state&an)===an&&!this.viewFactory.tryReturnToCache(this)&&this.$initiator===this&&this.dispose();break;case pt:this.scope.parent=null;break}this.state=on,this.$initiator=null,this._resolve()}_ensurePromise(){this.$promise===void 0&&(this.$promise=new Promise((e,t)=>{this.$resolve=e,this.$reject=t}),this.$initiator!==this&&this.parent._ensurePromise())}_resolve(){this.$promise!==void 0&&(Ha=this.$resolve,this.$resolve=this.$reject=this.$promise=void 0,Ha(),Ha=void 0)}_reject(e){this.$promise!==void 0&&(Ua=this.$reject,this.$resolve=this.$reject=this.$promise=void 0,Ua(e),Ua=void 0),this.$initiator!==this&&this.parent._reject(e)}_enterActivating(){++this._activatingStack,this.$initiator!==this&&this.parent._enterActivating()}_leaveActivating(){if(this.state!==mt){--this._activatingStack,this._resolve(),this.$initiator!==this&&this.parent._leaveActivating();return}if(--this._activatingStack===0){if(this.vmKind!==qe&&this._lifecycleHooks.attached!=null&&(ci=oe(...this._lifecycleHooks.attached.map(d0,this))),this._vmHooks._attached&&(this.debug&&this.logger.trace("attached()"),ci=oe(ci,this._vm.attached(this.$initiator))),Te(ci)){this._ensurePromise(),ci.then(()=>{this.state=wi,this._resolve(),this.$initiator!==this&&this.parent._leaveActivating()}).catch(e=>{this._reject(e)}),ci=void 0;return}ci=void 0,this.state=wi,this._resolve()}this.$initiator!==this&&this.parent._leaveActivating()}_enterDetaching(){++this._detachingStack}_leaveDetaching(){if(--this._detachingStack===0){this.debug&&this.logger.trace("detach()"),this._enterUnbinding(),this.removeNodes();let e=this.$initiator.head,t;for(;e!==null;)e!==this&&(e.debug&&e.logger.trace("detach()"),e.removeNodes()),e._isBindingDone&&(e.vmKind!==qe&&e._lifecycleHooks.unbinding!=null&&(t=oe(...e._lifecycleHooks.unbinding.map(f0,e))),e._vmHooks._unbinding&&(e.debug&&e.logger.trace("unbinding()"),t=oe(t,e.viewModel.unbinding(e.$initiator,e.parent)))),Te(t)&&(this._ensurePromise(),this._enterUnbinding(),t.then(()=>{this._leaveUnbinding()}).catch(s=>{this._reject(s)})),t=void 0,e=e.next;this._leaveUnbinding()}}_enterUnbinding(){++this._unbindingStack}_leaveUnbinding(){if(--this._unbindingStack===0){this.debug&&this.logger.trace("unbind()");let e=this.$initiator.head,t=null;for(;e!==null;)e!==this&&(e._isBindingDone=!1,e.isBound=!1,e.unbind()),t=e.next,e.next=null,e=t;this.head=this.tail=null,this._isBindingDone=!1,this.isBound=!1,this.unbind()}}addBinding(e){this.bindings===null?this.bindings=[e]:this.bindings[this.bindings.length]=e}addChild(e){this.children===null?this.children=[e]:this.children[this.children.length]=e}is(e){switch(this.vmKind){case gi:case pt:return this.definition.name===e;case qe:return this.viewFactory.name===e}}lockScope(e){this.scope=e,this.hasLockedScope=!0}setHost(e){return this.vmKind===pt&&(st(e,He,this),st(e,this.definition.key,this)),this.host=e,this.mountTarget=di,this}setShadowRoot(e){return this.vmKind===pt&&(st(e,He,this),st(e,this.definition.key,this)),this.shadowRoot=e,this.mountTarget=pi,this}setLocation(e){return this.vmKind===pt&&(st(e,He,this),st(e,this.definition.key,this)),this.location=e,this.mountTarget=fi,this}release(){this.state|=an}dispose(){this.debug&&this.logger.trace("dispose()"),(this.state&Ns)!==Ns&&(this.state|=Ns,this._vmHooks._dispose&&this._vm.dispose(),this.children!==null&&(this.children.forEach(o0),this.children=null),this.hostController=null,this.scope=null,this.nodes=null,this.location=null,this.viewFactory=null,this._vm!==null&&(Ds.delete(this._vm),this._vm=null),this._vm=null,this.host=null,this.shadowRoot=null,this.container.disposeResolvers())}accept(e){if(e(this)===!0||this._vmHooks._accept&&this._vm.accept(e)===!0)return!0;if(this.children!==null){const{children:t}=this;for(let s=0,n=t.length;s<n;++s)if(t[s].accept(e)===!0)return!0}}}const Ds=new WeakMap,Af=0,di=1,pi=2,fi=3,Zy=hs({none:Af,host:di,shadowRoot:pi,location:fi}),e0={optional:!0},t0=mm(Ud);function gu(i,e,t){var a,l;const s=e.bindables,n=Up(s),r=n.length,o=i.container.get(xn);if(r>0)for(let c=0;c<r;++c){const u=n[c],h=s[u],d=h.callback,p=o.getObserver(t,u);if(h.set!==jt&&((a=p.useCoercer)==null?void 0:a.call(p,h.set,i.coercion))!==!0)throw E(507,u);if(t[d]!=null||t.propertyChanged!=null){const f=(_,g)=>{var v,m;i.isBound&&((v=t[d])==null||v.call(t,_,g),(m=t.propertyChanged)==null||m.call(t,u,_,g))};if(((l=p.useCallback)==null?void 0:l.call(p,f))!==!0)throw E(508,u)}}}const _u=new Map,s0=i=>{let e=_u.get(i);return e==null&&(e=new sr(i,0),_u.set(i,e)),e};function mu(i,e,t,s){const n=e.get(xn),r=e.get(Rr),o=t.watches,a=i.vmKind===pt?i.scope:De.create(s,null,!0),l=o.length;let c,u,h,d=0;for(;l>d;++d){if({expression:c,callback:u}=o[d],u=Y(u)?u:Reflect.get(s,u),!Y(u))throw E(506,u);Y(c)?i.addBinding(new kf(s,n,c,u,!0)):(h=ee(c)?r.parse(c,is):s0(c),i.addBinding(new El(a,e,n,h,u)))}}function i0(i){return i instanceof Qe&&i.vmKind===pt}function pa(i){return dn(i)&&Tf(i.constructor)}class rn{constructor(e){this._define="define"in e,this._hydrating="hydrating"in e,this._hydrated="hydrated"in e,this._created="created"in e,this._binding="binding"in e,this._bound="bound"in e,this._attaching="attaching"in e,this._attached="attached"in e,this._detaching="detaching"in e,this._unbinding="unbinding"in e,this._dispose="dispose"in e,this._accept="accept"in e}}rn.none=new rn({});const n0={mode:"open"},pt="customElement",gi="customAttribute",qe="synthetic",za=0,mt=1,wi=2,cr=4,on=8,an=16,Ns=32;function r0(i){const e=[];return(i&mt)===mt&&e.push("activating"),(i&wi)===wi&&e.push("activated"),(i&cr)===cr&&e.push("deactivating"),(i&on)===on&&e.push("deactivated"),(i&an)===an&&e.push("released"),(i&Ns)===Ns&&e.push("disposed"),e.length===0?"none":e.join("|")}const Dr=re("IController"),Vi=re("IHydrationContext");class $f{constructor(e,t,s){this.instruction=t,this.parent=s,this.controller=e}}function o0(i){i.dispose()}function vu(i){i.instance.created(this._vm,this)}function a0(i){i.instance.hydrating(this._vm,this)}function l0(i){i.instance.hydrated(this._vm,this)}function c0(i){return i.instance.binding(this._vm,this.$initiator,this.parent)}function h0(i){return i.instance.bound(this._vm,this.$initiator,this.parent)}function u0(i){return i.instance.attaching(this._vm,this.$initiator,this.parent)}function d0(i){return i.instance.attached(this._vm,this.$initiator)}function p0(i){return i.instance.detaching(this._vm,this.$initiator,this.parent)}function f0(i){return i.instance.unbinding(this._vm,this.$initiator,this.parent)}let Ha,Ua,ci;class g0{}function ki(i,e){var t;return((t=i.$au)==null?void 0:t[e])??null}function st(i,e,t){(i.$au??(i.$au=new g0))[e]=t}const zi=re("INode"),_0=re("IEventTarget",i=>i.cachedCallback(e=>e.has(bn,!0)?e.get(bn).host:e.get(Ne).document)),lt=re("IRenderLocation"),xo=re("ICssClassMapping"),To=new WeakMap;function Io(i){if(To.has(i))return To.get(i);let e=0,t=i.nextSibling;for(;t!==null;){if(t.nodeType===8)switch(t.textContent){case"au-start":++e;break;case"au-end":if(e--===0)return t}t=t.nextSibling}if(i.parentNode===null&&i.nodeType===11){const s=Si(i,{optional:!0});if(s==null)return null;if(s.mountTarget===Zy.shadowRoot)return Io(s.host)}return i.parentNode}function m0(i,e){if(i.platform!==void 0&&!(i instanceof i.platform.Node)){const t=i.childNodes;for(let s=0,n=t.length;s<n;++s)To.set(t[s],e)}else To.set(i,e)}function vr(i){if(Sf(i))return i;const e=i.ownerDocument.createComment("au-end"),t=e.$start=i.ownerDocument.createComment("au-start"),s=i.parentNode;return s!==null&&(s.replaceChild(e,i),s.insertBefore(t,e)),e}function Sf(i){return i.textContent==="au-end"}class Wa{get firstChild(){return this._firstChild}get lastChild(){return this._lastChild}constructor(e,t){this.platform=e,this.next=void 0,this._isMounted=!1,this._isLinked=!1,this.ref=null;const s=(this.f=t).querySelectorAll("au-m");let n=0,r=s.length,o=this.t=Array(r),a,l;for(;r>n;)l=s[n],a=l.nextSibling,l.remove(),a.nodeType===8&&(l=a,(a=a.nextSibling).$start=l),o[n]=a,++n;const c=t.childNodes,u=this.childNodes=Array(r=c.length);for(n=0;r>n;)u[n]=c[n],++n;this._firstChild=t.firstChild,this._lastChild=t.lastChild}findTargets(){return this.t}insertBefore(e){if(this._isLinked&&this.ref)this.addToLinked();else{const t=e.parentNode;if(this._isMounted){let s=this._firstChild,n;const r=this._lastChild;for(;s!=null&&(n=s.nextSibling,t.insertBefore(s,e),s!==r);)s=n}else this._isMounted=!0,e.parentNode.insertBefore(this.f,e)}}appendTo(e,t=!1){if(this._isMounted){let s=this._firstChild,n;const r=this._lastChild;for(;s!=null&&(n=s.nextSibling,e.appendChild(s),s!==r);)s=n}else this._isMounted=!0,t||e.appendChild(this.f)}remove(){if(this._isMounted){this._isMounted=!1;const e=this.f,t=this._lastChild;let s,n=this._firstChild;for(;n!==null&&(s=n.nextSibling,e.appendChild(n),n!==t);)n=s}}addToLinked(){const e=this.ref,t=e.parentNode;if(this._isMounted){let s=this._firstChild,n;const r=this._lastChild;for(;s!=null&&(n=s.nextSibling,t.insertBefore(s,e),s!==r);)s=n}else this._isMounted=!0,t.insertBefore(this.f,e)}unlink(){this._isLinked=!1,this.next=void 0,this.ref=void 0}link(e){this._isLinked=!0,Sf(e)?this.ref=e:(this.next=e,this._obtainRefNode())}_obtainRefNode(){this.next!==void 0?this.ref=this.next.firstChild:this.ref=void 0}}const Br=re("IWindow",i=>i.callback(e=>e.get(Ne).window)),v0=re("ILocation",i=>i.callback(e=>e.get(Br).location)),b0=re("IHistory",i=>i.callback(e=>e.get(Br).history)),Nr=(i,e,t=i.get(Ne))=>(_e(i,t.HTMLElement,_e(i,t.Element,_e(i,zi,new $e("ElementResolver",e)))),i);function Os(i){return function(e,t){return t.addInitializer(function(){xf(i,this)}),e}}const qa=new WeakMap;class ot{get type(){return Yw}constructor(e,t,s,n,r,o,a,l,c,u,h,d,p,f,_,g,v,m){this.Type=e,this.name=t,this.aliases=s,this.key=n,this.capture=r,this.template=o,this.instructions=a,this.dependencies=l,this.injectable=c,this.needsCompile=u,this.surrogates=h,this.bindables=d,this.containerless=p,this.shadowOptions=f,this.hasSlots=_,this.enhance=g,this.watches=v,this.processContent=m}static create(e,t=null){if(t===null){const n=e;if(ee(n))throw E(761,e);const r=Qt("name",n,Po);Y(n.Type)?t=n.Type:t=Pf(fd(r));for(const o of Object.values(ft.from(n.bindables)))ft._add(o,t);return new ot(t,r,Ee(n.aliases),Qt("key",n,()=>Xi(r)),Vt("capture",n,t,kt),Qt("template",n,Ct),Ee(n.instructions),Ee(dt(t,"dependencies"),n.dependencies),Qt("injectable",n,Ct),Qt("needsCompile",n,Ka),Ee(n.surrogates),ft.from(dt(t,"bindables"),n.bindables),Vt("containerless",n,t,kt),Qt("shadowOptions",n,Ct),Qt("hasSlots",n,kt),Qt("enhance",n,kt),Qt("watches",n,y0),Gt("processContent",t,Ct))}if(ee(e))return new ot(t,e,Ee(dt(t,"aliases"),t.aliases),Xi(e),Gt("capture",t,kt),Gt("template",t,Ct),Ee(dt(t,"instructions"),t.instructions),Ee(dt(t,"dependencies"),t.dependencies),Gt("injectable",t,Ct),Gt("needsCompile",t,Ka),Ee(dt(t,"surrogates"),t.surrogates),ft.from(...ft.getAll(t),dt(t,"bindables"),t.bindables),Gt("containerless",t,kt),Gt("shadowOptions",t,Ct),Gt("hasSlots",t,kt),Gt("enhance",t,kt),Ee(Tl.getDefinitions(t),t.watches),Gt("processContent",t,Ct));const s=Qt("name",e,Po);for(const n of Object.values(ft.from(e.bindables)))ft._add(n,t);return new ot(t,s,Ee(dt(t,"aliases"),e.aliases,t.aliases),Xi(s),Vt("capture",e,t,kt),Vt("template",e,t,Ct),Ee(dt(t,"instructions"),e.instructions,t.instructions),Ee(dt(t,"dependencies"),e.dependencies,t.dependencies),Vt("injectable",e,t,Ct),Vt("needsCompile",e,t,Ka),Ee(dt(t,"surrogates"),e.surrogates,t.surrogates),ft.from(...ft.getAll(t),dt(t,"bindables"),t.bindables,e.bindables),Vt("containerless",e,t,kt),Vt("shadowOptions",e,t,Ct),Vt("hasSlots",e,t,kt),Vt("enhance",e,t,kt),Ee(e.watches,Tl.getDefinitions(t),t.watches),Vt("processContent",e,t,Ct))}static getOrCreate(e){if(e instanceof ot)return e;if(qa.has(e))return qa.get(e);const t=ot.create(e);return qa.set(e,t),Ut(t,t.Type,He),t}register(e,t){const s=this.Type,n=typeof t=="string"?Xi(t):this.key,r=this.aliases;if(e.has(n,!1)){console.warn(E(153,this.name));return}e.register(e.has(s,!1)?null:ds(s,s),Qs(s,n),...r.map(o=>Qs(s,Xi(o))))}toString(){return`au:ce:${this.name}`}}const w0={name:void 0,searchParents:!1,optional:!1},Ct=()=>null,kt=()=>!1,Ka=()=>!0,y0=()=>U,Di="custom-element",He=Xs(Di),Xi=i=>`${He}:${i}`,Po=(i=>()=>`unnamed-${++i}`)(0),C0=(i,e,t)=>{Ut(t,i,Es(e))},xf=(i,e)=>{const t=ot.create(i,e),s=t.Type;return Ut(t,s,He,Nt),s},Tf=i=>{var e;return Y(i)&&(ia(He,i)||((e=i.$au)==null?void 0:e.type)===Di)},Si=(i,e=w0)=>{if(e.name===void 0&&e.searchParents!==!0){const s=ki(i,He);if(s===null){if(e.optional===!0)return null;throw E(762,i)}return s}if(e.name!==void 0){if(e.searchParents!==!0){const r=ki(i,He);if(r===null)throw E(763,i);return r.is(e.name)?r:void 0}let s=i,n=!1;for(;s!==null;){const r=ki(s,He);if(r!==null&&(n=!0,r.is(e.name)))return r;s=Io(s)}if(n)return;throw E(764,i)}let t=i;for(;t!==null;){const s=ki(t,He);if(s!==null)return s;t=Io(t)}throw E(765,i)},dt=(i,e)=>Xe(Es(e),i),If=i=>{const e=Xe(He,i)??Js(i,Di,ot.create);if(e==null)throw E(760,i);return e},k0=()=>{const i={$isInterface:!1,register(){return{$isResolver:!0,resolve(e,t){return t.has(i,!0)?t.get(i):null}}}};return i},Pf=function(){const i={value:"",writable:!1,enumerable:!1,configurable:!0},e={};return function(t,s=e){const n=class{};return i.value=t,So(n,"name",i),s!==e&&Hp(n.prototype,s),n}}(),ie=hs({name:He,keyFrom:Xi,isType:Tf,for:Si,define:xf,getDefinition:If,annotate:C0,getAnnotation:dt,generateName:Po,createInjectable:k0,generateType:Pf,find(i,e){const t=i.find(Di,e);return t==null?null:Xe(He,t)??Js(t,Di,ot.create)??null}}),bn=re("IAppRoot");class bu{get controller(){return this._controller}constructor(e,t,s,n=!1){this.config=e,this.container=t,this._hydratePromise=void 0,this._useOwnAppTasks=n;const r=this.host=e.host;s.prepare(this),_e(t,_0,new $e("IEventTarget",r)),Nr(t,r,this.platform=this._createPlatform(t,r)),this._hydratePromise=L(this._runAppTasks("creating"),()=>{e.allowActionlessForm||r.addEventListener("submit",d=>{const p=d.target,f=!p.getAttribute("action");p.tagName==="FORM"&&f&&d.preventDefault()},!1);const o=n?t:t.createChild(),a=e.component;let l;Y(a)?l=o.invoke(a):l=e.component;const c={hydrate:!1,projections:null},u=n?ot.create({name:Po(),template:this.host,enhance:!0}):void 0,h=this._controller=Qe.$el(o,l,r,c,u);return h._hydrateCustomElement(c,null),L(this._runAppTasks("hydrating"),()=>(h._hydrate(),L(this._runAppTasks("hydrated"),()=>{h._hydrateChildren(),this._hydratePromise=void 0})))})}activate(){return L(this._hydratePromise,()=>L(this._runAppTasks("activating"),()=>L(this._controller.activate(this._controller,null,void 0),()=>this._runAppTasks("activated"))))}deactivate(){return L(this._runAppTasks("deactivating"),()=>L(this._controller.deactivate(this._controller,null),()=>this._runAppTasks("deactivated")))}_runAppTasks(e){const t=this.container,s=this._useOwnAppTasks&&!t.has(xl,!1)?[]:t.getAll(xl);return oe(...s.reduce((n,r)=>(r.slot===e&&n.push(r.run()),n),[]))}_createPlatform(e,t){let s;if(e.has(Ne,!1))s=e.get(Ne);else{if(t.ownerDocument.defaultView===null)throw E(769);s=new Hs(t.ownerDocument.defaultView),e.register(Sc(Ne,s))}return s}dispose(){var e;(e=this._controller)==null||e.dispose()}}const wu=re("IAurelia");let A0=class Rl{get isRunning(){return this._isRunning}get isStarting(){return this._isStarting}get isStopping(){return this._isStopping}get root(){if(this._root==null){if(this.next==null)throw E(767);return this.next}return this._root}constructor(e=ut.createContainer()){if(this.container=e,this._isRunning=!1,this._isStarting=!1,this._isStopping=!1,this._root=void 0,this.next=void 0,this._startPromise=void 0,this._stopPromise=void 0,e.has(wu,!0)||e.has(Rl,!0))throw E(768);_e(e,wu,new $e("IAurelia",this)),_e(e,Rl,new $e("Aurelia",this)),_e(e,bn,this._rootProvider=new $e("IAppRoot"))}register(...e){return this.container.register(...e),this}app(e){return this.next=new bu(e,this.container,this._rootProvider),this}enhance(e){const t=e.container??this.container.createChild(),s=_e(t,bn,new $e("IAppRoot")),n=new bu({host:e.host,component:e.component},t,s,!0);return L(n.activate(),()=>n)}async waitForIdle(){const e=this.root.platform;await e.domQueue.yield(),await e.taskQueue.yield()}start(e=this.next){if(e==null)throw E(770);return Te(this._startPromise)?this._startPromise:this._startPromise=L(this.stop(),()=>(Reflect.set(e.host,"$aurelia",this),this._rootProvider.prepare(this._root=e),this._isStarting=!0,L(e.activate(),()=>{this._isRunning=!0,this._isStarting=!1,this._startPromise=void 0,this._dispatchEvent(e,"au-started",e.host)})))}stop(e=!1){if(Te(this._stopPromise))return this._stopPromise;if(this._isRunning===!0){const t=this._root;return this._isRunning=!1,this._isStopping=!0,this._stopPromise=L(t.deactivate(),()=>{Reflect.deleteProperty(t.host,"$aurelia"),e&&t.dispose(),this._root=void 0,this._rootProvider.dispose(),this._isStopping=!1,this._dispatchEvent(t,"au-stopped",t.host)})}}dispose(){if(this._isRunning||this._isStopping)throw E(771);this.container.dispose()}_dispatchEvent(e,t,s){const n=new e.platform.window.CustomEvent(t,{detail:this,bubbles:!0,cancelable:!0});s.dispatchEvent(n)}};const Ef=re("ISVGAnalyzer",i=>i.singleton($0));class $0{isStandardSvgAttribute(e,t){return!1}}class Rf{constructor(){this.fns=[],this._tagAttrMap=ae(),this._globalAttrMap=ae(),this.svg=S(Ef),this.useMapping({LABEL:{for:"htmlFor"},IMG:{usemap:"useMap"},INPUT:{maxlength:"maxLength",minlength:"minLength",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",inputmode:"inputMode"},TEXTAREA:{maxlength:"maxLength"},TD:{rowspan:"rowSpan",colspan:"colSpan"},TH:{rowspan:"rowSpan",colspan:"colSpan"}}),this.useGlobalMapping({accesskey:"accessKey",contenteditable:"contentEditable",tabindex:"tabIndex",textcontent:"textContent",innerhtml:"innerHTML",scrolltop:"scrollTop",scrollleft:"scrollLeft",readonly:"readOnly"})}useMapping(e){var o;let t,s,n,r;for(n in e){t=e[n],s=(o=this._tagAttrMap)[n]??(o[n]=ae());for(r in t){if(s[r]!==void 0)throw yu(r,n);s[r]=t[r]}}}useGlobalMapping(e){const t=this._globalAttrMap;for(const s in e){if(t[s]!==void 0)throw yu(s,"*");t[s]=e[s]}}useTwoWay(e){this.fns.push(e)}isTwoWay(e,t){return S0(e,t)||this.fns.length>0&&this.fns.some(s=>s(e,t))}map(e,t){var s;return((s=this._tagAttrMap[e.nodeName])==null?void 0:s[t])??this._globalAttrMap[t]??($l(e,t,this.svg)?t:null)}}Rf.register=Ko(Xd);function S0(i,e){switch(i.nodeName){case"INPUT":switch(i.type){case"checkbox":case"radio":return e==="checked";default:return e==="value"||e==="files"||e==="value-as-number"||e==="value-as-date"}case"TEXTAREA":case"SELECT":return e==="value";default:switch(e){case"textcontent":case"innerhtml":return i.hasAttribute("contenteditable");case"scrolltop":case"scrollleft":return!0;default:return!1}}}function yu(i,e){return E(719,i,e)}const x0={register(i){i.register(Bp,Rf,Of)}};class T0{constructor(e,t,s){this.attrs=e,this.bindables=t,this.primary=s}}class Of{constructor(){this._resourceCache=new WeakMap,this._bindableCache=new WeakMap}el(e,t){let s=this._resourceCache.get(e);return s==null&&this._resourceCache.set(e,s=new Cu),t in s._element?s._element[t]:s._element[t]=ie.find(e,t)}attr(e,t){let s=this._resourceCache.get(e);return s==null&&this._resourceCache.set(e,s=new Cu),t in s._attr?s._attr[t]:s._attr[t]=Vr.find(e,t)}bindables(e){let t=this._bindableCache.get(e);if(t==null){const s=e.bindables,n=ae();let r,o,a=!1,l,c;for(o in s){if(r=s[o],c=r.attribute,r.primary===!0){if(a)throw E(714,e);a=!0,l=r}else!a&&l==null&&(l=r);n[c]=ys.create(o,r)}r==null&&e.type==="custom-attribute"&&(l=n.value=ys.create("value",{mode:e.defaultBindingMode??$c})),this._bindableCache.set(e,t=new T0(n,s,l??null))}return t}}Of.register=Ko(Np);class Cu{constructor(){this._element=ae(),this._attr=ae()}}const Ga=ae();class br{static forNs(e){return Ga[e]??(Ga[e]=new br(e))}constructor(e){this.ns=e,this.type=ei|us}getValue(e,t){return e.getAttributeNS(this.ns,t)}setValue(e,t,s){e==null?t.removeAttributeNS(this.ns,s):t.setAttributeNS(this.ns,s,e)}}ha(br);class Lf{constructor(){this.type=ei|us}getValue(e,t){return e.getAttribute(t)}setValue(e,t,s){e==null?t.removeAttribute(s):t.setAttribute(s,e)}}ha(Lf);const uo=new Lf;class xi{static _getSelectedOptions(e){const t=[];if(e.length===0)return t;const s=e.length;let n=0,r;for(;s>n;)r=e[n],r.selected&&(t[t.length]=Ci.call(r,"model")?r.model:r.value),++n;return t}static _defaultMatcher(e,t){return e===t}constructor(e,t,s,n){this.type=ei|Ac|us,this._value=void 0,this._oldValue=void 0,this._hasChanges=!1,this._arrayObserver=void 0,this._nodeObserver=void 0,this._observing=!1,this._listened=!1,this._el=e,this._observerLocator=n,this._config=s}getValue(){return this._observing?this._value:this._el.multiple?xi._getSelectedOptions(this._el.options):this._el.value}setValue(e){this._oldValue=this._value,this._value=e,this._hasChanges=e!==this._oldValue,this._observeArray(e instanceof Array?e:null),this._flushChanges()}_flushChanges(){this._hasChanges&&(this._hasChanges=!1,this.syncOptions())}handleCollectionChange(){this.syncOptions()}syncOptions(){const e=this._value,t=this._el,s=Ie(e),n=t.matcher??xi._defaultMatcher,r=t.options;let o=r.length;for(;o-- >0;){const a=r[o],l=Ci.call(a,"model")?a.model:a.value;if(s){a.selected=e.findIndex(c=>!!n(l,c))!==-1;continue}a.selected=!!n(l,e)}}syncValue(){const e=this._el,t=e.options,s=t.length,n=this._value;let r=0;if(e.multiple){if(!(n instanceof Array))return!0;let l;const c=e.matcher||xi._defaultMatcher,u=[];for(;r<s;)l=t[r],l.selected&&u.push(Ci.call(l,"model")?l.model:l.value),++r;let h;for(r=0;r<n.length;)h=n[r],u.findIndex(d=>!!c(h,d))===-1?n.splice(r,1):++r;for(r=0;r<u.length;)h=u[r],n.findIndex(d=>!!c(h,d))===-1&&n.push(h),++r;return!1}let o=null,a;for(;r<s;){if(a=t[r],a.selected){o=Ci.call(a,"model")?a.model:a.value;break}++r}return this._oldValue=this._value,this._value=o,!0}_start(){(this._nodeObserver=af(this._el,this._handleNodeChange.bind(this))).observe(this._el,{childList:!0,subtree:!0,characterData:!0}),this._observeArray(this._value instanceof Array?this._value:null),this._observing=!0}_stop(){var e;this._nodeObserver.disconnect(),(e=this._arrayObserver)==null||e.unsubscribe(this),this._nodeObserver=this._arrayObserver=void 0,this._observing=!1}_observeArray(e){var t;if((t=this._arrayObserver)==null||t.unsubscribe(this),this._arrayObserver=void 0,e!=null){if(!this._el.multiple)throw E(654);(this._arrayObserver=this._observerLocator.getArrayObserver(e)).subscribe(this)}}handleEvent(){this.syncValue()&&this._flush()}_handleNodeChange(e){this.syncOptions(),this.syncValue()&&this._flush()}_flush(){const e=this._oldValue;this._oldValue=this._value,this.subs.notify(this._value,e)}}Lc(xi),It(xi,null);const I0="--";class Vf{constructor(e){this.obj=e,this.type=ei|us,this._value="",this._oldValue="",this.styles={},this.version=0,this._hasChanges=!1}getValue(){return this.obj.style.cssText}setValue(e){this._value=e,this._hasChanges=e!==this._oldValue,this._flushChanges()}_getStyleTuplesFromString(e){const t=[],s=/url\([^)]+$/;let n=0,r="",o,a,l,c;for(;n<e.length;){if(o=e.indexOf(";",n),o===-1&&(o=e.length),r+=e.substring(n,o),n=o+1,s.test(r)){r+=";";continue}a=r.indexOf(":"),l=r.substring(0,a).trim(),c=r.substring(a+1).trim(),t.push([l,c]),r=""}return t}_getStyleTuplesFromObject(e){let t,s;const n=[];for(s in e)if(t=e[s],t!=null){if(ee(t)){if(s.startsWith(I0)){n.push([s,t]);continue}n.push([gd(s),t]);continue}n.push(...this._getStyleTuples(t))}return n}_getStyleTuplesFromArray(e){const t=e.length;if(t>0){const s=[];let n=0;for(;t>n;++n)s.push(...this._getStyleTuples(e[n]));return s}return U}_getStyleTuples(e){return ee(e)?this._getStyleTuplesFromString(e):e instanceof Array?this._getStyleTuplesFromArray(e):e instanceof Object?this._getStyleTuplesFromObject(e):U}_flushChanges(){if(this._hasChanges){this._hasChanges=!1;const e=this._value,t=this.styles,s=this._getStyleTuples(e);let n,r=this.version;this._oldValue=e;let o,a,l,c=0;const u=s.length;for(;c<u;++c)o=s[c],a=o[0],l=o[1],this.setProperty(a,l),t[a]=r;if(this.styles=t,this.version+=1,r===0)return;r-=1;for(n in t)!Ci.call(t,n)||t[n]!==r||this.obj.style.removeProperty(n)}}setProperty(e,t){let s="";t!=null&&Y(t.indexOf)&&t.includes("!important")&&(s="important",t=t.replace("!important","")),this.obj.style.setProperty(e,t,s)}bind(){this._value=this._oldValue=this.obj.style.cssText}}ha(Vf);class Ol{constructor(e,t,s){this.type=ei|Ac|us,this._value="",this._oldValue="",this._hasChanges=!1,this._listened=!1,this._el=e,this._key=t,this._config=s}getValue(){return this._value}setValue(e){Ks(e,this._value)||(this._oldValue=this._value,this._value=e,this._hasChanges=!0,this._config.readonly||this._flushChanges())}_flushChanges(){this._hasChanges&&(this._hasChanges=!1,this._el[this._key]=this._value??this._config.default,this._flush())}handleEvent(){this._oldValue=this._value,this._value=this._el[this._key],this._oldValue!==this._value&&(this._hasChanges=!1,this._flush())}_start(){this._value=this._oldValue=this._el[this._key]}_flush(){const e=this._oldValue;this._oldValue=this._value,this.subs.notify(this._value,e)}}Lc(Ol),It(Ol,null);const ku=(()=>{const i="http://www.w3.org/1999/xlink",e="http://www.w3.org/XML/1998/namespace",t="http://www.w3.org/2000/xmlns/";return Hp(ae(),{"xlink:actuate":["actuate",i],"xlink:arcrole":["arcrole",i],"xlink:href":["href",i],"xlink:role":["role",i],"xlink:show":["show",i],"xlink:title":["title",i],"xlink:type":["type",i],"xml:lang":["lang",e],"xml:space":["space",e],xmlns:["xmlns",t],"xmlns:xlink":["xlink",t]})})(),Df=new Qd;Df.type=ei|us;class Vc{constructor(){this.allowDirtyCheck=!0,this._events=ae(),this._globalEvents=ae(),this._overrides=ae(),this._globalOverrides=ae(),this._locator=S(dm),this._platform=S(Ne),this._dirtyChecker=S(uc),this.svg=S(Ef);const e=["change","input"],t={events:e,default:""};this.useConfig({INPUT:{value:t,valueAsNumber:{events:e,default:0},checked:{type:Ll,events:e},files:{events:e,readonly:!0}},SELECT:{value:{type:xi,events:["change"],default:""}},TEXTAREA:{value:t}});const s={events:["change","input","blur","keyup","paste"],default:""},n={events:["scroll"],default:0};this.useConfigGlobal({scrollTop:n,scrollLeft:n,textContent:s,innerHTML:s}),this.overrideAccessorGlobal("css","style","class"),this.overrideAccessor({INPUT:["value","checked","model"],SELECT:["value"],TEXTAREA:["value"]})}handles(e,t){return e instanceof this._platform.Node}useConfig(e,t,s){const n=this._events;let r;if(ee(e))r=n[e]??(n[e]=ae()),r[t]==null?r[t]=s:Zr(e,t);else for(const o in e){r=n[o]??(n[o]=ae());const a=e[o];for(t in a)r[t]==null?r[t]=a[t]:Zr(o,t)}}useConfigGlobal(e,t){const s=this._globalEvents;if(typeof e=="object")for(const n in e)s[n]==null?s[n]=e[n]:Zr("*",n);else s[e]==null?s[e]=t:Zr("*",e)}getAccessor(e,t,s){if(t in this._globalOverrides||t in(this._overrides[e.tagName]??$t))return this.getObserver(e,t,s);switch(t){case"src":case"href":case"role":case"minLength":case"maxLength":case"placeholder":case"size":case"pattern":case"title":case"popovertarget":case"popovertargetaction":return(t==="popovertarget"||t==="popovertargetaction")&&e.nodeName!=="INPUT"&&e.nodeName!=="BUTTON"&&console.warn(`[aurelia] Popover API are only valid on <input> or <button>. Detected ${t} on <${e.nodeName.toLowerCase()}>`),uo;default:{const n=ku[t];return n!==void 0?br.forNs(n[1]):$l(e,t,this.svg)?uo:Df}}}overrideAccessor(e,t){var n,r;let s;if(ee(e))s=(n=this._overrides)[e]??(n[e]=ae()),s[t]=!0;else for(const o in e)for(const a of e[o])s=(r=this._overrides)[o]??(r[o]=ae()),s[a]=!0}overrideAccessorGlobal(...e){for(const t of e)this._globalOverrides[t]=!0}getNodeObserverConfig(e,t){var s;return((s=this._events[e.tagName])==null?void 0:s[t])??this._globalEvents[t]}getNodeObserver(e,t,s){var o;const n=((o=this._events[e.tagName])==null?void 0:o[t])??this._globalEvents[t];let r;return n!=null?(r=new(n.type??Ol)(e,t,n,s,this._locator),r.doNotCache||(Jd(e)[t]=r),r):null}getObserver(e,t,s){switch(t){case"class":return new ua(e);case"css":case"style":return new Vf(e)}const n=this.getNodeObserver(e,t,s);if(n!=null)return n;const r=ku[t];if(r!==void 0)return br.forNs(r[1]);if($l(e,t,this.svg))return uo;if(t in e.constructor.prototype){if(this.allowDirtyCheck)return this._dirtyChecker.createProperty(e,t);throw E(652,t)}else return new dc(e,t)}}Vc.register=Ko(pc);function P0(i,e){if(i instanceof Array)return e.getArrayObserver(i);if(i instanceof Map)return e.getMapObserver(i);if(i instanceof Set)return e.getSetObserver(i)}function Zr(i,e){throw E(653,i,e)}function Au(i,e){return i===e}class Ll{constructor(e,t,s,n){this.type=ei|Ac|us,this._value=void 0,this._oldValue=void 0,this._collectionObserver=void 0,this._valueObserver=void 0,this._listened=!1,this._el=e,this.oL=n,this._config=s}getValue(){return this._value}setValue(e){const t=this._value;e!==t&&(this._value=e,this._oldValue=t,this._observe(),this._synchronizeElement(),this._flush())}handleCollectionChange(){this._synchronizeElement()}handleChange(e,t){this._synchronizeElement()}_synchronizeElement(){const e=this._value,t=this._el,s=Ci.call(t,"model")?t.model:t.value,n=t.type==="radio",r=t.matcher!==void 0?t.matcher:Au;if(n)t.checked=!!r(e,s);else if(e===!0)t.checked=!0;else{let o=!1;if(Ie(e))o=e.findIndex(a=>!!r(a,s))!==-1;else if(e instanceof Set){for(const a of e)if(r(a,s)){o=!0;break}}else if(e instanceof Map)for(const a of e){const l=a[0],c=a[1];if(r(l,s)&&c===!0){o=!0;break}}t.checked=o}}handleEvent(){let e=this._oldValue=this._value;const t=this._el,s=Ci.call(t,"model")?t.model:t.value,n=t.checked,r=t.matcher!==void 0?t.matcher:Au;if(t.type==="checkbox"){if(Ie(e)){const o=e.findIndex(a=>!!r(a,s));n&&o===-1?e.push(s):!n&&o!==-1&&e.splice(o,1);return}else if(e instanceof Set){const o={};let a=o;for(const l of e)if(r(l,s)===!0){a=l;break}n&&a===o?e.add(s):!n&&a!==o&&e.delete(a);return}else if(e instanceof Map){let o;for(const a of e){const l=a[0];if(r(l,s)===!0){o=l;break}}e.set(o,n);return}e=n}else if(n)e=s;else return;this._value=e,this._flush()}_start(){this._observe()}_stop(){var e,t;(e=this._collectionObserver)==null||e.unsubscribe(this),(t=this._valueObserver)==null||t.unsubscribe(this),this._collectionObserver=this._valueObserver=void 0}_flush(){$u=this._oldValue,this._oldValue=this._value,this.subs.notify(this._value,$u)}_observe(){var t,s,n,r,o;const e=this._el;(n=this._valueObserver??(this._valueObserver=((t=e.$observers)==null?void 0:t.model)??((s=e.$observers)==null?void 0:s.value)))==null||n.subscribe(this),(r=this._collectionObserver)==null||r.unsubscribe(this),this._collectionObserver=void 0,e.type==="checkbox"&&((o=this._collectionObserver=P0(this._value,this.oL))==null||o.subscribe(this))}}Lc(Ll),It(Ll,null);let $u;class Bf{bind(e,t){if(!(t instanceof rt))throw E(9994,t);t.useTargetObserver(uo)}}Bf.$au={type:St,name:"attr"};class Nf{bind(e,t){if(!("handleEvent"in t))throw E(801);t.self=!0}unbind(e,t){t.self=!1}}Nf.$au={type:St,name:"self"};class Mf{constructor(){this._observerLocator=S(xn),this._nodeObserverLocator=S(pc)}bind(e,t,...s){if(!(this._nodeObserverLocator instanceof Vc))throw E(9993);if(s.length===0)throw E(802);if(!(t instanceof rt)||!(t.mode&Is))throw E(803);const n=this._nodeObserverLocator.getNodeObserverConfig(t.target,t.targetProperty);if(n==null)throw E(9992,t);const r=this._nodeObserverLocator.getNodeObserver(t.target,t.targetProperty,this._observerLocator);r.useConfig({readonly:n.readonly,default:n.default,events:s}),t.useTargetObserver(r)}}Mf.$au={type:St,name:"updateTrigger"};class Eo{constructor(){this.elseFactory=void 0,this.elseView=void 0,this.ifView=void 0,this.view=void 0,this.value=!1,this.cache=!0,this.pending=void 0,this._wantsDeactivate=!1,this._swapId=0,this._ifFactory=S(yt),this._location=S(lt)}attaching(e,t){return this._swap(this.value)}detaching(e,t){return this._wantsDeactivate=!0,L(this.pending,()=>{var s;this._wantsDeactivate=!1,this.pending=void 0,(s=this.view)==null||s.deactivate(e,this.$controller)})}valueChanged(e,t){if(this.$controller.isActive&&(e=!!e,t=!!t,e!==t))return this._swap(e)}_swap(e){const t=this.view,s=this.$controller,n=this._swapId++,r=()=>!this._wantsDeactivate&&this._swapId===n+1;let o;return L(this.pending,()=>this.pending=L(t==null?void 0:t.deactivate(t,s),()=>{var a;if(r()&&(e?o=this.view=this.ifView=this.cache&&this.ifView!=null?this.ifView:this._ifFactory.create():o=this.view=this.elseView=this.cache&&this.elseView!=null?this.elseView:(a=this.elseFactory)==null?void 0:a.create(),o!=null))return o.setLocation(this._location),L(o.activate(o,s,s.scope),()=>{r()&&(this.pending=void 0)})}))}dispose(){var e,t;(e=this.ifView)==null||e.dispose(),(t=this.elseView)==null||t.dispose(),this.ifView=this.elseView=this.view=void 0}accept(e){var t;if(((t=this.view)==null?void 0:t.accept(e))===!0)return!0}}Eo.$au={type:Ze,name:"if",isTemplateController:!0,bindables:{value:!0,cache:{set:i=>i===""||!!i&&i!=="false"}}};class jf{constructor(){this._factory=S(yt)}link(e,t,s,n){const r=e.children,o=r[r.length-1];if(o instanceof Eo)o.elseFactory=this._factory;else if(o.viewModel instanceof Eo)o.viewModel.elseFactory=this._factory;else throw E(810)}}jf.$au={type:"custom-attribute",name:"else",isTemplateController:!0};function E0(i){i.dispose()}const R0=["BindingBehavior","ValueConverter"];class Ff{constructor(){this.views=[],this._oldViews=[],this.key=null,this._keyMap=new Map,this._scopeMap=new Map,this._observer=void 0,this._observingInnerItems=!1,this._reevaluating=!1,this._innerItemsExpression=null,this._normalizedItems=void 0,this._hasDestructuredLocal=!1,this._location=S(lt),this._parent=S(Dr),this._factory=S(yt),this._resolver=S(L0);const t=S(In).props[0].props[0];if(t!==void 0){const{to:s,value:n,command:r}=t;if(s==="key")if(r===null)this.key=n;else if(r==="bind")this.key=S(Rr).parse(n,is);else throw E(775,r);else throw E(776,s)}}binding(e,t){const s=this._parent.bindings,n=s.length;let r,o,a=0;for(;n>a;++a)if(r=s[a],r.target===this&&r.targetProperty==="items"){o=this.forOf=r.ast,this._forOfBinding=r;let c=o.iterable;for(;c!=null&&R0.includes(c.$kind);)c=c.expression,this._observingInnerItems=!0;this._innerItemsExpression=c;break}this._refreshCollectionObserver();const l=o.declaration;(this._hasDestructuredLocal=l.$kind==="ArrayDestructuring"||l.$kind==="ObjectDestructuring")||(this.local=ye(l,this.$controller.scope,r,null))}attaching(e,t){return this._normalizeToArray(),this._activateAllViews(e,this._normalizedItems??U)}detaching(e,t){return this._refreshCollectionObserver(),this._deactivateAllViews(e)}unbinding(e,t){this._scopeMap.clear(),this._keyMap.clear()}itemsChanged(){this.$controller.isActive&&(this._refreshCollectionObserver(),this._normalizeToArray(),this._applyIndexMap(this.items,void 0))}handleCollectionChange(e,t){const s=this.$controller;if(s.isActive){if(this._observingInnerItems){if(this._reevaluating)return;this._reevaluating=!0,this.items=ye(this.forOf.iterable,s.scope,this._forOfBinding,null),this._reevaluating=!1;return}this._normalizeToArray(),this._applyIndexMap(e,t)}}_applyIndexMap(e,t){const s=this.views;this._oldViews=s.slice();const n=s.length,r=this.key,o=r!==null;if(o||t===void 0){const a=this.local,l=this._normalizedItems,c=l.length,u=this.forOf,h=u.declaration,d=this._forOfBinding,p=this._hasDestructuredLocal;t=Ri(c);let f=0;if(n===0)for(;f<c;++f)t[f]=-2;else if(c===0)if(p)for(f=0;f<n;++f)t.deletedIndices.push(f),t.deletedItems.push(ye(h,s[f].scope,d,null));else for(f=0;f<n;++f)t.deletedIndices.push(f),t.deletedItems.push(s[f].scope.bindingContext[a]);else{const _=Array(n);if(p)for(f=0;f<n;++f)_[f]=ye(h,s[f].scope,d,null);else for(f=0;f<n;++f)_[f]=s[f].scope.bindingContext[a];let g,v,m,A,w=0;const k=n-1,O=c-1,R=new Map,N=new Map,V=this._keyMap,M=this._scopeMap,K=this.$controller.scope;f=0;e:{for(;;){if(o?(g=_[f],v=l[f],m=Ki(V,r,g,hi(M,g,u,K,d,a,p),d),A=Ki(V,r,v,hi(M,v,u,K,d,a,p),d)):(g=m=ui(_[f],f),v=A=ui(l[f],f)),m!==A){V.set(g,m),V.set(v,A);break}if(++f,f>k||f>O)break e}if(k!==O)break e;for(w=O;;){if(o?(g=_[w],v=l[w],m=Ki(V,r,g,hi(M,g,u,K,d,a,p),d),A=Ki(V,r,v,hi(M,v,u,K,d,a,p),d)):(g=m=ui(_[f],f),v=A=ui(l[f],f)),m!==A){V.set(g,m),V.set(v,A);break}if(--w,f>w)break e}}const xe=f,me=f;for(f=me;f<=O;++f)V.has(v=o?l[f]:ui(l[f],f))?A=V.get(v):(A=o?Ki(V,r,v,hi(M,v,u,K,d,a,p),d):v,V.set(v,A)),N.set(A,f);for(f=xe;f<=k;++f)V.has(g=o?_[f]:ui(_[f],f))?m=V.get(g):m=o?Ki(V,r,g,s[f].scope,d):g,R.set(m,f),N.has(m)?t[N.get(m)]=f:(t.deletedIndices.push(f),t.deletedItems.push(g));for(f=me;f<=O;++f)R.has(V.get(o?l[f]:ui(l[f],f)))||(t[f]=-2);R.clear(),N.clear()}}if(t===void 0){const a=L(this._deactivateAllViews(null),()=>this._activateAllViews(null,this._normalizedItems??U));Te(a)&&a.catch($o)}else if(t.deletedIndices.length>0){const a=L(this._deactivateAndRemoveViewsByKey(t),()=>this._createAndActivateAndSortViewsByKey(n,t));Te(a)&&a.catch($o)}else this._createAndActivateAndSortViewsByKey(n,t)}_refreshCollectionObserver(){var o,a;const e=this.$controller.scope;let t=this._innerItems,s=this._observingInnerItems,n;s&&(t=this._innerItems=ye(this._innerItemsExpression,e,this._forOfBinding,null)??null,s=this._observingInnerItems=!Ks(this.items,t));const r=this._observer;if(this.$controller.isActive){const l=s?t:this.items;n=this._observer=(a=(o=this._resolver.resolve(l)).getObserver)==null?void 0:a.call(o,l),r!==n&&(r==null||r.unsubscribe(this),n==null||n.subscribe(this))}else r==null||r.unsubscribe(this),this._observer=void 0}_normalizeToArray(){const e=this.items;if(Ie(e)){this._normalizedItems=e.slice(0);return}const t=[];this._resolver.resolve(e).iterate(e,(s,n)=>{t[n]=s}),this._normalizedItems=t}_activateAllViews(e,t){let s,n,r,o;const{$controller:a,_factory:l,local:c,_location:u,_scopeMap:h,_forOfBinding:d,forOf:p,_hasDestructuredLocal:f}=this,_=a.scope,g=t.length,v=this.views=Array(g);if(t.forEach((m,A)=>{r=v[A]=l.create().setLocation(u),r.nodes.unlink(),o=hi(h,m,p,_,d,c,f),to(o.overrideContext,A,g),n=r.activate(e??r,a,o),Te(n)&&(s??(s=[])).push(n)}),s!==void 0)return s.length===1?s[0]:Promise.all(s)}_deactivateAllViews(e){let t,s,n,r=0;const{views:o,$controller:a}=this,l=o.length;for(;l>r;++r)n=o[r],n.release(),s=n.deactivate(e??n,a),Te(s)&&(t??(t=[])).push(s);if(t!==void 0)return t.length===1?t[0]:Promise.all(t)}_deactivateAndRemoveViewsByKey(e){let t,s,n;const{$controller:r,views:o}=this,a=e.deletedIndices.slice().sort(N0),l=a.length;let c=0;for(;l>c;++c)n=o[a[c]],n.release(),s=n.deactivate(n,r),Te(s)&&(t??(t=[])).push(s);for(c=0;l>c;++c)o.splice(a[c]-c,1);if(t!==void 0)return t.length===1?t[0]:Promise.all(t)}_createAndActivateAndSortViewsByKey(e,t){let s,n,r,o,a=0;const{$controller:l,_factory:c,local:u,_normalizedItems:h,_location:d,views:p,_hasDestructuredLocal:f,_forOfBinding:_,_scopeMap:g,_oldViews:v,forOf:m}=this,A=t.length;for(;A>a;++a)t[a]===-2&&(r=c.create(),p.splice(a,0,r));if(p.length!==A)throw E(814,[p.length,A]);const w=l.scope,k=t.length;let O=0;for(a=0;a<t.length;++a)(O=t[a])!==-2&&(p[a]=v[O]);const R=O0(t),N=R.length,V=m.declaration;let M,K=N-1;for(a=k-1;a>=0;--a)r=p[a],M=p[a+1],r.nodes.link((M==null?void 0:M.nodes)??d),t[a]===-2?(o=hi(g,h[a],m,w,_,u,f),to(o.overrideContext,a,k),r.setLocation(d),n=r.activate(r,l,o),Te(n)&&(s??(s=[])).push(n)):K<0||N===1||a!==R[K]?(f?mn(V,r.scope,_,h[a]):r.scope.bindingContext[u]=h[a],to(r.scope.overrideContext,a,k),r.nodes.insertBefore(r.location)):(f?mn(V,r.scope,_,h[a]):r.scope.bindingContext[u]=h[a],e!==k&&to(r.scope.overrideContext,a,k),--K);if(s!==void 0)return s.length===1?s[0]:Promise.all(s)}dispose(){this.views.forEach(E0),this.views=void 0}accept(e){const{views:t}=this;if(t!==void 0){for(let s=0,n=t.length;s<n;++s)if(t[s].accept(e)===!0)return!0}}}Ff.$au={type:Ze,name:"repeat",isTemplateController:!0,bindables:["items"]};let Ro=16,fs=new Int32Array(Ro),eo=new Int32Array(Ro);function O0(i){const e=i.length;e>Ro&&(Ro=e,fs=new Int32Array(e),eo=new Int32Array(e));let t=0,s=0,n=0,r=0,o=0,a=0,l=0,c=0;for(;r<e;r++)if(s=i[r],s!==-2){if(o=fs[t],n=i[o],n!==-2&&n<s){eo[r]=o,fs[++t]=r;continue}for(a=0,l=t;a<l;)c=a+l>>1,n=i[fs[c]],n!==-2&&n<s?a=c+1:l=c;n=i[fs[a]],(s<n||n===-2)&&(a>0&&(eo[r]=fs[a-1]),fs[a]=r)}r=++t;const u=new Int32Array(r);for(s=fs[t-1];t-- >0;)u[t]=s,s=eo[s];for(;r-- >0;)fs[r]=0;return u}const to=(i,e,t)=>{const s=e===0,n=e===t-1,r=e%2===0;i.$index=e,i.$first=s,i.$last=n,i.$middle=!s&&!n,i.$even=r,i.$odd=!r,i.$length=t},L0=re("IRepeatableHandlerResolver",i=>i.singleton(V0));class V0{constructor(){this._handlers=S(Xl(D0))}resolve(e){if(Su.handles(e))return Su;if(xu.handles(e))return xu;if(Tu.handles(e))return Tu;if(Iu.handles(e))return Iu;if(Pu.handles(e))return Pu;const t=this._handlers.find(s=>s.handles(e));return t!==void 0?t:B0}}const D0=re("IRepeatableHandler"),Su={handles:Ie,getObserver:fc,iterate(i,e){const t=i.length;let s=0;for(;s<t;++s)e(i[s],s,i)}},xu={handles:An,getObserver:fc,iterate(i,e){let t=0,s;for(s of i.keys())e(s,t++,i)}},Tu={handles:Us,getObserver:fc,iterate(i,e){let t=0,s;for(s of i.entries())e(s,t++,i)}},Iu={handles:q_,iterate(i,e){let t=0;for(;t<i;++t)e(t,t,i)}},Pu={handles:i=>i==null,iterate(){}},B0={handles(i){return!1},iterate(i,e){throw E(777,i)}},Ki=(i,e,t,s,n)=>{let r=i.get(t);return r===void 0&&(typeof e=="string"?r=t[e]:r=ye(e,s,n,null),i.set(t,r)),r},hi=(i,e,t,s,n,r,o)=>{let a=i.get(e);return a===void 0&&(o?mn(t.declaration,a=De.fromParent(s,new ru),n,e):a=De.fromParent(s,new ru(r,e)),i.set(e,a)),a},ui=(i,e)=>{const t=typeof i;switch(t){case"object":if(i!==null)return i;case"string":case"number":case"bigint":case"undefined":case"boolean":return`${e}${t}${i}`;default:return i}},N0=(i,e)=>i-e;class zf{constructor(){this.view=S(yt).create().setLocation(S(lt))}valueChanged(e,t){const s=this.$controller,n=this.view.bindings;let r,o=0,a=0;if(s.isActive&&n!=null)for(r=De.fromParent(s.scope,e===void 0?{}:e),a=n.length;a>o;++o)n[o].bind(r)}attaching(e,t){const{$controller:s,value:n}=this,r=De.fromParent(s.scope,n===void 0?{}:n);return this.view.activate(e,s,r)}detaching(e,t){return this.view.deactivate(e,this.$controller)}dispose(){this.view.dispose(),this.view=void 0}accept(e){var t;if(((t=this.view)==null?void 0:t.accept(e))===!0)return!0}}zf.$au={type:Ze,name:"with",isTemplateController:!0,bindables:["value"]};class Dc{constructor(){this.cases=[],this.activeCases=[],this.promise=void 0,this._factory=S(yt),this._location=S(lt)}link(e,t,s,n){this.view=this._factory.create(this.$controller).setLocation(this._location)}attaching(e,t){const s=this.view,n=this.$controller;return this.queue(()=>s.activate(e,n,n.scope)),this.queue(()=>this.swap(e,this.value)),this.promise}detaching(e,t){return this.queue(()=>this.view.deactivate(e,this.$controller)),this.promise}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}valueChanged(e,t){this.$controller.isActive&&this.queue(()=>this.swap(null,this.value))}caseChanged(e){this.queue(()=>this._handleCaseChange(e))}_handleCaseChange(e){const t=e.isMatch(this.value),s=this.activeCases,n=s.length;if(!t)return n>0&&s[0].id===e.id?this._clearActiveCases(null):void 0;if(n>0&&s[0].id<e.id)return;const r=[];let o=e.fallThrough;if(!o)r.push(e);else{const a=this.cases,l=a.indexOf(e);for(let c=l,u=a.length;c<u&&o;c++){const h=a[c];r.push(h),o=h.fallThrough}}return L(this._clearActiveCases(null,r),()=>(this.activeCases=r,this._activateCases(null)))}swap(e,t){const s=[];let n=!1;for(const o of this.cases)if((n||o.isMatch(t))&&(s.push(o),n=o.fallThrough),s.length>0&&!n)break;const r=this.defaultCase;return s.length===0&&r!==void 0&&s.push(r),L(this.activeCases.length>0?this._clearActiveCases(e,s):void 0,()=>{if(this.activeCases=s,s.length!==0)return this._activateCases(e)})}_activateCases(e){const t=this.$controller;if(!t.isActive)return;const s=this.activeCases,n=s.length;if(n===0)return;const r=t.scope;return n===1?s[0].activate(e,r):oe(...s.map(o=>o.activate(e,r)))}_clearActiveCases(e,t=[]){const s=this.activeCases,n=s.length;if(n!==0){if(n===1){const r=s[0];return t.includes(r)?void 0:(s.length=0,r.deactivate(e))}return L(oe(...s.reduce((r,o)=>(t.includes(o)||r.push(o.deactivate(e)),r),[])),()=>{s.length=0})}}queue(e){const t=this.promise;let s;s=this.promise=L(L(t,e),()=>{this.promise===s&&(this.promise=void 0)})}accept(e){if(this.$controller.accept(e)===!0||this.activeCases.some(t=>t.accept(e)))return!0}}Dc.$au={type:Ze,name:"switch",isTemplateController:!0,bindables:["value"]};let M0=0;const Hf=["value",{name:"fallThrough",mode:sa,set(i){switch(i){case"true":return!0;case"false":return!1;default:return!!i}}}];class Bc{constructor(){this.id=++M0,this.fallThrough=!1,this.view=void 0,this._factory=S(yt),this._locator=S(xn),this._location=S(lt),this._logger=S(Be).scopeTo(`${this.constructor.name}-#${this.id}`)}link(e,t,s,n){const r=e.parent,o=r==null?void 0:r.viewModel;if(o instanceof Dc)this.$switch=o,this.linkToSwitch(o);else throw E(815)}detaching(e,t){return this.deactivate(e)}isMatch(e){this._logger.debug("isMatch()");const t=this.value;return Ie(t)?(this._observer===void 0&&(this._observer=this._observeCollection(t)),t.includes(e)):t===e}valueChanged(e,t){var s;Ie(e)?((s=this._observer)==null||s.unsubscribe(this),this._observer=this._observeCollection(e)):this._observer!==void 0&&this._observer.unsubscribe(this),this.$switch.caseChanged(this)}handleCollectionChange(){this.$switch.caseChanged(this)}activate(e,t){let s=this.view;if(s===void 0&&(s=this.view=this._factory.create().setLocation(this._location)),!s.isActive)return s.activate(e??s,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(e??t,this.$controller)}dispose(){var e,t;(e=this._observer)==null||e.unsubscribe(this),(t=this.view)==null||t.dispose(),this.view=void 0}linkToSwitch(e){e.cases.push(this)}_observeCollection(e){const t=this._locator.getArrayObserver(e);return t.subscribe(this),t}accept(e){var t;return this.$controller.accept(e)===!0?!0:(t=this.view)==null?void 0:t.accept(e)}}oa({name:"case",bindables:Hf,isTemplateController:!0},Bc);class Uf extends Bc{linkToSwitch(e){if(e.defaultCase!==void 0)throw E(816);e.defaultCase=this}}oa({name:"default-case",bindables:Hf,isTemplateController:!0},Uf);var Wf,qf,Kf;class Nc{constructor(){this.preSettledTask=null,this.postSettledTask=null,this._factory=S(yt),this._location=S(lt),this._platform=S(Ne),this.logger=S(Be).scopeTo("promise.resolve")}link(e,t,s,n){this.view=this._factory.create(this.$controller).setLocation(this._location)}attaching(e,t){const s=this.view,n=this.$controller;return L(s.activate(e,n,this.viewScope=De.fromParent(n.scope,{})),()=>this.swap(e))}valueChanged(e,t){this.$controller.isActive&&this.swap(null)}swap(e){var u,h;const t=this.value;if(!Te(t)){this.logger.warn(`The value '${Gs(t)}' is not a promise. No change will be done.`);return}const s=this._platform.domQueue,n=this.fulfilled,r=this.rejected,o=this.pending,a=this.viewScope;let l;const c=()=>{oe(l=(this.preSettledTask=s.queueTask(()=>oe(n==null?void 0:n.deactivate(e),r==null?void 0:r.deactivate(e),o==null?void 0:o.activate(e,a)))).result.catch(d=>{if(!(d instanceof Al))throw d}),t.then(d=>{if(this.value!==t)return;const p=()=>{this.postSettlePromise=(this.postSettledTask=s.queueTask(()=>oe(o==null?void 0:o.deactivate(e),r==null?void 0:r.deactivate(e),n==null?void 0:n.activate(e,a,d)))).result};this.preSettledTask.status===Na?l.then(p):(this.preSettledTask.cancel(),p())},d=>{if(this.value!==t)return;const p=()=>{this.postSettlePromise=(this.postSettledTask=s.queueTask(()=>oe(o==null?void 0:o.deactivate(e),n==null?void 0:n.deactivate(e),r==null?void 0:r.activate(e,a,d)))).result};this.preSettledTask.status===Na?l.then(p):(this.preSettledTask.cancel(),p())}))};((u=this.postSettledTask)==null?void 0:u.status)===Na?this.postSettlePromise.then(c):((h=this.postSettledTask)==null||h.cancel(),c())}detaching(e,t){var s,n;return(s=this.preSettledTask)==null||s.cancel(),(n=this.postSettledTask)==null||n.cancel(),this.preSettledTask=this.postSettledTask=null,this.view.deactivate(e,this.$controller)}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}}Nc.$au={type:Ze,name:"promise",isTemplateController:!0,bindables:["value"]};class Gf{constructor(){this.view=void 0,this._factory=S(yt),this._location=S(lt)}link(e,t,s,n){Mc(e).pending=this}activate(e,t){let s=this.view;if(s===void 0&&(s=this.view=this._factory.create().setLocation(this._location)),!s.isActive)return s.activate(s,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(t,this.$controller)}detaching(e){return this.deactivate(e)}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}}Gf.$au={type:Ze,name:"pending",isTemplateController:!0,bindables:{value:{mode:Se}}};class Qf{constructor(){this.view=void 0,this._factory=S(yt),this._location=S(lt)}link(e,t,s,n){Mc(e).fulfilled=this}activate(e,t,s){this.value=s;let n=this.view;if(n===void 0&&(n=this.view=this._factory.create().setLocation(this._location)),!n.isActive)return n.activate(n,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(t,this.$controller)}detaching(e,t){return this.deactivate(e)}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}}Qf.$au={type:Ze,name:"then",isTemplateController:!0,bindables:{value:{mode:Is}}};class Jf{constructor(){this.view=void 0,this._factory=S(yt),this._location=S(lt)}link(e,t,s,n){Mc(e).rejected=this}activate(e,t,s){this.value=s;let n=this.view;if(n===void 0&&(n=this.view=this._factory.create().setLocation(this._location)),!n.isActive)return n.activate(n,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(t,this.$controller)}detaching(e,t){return this.deactivate(e)}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}}Jf.$au={type:Ze,name:"catch",isTemplateController:!0,bindables:{value:{mode:Is}}};function Mc(i){const e=i.parent,t=e==null?void 0:e.viewModel;if(t instanceof Nc)return t;throw E(813)}class Vl{"promise.resolve"(e,t){return new wt(e,t,"promise","bind")}}Wf=Symbol.metadata;Vl[Wf]={[rs]:Zs.create([{pattern:"promise.resolve",symbols:""}],Vl)};class Dl{then(e,t){return new wt(e,t,"then","from-view")}}qf=Symbol.metadata;Dl[qf]={[rs]:Zs.create([{pattern:"then",symbols:""}],Dl)};class Bl{catch(e,t){return new wt(e,t,"catch","from-view")}}Kf=Symbol.metadata;Bl[Kf]={[rs]:Zs.create([{pattern:"catch",symbols:""}],Bl)};class Yf{constructor(){this._needsApply=!1,this._element=S(zi),this._platform=S(Ne)}binding(){this.valueChanged()}valueChanged(){this.$controller.isActive?this._apply():this._needsApply=!0}attached(){this._needsApply&&(this._needsApply=!1,this._apply()),this._element.addEventListener("focus",this),this._element.addEventListener("blur",this)}detaching(){const e=this._element;e.removeEventListener("focus",this),e.removeEventListener("blur",this)}handleEvent(e){e.type==="focus"?this.value=!0:this._isElFocused||(this.value=!1)}_apply(){const e=this._element,t=this._isElFocused,s=this.value;s&&!t?e.focus():!s&&t&&e.blur()}get _isElFocused(){return this._element===this._platform.document.activeElement}}Yf.$au={type:Ze,name:"focus",bindables:{value:{mode:Kp}}};class Xf{constructor(){this.position="beforeend",this.strict=!1;const e=S(yt),t=S(lt),s=S(Ne);this._platform=s,this._resolvedTarget=s.document.createElement("div"),(this.view=e.create()).setLocation(this._targetLocation=vy(s)),m0(this.view.nodes,t)}attaching(e){this.callbackContext==null&&(this.callbackContext=this.$controller.scope.bindingContext);const t=this._resolvedTarget=this._getTarget();return this._moveLocation(t,this.position),this._activating(e,t)}detaching(e){return this._deactivating(e,this._resolvedTarget)}targetChanged(){const{$controller:e}=this;if(!e.isActive)return;const t=this._getTarget();if(this._resolvedTarget===t)return;this._resolvedTarget=t;const s=L(this._deactivating(null,t),()=>(this._moveLocation(t,this.position),this._activating(null,t)));Te(s)&&s.catch($o)}positionChanged(){const{$controller:e,_resolvedTarget:t}=this;if(!e.isActive)return;const s=L(this._deactivating(null,t),()=>(this._moveLocation(t,this.position),this._activating(null,t)));Te(s)&&s.catch($o)}_activating(e,t){const{activating:s,callbackContext:n,view:r}=this;return L(s==null?void 0:s.call(n,t,r),()=>this._activate(e,t))}_activate(e,t){const{$controller:s,view:n}=this;if(e===null)n.nodes.insertBefore(this._targetLocation);else return L(n.activate(e??n,s,s.scope),()=>this._activated(t));return this._activated(t)}_activated(e){const{activated:t,callbackContext:s,view:n}=this;return t==null?void 0:t.call(s,e,n)}_deactivating(e,t){const{deactivating:s,callbackContext:n,view:r}=this;return L(s==null?void 0:s.call(n,t,r),()=>this._deactivate(e,t))}_deactivate(e,t){const{$controller:s,view:n}=this;if(e===null)n.nodes.remove();else return L(n.deactivate(e,s),()=>this._deactivated(t));return this._deactivated(t)}_deactivated(e){const{deactivated:t,callbackContext:s,view:n}=this;return L(t==null?void 0:t.call(s,e,n),()=>this._removeLocation())}_getTarget(){const e=this._platform,t=e.document;let s=this.target,n=this.renderContext;if(s===""){if(this.strict)throw E(811);return t.body}if(ee(s)){let r=t;ee(n)&&(n=t.querySelector(n)),n instanceof e.Node&&(r=n),s=r.querySelector(s)}if(s instanceof e.Node)return s;if(s==null){if(this.strict)throw E(812);return t.body}return s}_removeLocation(){this._targetLocation.remove(),this._targetLocation.$start.remove()}_moveLocation(e,t){const s=this._targetLocation,n=s.$start,r=e.parentNode,o=[n,s];switch(t){case"beforeend":Xr(e,null,o);break;case"afterbegin":Xr(e,e.firstChild,o);break;case"beforebegin":Xr(r,e,o);break;case"afterend":Xr(r,e.nextSibling,o);break;default:throw E(779,t)}}dispose(){this.view.dispose(),this.view=void 0,this.callbackContext=null}accept(e){var t;if(((t=this.view)==null?void 0:t.accept(e))===!0)return!0}}Xf.$au={type:Ze,name:"portal",isTemplateController:!0,bindables:[{name:"target",primary:!0},"position","activated","activating","callbackContext",{name:"renderContext",callback:"targetChanged"},"strict","deactivated","deactivating"]};let j0;class fa{constructor(){var h,d,p,f;this._parentScope=null,this._outerScope=null,this._attached=!1,this.expose=null,this.slotchange=null,this._subs=new Set,this._observer=null;const e=S(Vi),t=S(lt),s=S(In),n=S(Fi),r=this.name=s.data.name,o=(h=s.projections)==null?void 0:h[lf],a=(p=(d=e.instruction)==null?void 0:d.projections)==null?void 0:p[r],l=e.controller.container;let c,u;a==null?(u=l.createChild({inheritParentResources:!0}),c=n.getViewFactory(o??j0??(j0=ot.create({name:"au-slot-empty-template",template:"",needsCompile:!1})),u),this._hasProjection=!1):(u=l.createChild(),u.useResources(e.parent.controller.container),_e(u,Vi,new $e(void 0,e.parent)),c=n.getViewFactory(a,u),this._hasProjection=!0,this._slotwatchers=((f=l.getAll(yy,!1))==null?void 0:f.filter(_=>_.slotName==="*"||_.slotName===r))??U),this._hasSlotWatcher=(this._slotwatchers??(this._slotwatchers=U)).length>0,this._hdrContext=e,this.view=c.create().setLocation(this._location=t)}get nodes(){const e=[],t=this._location;let s=t.$start.nextSibling;for(;s!=null&&s!==t;)s.nodeType!==8&&e.push(s),s=s.nextSibling;return e}subscribe(e){this._subs.add(e)}unsubscribe(e){this._subs.delete(e)}binding(e,t){var r;for(this._parentScope=t.scope;t.vmKind==="synthetic"&&((r=t.parent)==null?void 0:r.viewModel)instanceof fa;)t=t.parent.parent;const s=t.scope.bindingContext;let n;this._hasProjection&&(n=this._hdrContext.controller.scope.parent,(this._outerScope=De.fromParent(n,n.bindingContext)).overrideContext.$host=this.expose??s)}attaching(e,t){return L(this.view.activate(e,this.$controller,this._hasProjection?this._outerScope:this._parentScope),()=>{this._hasSlotWatcher&&(this._slotwatchers.forEach(s=>s.watch(this)),this._observe(),this._notifySlotChange(),this._attached=!0)})}detaching(e,t){return this._attached=!1,this._unobserve(),this._slotwatchers.forEach(s=>s.unwatch(this)),this.view.deactivate(e,this.$controller)}exposeChanged(e){this._hasProjection&&this._outerScope!=null&&(this._outerScope.overrideContext.$host=e)}dispose(){this.view.dispose(),this.view=void 0}accept(e){var t;if(((t=this.view)==null?void 0:t.accept(e))===!0)return!0}_observe(){if(this._observer!=null)return;const e=this._location,t=e.parentElement;t!=null&&(this._observer=af(t,s=>{F0(e,s)&&this._notifySlotChange()})).observe(t,{childList:!0})}_unobserve(){var e;(e=this._observer)==null||e.disconnect(),this._observer=null}_notifySlotChange(){var n;const e=this.nodes,t=new Set(this._subs);let s;this._attached&&((n=this.slotchange)==null||n.call(void 0,this.name,e));for(s of t)s.handleSlotChange(this,e)}}fa.$au={type:Di,name:"au-slot",template:null,containerless:!0,processContent(i,e,t){t.name=i.getAttribute("name")??lf;let s=i.firstChild,n=null;for(;s!==null;)n=s.nextSibling,by(s)&&s.hasAttribute(wy)&&(console.warn("[DEV:aurelia] detected [au-slot] attribute on a child node",`of an <au-slot> element: "<${s.nodeName} au-slot>".`,"This element will be ignored and removed"),i.removeChild(s)),s=n},bindables:["expose","slotchange"]};const so=(i,e)=>i.compareDocumentPosition(e),F0=(i,e)=>{for(const{addedNodes:t,removedNodes:s,nextSibling:n}of e){let r=0,o=t.length,a;for(;r<o;++r)if(a=t[r],so(i.$start,a)===4&&so(i,a)===2)return!0;if(s.length>0&&n!=null&&so(i.$start,n)===4&&so(i,n)===2)return!0}};class Zf{constructor(){this.scopeBehavior="auto",this._composition=void 0,this.tag=null,this._container=S(Bi),this.parent=S(Dr),this._host=S(zi),this._location=S(lt),this._platform=S(Ne),this._rendering=S(Fi),this._instruction=S(In),this._contextFactory=S(pm(H0)),this._compiler=S(ta),this._hydrationContext=S(Vi),this._exprParser=S(Rr),this._observerLocator=S(xn)}get composing(){return this._composing}get composition(){return this._composition}attaching(e,t){return this._composing=L(this.queue(new Eu(this.template,this.component,this.model,void 0),e),s=>{this._contextFactory._isCurrent(s)&&(this._composing=void 0)})}detaching(e){const t=this._composition,s=this._composing;return this._contextFactory.invalidate(),this._composition=this._composing=void 0,L(s,()=>t==null?void 0:t.deactivate(e))}propertyChanged(e){var t;if(!(e==="composing"||e==="composition")){if(e==="model"&&this._composition!=null){this._composition.update(this.model);return}if(e==="tag"&&((t=this._composition)==null?void 0:t.controller.vmKind)===pt){console.warn("[DEV:aurelia] Changing tag name of a custom element composition is ignored.");return}this._composing=L(this._composing,()=>L(this.queue(new Eu(this.template,this.component,this.model,e),void 0),s=>{this._contextFactory._isCurrent(s)&&(this._composing=void 0)}))}}queue(e,t){const s=this._contextFactory,n=this._composition;return L(s.create(e),r=>s._isCurrent(r)?L(this.compose(r),o=>s._isCurrent(r)?L(o.activate(t),()=>s._isCurrent(r)?(this._composition=o,L(n==null?void 0:n.deactivate(t),()=>r)):L(o.controller.deactivate(o.controller,this.$controller),()=>(o.controller.dispose(),r))):(o.controller.dispose(),r)):r)}compose(e){const{_template:t,_component:s,_model:n}=e.change,{_container:r,$controller:o,_location:a,_instruction:l}=this,c=this._getDefinition(this._hydrationContext.controller.container,s),u=r.createChild(),h=this._platform.document.createElement(c==null?this.tag??"div":c.name);a.parentNode.insertBefore(h,a);let d;c==null?d=this.tag==null?vr(h):null:d=c.containerless?vr(h):null;const p=()=>{var g;if(h.remove(),d!=null){let v=d.$start.nextSibling,m=null;for(;v!==null&&v!==d;)m=v.nextSibling,v.remove(),v=m;(g=d.$start)==null||g.remove(),d.remove()}},f=this._createComponentInstance(u,typeof s=="string"?c.Type:s,h,d),_=()=>{const g=l.captures??U;if(c!==null){const v=c.capture,[m,A]=g.reduce((k,O)=>{const R=!(O.target in c.bindables)&&(v===!0||Y(v)&&!!v(O.target));return k[R?0:1].push(O),k},[[],[]]),w=Qe.$el(u,f,h,{projections:l.projections,captures:m},c,d);return this._createSpreadBindings(h,c,A).forEach(k=>w.addBinding(k)),new Ou(w,k=>w.activate(k??w,o,o.scope.parent),k=>L(w.deactivate(k??w,o),p),k=>{var O;return(O=f.activate)==null?void 0:O.call(f,k)},e)}else{const v=ot.create({name:ie.generateName(),template:t}),m=this._rendering.getViewFactory(v,u),A=Qe.$view(m,o),w=this.scopeBehavior==="auto"?De.fromParent(this.parent.scope,f):De.create(f);return A.setHost(h),d==null?this._createSpreadBindings(h,v,g).forEach(k=>A.addBinding(k)):A.setLocation(d),new Ou(A,k=>A.activate(k??A,o,w),k=>L(A.deactivate(k??A,o),p),k=>{var O;return(O=f.activate)==null?void 0:O.call(f,k)},e)}};return"activate"in f?L(f.activate(n),()=>_()):_()}_createComponentInstance(e,t,s,n){if(t==null)return new z0;if(typeof t=="object")return t;const r=this._platform;Nr(e,s,r),_e(e,lt,new $e("IRenderLocation",n));const o=e.invoke(t);return _e(e,t,new $e("au-compose.component",o)),o}_getDefinition(e,t){if(typeof t=="string"){const n=ie.find(e,t);if(n==null)throw E(806,t);return n}const s=Y(t)?t:t==null?void 0:t.constructor;return ie.isType(s,void 0)?ie.getDefinition(s,null):null}_createSpreadBindings(e,t,s){const n=new $f(this.$controller,{projections:null,captures:s},this._hydrationContext.parent);return ca.create(n,e,t,this._rendering,this._compiler,this._platform,this._exprParser,this._observerLocator)}}Zf.$au={type:Di,name:"au-compose",capture:!0,containerless:!0,bindables:["template","component","model",{name:"scopeBehavior",set:i=>{if(i==="scoped"||i==="auto")return i;throw E(805,i)}},{name:"composing",mode:Is},{name:"composition",mode:Is},"tag"]};class z0{}class H0{constructor(){this.id=0}_isCurrent(e){return e.id===this.id}create(e){return L(e.load(),t=>new U0(++this.id,t))}invalidate(){this.id++}}class Eu{constructor(e,t,s,n){this._template=e,this._component=t,this._model=s,this._src=n}load(){return Te(this._template)||Te(this._component)?Promise.all([this._template,this._component]).then(([e,t])=>new Ru(e,t,this._model,this._src)):new Ru(this._template,this._component,this._model,this._src)}}class Ru{constructor(e,t,s,n){this._template=e,this._component=t,this._model=s,this._src=n}}class U0{constructor(e,t){this.id=e,this.change=t}}class Ou{constructor(e,t,s,n,r){this.controller=e,this.start=t,this.stop=s,this.update=n,this.context=r,this.state=0}activate(e){if(this.state!==0)throw E(807,this);return this.state=1,this.start(e)}deactivate(e){switch(this.state){case 1:return this.state=-1,this.stop(e);case-1:throw E(808);default:this.state=-1}}}const W0=re("ISanitizer",i=>i.singleton(class{sanitize(){throw E(99,"sanitize")}}));class eg{constructor(){this._sanitizer=S(W0)}toView(e){return e==null?null:this._sanitizer.sanitize(e)}}eg.$au={type:sn,name:"sanitize"};class tg{constructor(){this.el=S(zi),this.p=S(Ne),this._isActive=!1,this._task=null,this.$val="",this.$prio="",this.update=()=>{this._task=null,!!this.value!==this._isToggled&&(this._isToggled===this._base?(this._isToggled=!this._base,this.$val=this.el.style.getPropertyValue("display"),this.$prio=this.el.style.getPropertyPriority("display"),this.el.style.setProperty("display","none","important")):(this._isToggled=this._base,this.el.style.setProperty("display",this.$val,this.$prio),this.el.getAttribute("style")===""&&this.el.removeAttribute("style")))};const e=S(In);this._isToggled=this._base=e.alias!=="hide"}binding(){this._isActive=!0,this.update()}detaching(){var e;this._isActive=!1,(e=this._task)==null||e.cancel(),this._task=null}valueChanged(){this._isActive&&this._task===null&&(this._task=this.p.domQueue.queueTask(this.update))}}tg.$au={type:Ze,name:"show",bindables:["value"],aliases:["hide"]};const q0=[x0,Xb,Vc],K0=[vl,ml,bl,my],G0=[Tp,Ap,Sp,$p,xp,Ip,Vp,Pp,Ep,Lp,Op,Rp,Dp],Q0=[Zp,Qp,Jp,Yp,ef,tf,Xp,eg,Eo,jf,Ff,zf,Dc,Bc,Uf,Nc,Gf,Qf,Jf,Vl,Dl,Bl,Bf,Nf,Mf,Zf,Xf,Yf,tg,fa],J0=[Py,Ey,Ty,Iy,ky,Ay,$y,Sy,xy,Ly,Fy,Vy,Dy,By,My,Ry,zy,Hy],Y0=sg(jt);function sg(i){return{optionsProvider:i,register(e){const t={coercingOptions:{enableCoercion:!1,coerceNullish:!1}};return i(t),e.register(Sc(Ud,t.coercingOptions),...q0,...Q0,...K0,...G0,...J0)},customize(e){return sg(e??i)}}}const X0=Hs.getOrCreate(globalThis);function Z0(){return ut.createContainer().register(bt.instance(Ne,X0),Y0)}class hr extends A0{constructor(e=Z0()){super(e)}static app(e){return new hr().app(e)}static enhance(e){return new hr().enhance(e)}static register(...e){return new hr().register(...e)}app(e){if(ie.isType(e)){const t=ie.getDefinition(e);let s=document.querySelector(t.name);return s===null&&(s=document.body),super.app({host:s,component:e})}return super.app(e)}}class Lu{constructor(e,t,s,n){this.name=e,this.isOptional=t,this.isStar=s,this.pattern=n}satisfiesPattern(e){return this.pattern===null?!0:(this.pattern.lastIndex=0,this.pattern.test(e))}}class ig{constructor(e,t,s){this.path=e,this.caseSensitive=t,this.handler=s}}class ng{get residualEndpoint(){return this._residualEndpoint}set residualEndpoint(e){if(this._residualEndpoint!==null)throw new Error("Residual endpoint is already set");this._residualEndpoint=e}constructor(e,t){this.route=e,this.params=t,this._residualEndpoint=null}equalsOrResidual(e){return e!=null&&this===e||this._residualEndpoint===e}}class wr{constructor(e,t){this.endpoint=e;const s=Object.create(null);for(const n in t){const r=t[n];s[n]=r!=null?decodeURIComponent(r):r}this.params=Object.freeze(s)}}class jc{constructor(e,t,s,n){var r;this.chars=e,this.states=t,this.skippedStates=s,this.result=n,this.params=null,this.isConstrained=!1,this.satisfiesConstraints=null,this.head=t[t.length-1],this.endpoint=(r=this.head)==null?void 0:r.endpoint}advance(e){const{chars:t,states:s,skippedStates:n,result:r}=this;let o=null,a=0;const l=s[s.length-1];function c(u,h){if(u.isMatch(e)&&(++a===1?o=u:r.add(new jc(t.concat(e),s.concat(u),h===null?n:n.concat(h),r))),l.segment===null&&u.isOptional&&u.nextStates!==null){if(u.nextStates.length>1)throw Oo(`${u.nextStates.length} nextStates`);const d=u.nextStates[0];if(!d.isSeparator)throw Oo("Not a separator");if(d.nextStates!==null)for(const p of d.nextStates)c(p,u)}}if(l.isDynamic&&c(l,null),l.nextStates!==null)for(const u of l.nextStates)c(u,null);o!==null&&(s.push(this.head=o),t.push(e),this.isConstrained=this.isConstrained||o.isDynamic&&o.segment.isConstrained,o.endpoint!==null&&(this.endpoint=o.endpoint)),a===0&&r.remove(this)}_finalize(){function e(t,s){const n=s.nextStates;if(n!==null){if(n.length===1&&n[0].segment===null)e(t,n[0]);else for(const r of n)if(r.isOptional&&r.endpoint!==null){if(t.push(r),r.nextStates!==null)for(const o of r.nextStates)e(t,o);break}}}return e(this.skippedStates,this.head),this.isConstrained?(this._getParams(),this.satisfiesConstraints):!0}_getParams(){var r;let e=this.params;if(e!=null)return e;const{states:t,chars:s,endpoint:n}=this;e={},this.satisfiesConstraints=!0;for(const o of n.params)e[o.name]=void 0;for(let o=0,a=t.length;o<a;++o){const l=t[o];if(l.isDynamic){const c=l.segment,u=c.name;if(e[u]===void 0?e[u]=s[o]:e[u]+=s[o],!(l.isConstrained&&!Object.is((r=t[o+1])==null?void 0:r.segment,c)))continue;this.satisfiesConstraints=this.satisfiesConstraints&&l.satisfiesConstraint(e[u])}}return this.satisfiesConstraints&&(this.params=e),e}compareTo(e){const t=this.states,s=e.states;for(let l=0,c=0,u=Math.max(t.length,s.length);l<u;++l){let h=t[l];if(h===void 0)return 1;let d=s[c];if(d===void 0)return-1;let p=h.segment,f=d.segment;if(p===null){if(f===null){++c;continue}if((h=t[++l])===void 0)return 1;p=h.segment}else if(f===null){if((d=s[++c])===void 0)return-1;f=d.segment}if(p.kind<f.kind)return 1;if(p.kind>f.kind)return-1;++c}const n=this.skippedStates,r=e.skippedStates,o=n.length,a=r.length;if(o<a)return 1;if(o>a)return-1;for(let l=0;l<o;++l){const c=n[l],u=r[l];if(c.length<u.length)return 1;if(c.length>u.length)return-1}return 0}}function eC(i){return i.head.endpoint!==null}function tC(i,e){return i.compareTo(e)}class sC{get isEmpty(){return this.candidates.length===0}constructor(e){this.candidates=[],this.candidates=[new jc([""],[e],[],this)]}getSolution(){const e=this.candidates.filter(t=>eC(t)&&t._finalize());return e.length===0?null:(e.sort(tC),e[0])}add(e){this.candidates.push(e)}remove(e){this.candidates.splice(this.candidates.indexOf(e),1)}advance(e){const t=this.candidates.slice();for(const s of t)s.advance(e)}}const Xt="$$residue",Vu=/^:(?<name>[^?\s{}]+)(?:\{\{(?<constraint>.+)\}\})?(?<optional>\?)?$/g;class iC{constructor(){this.rootState=new Fc(null,null,""),this.cache=new Map,this.endpointLookup=new Map}add(e,t=!1){var r,o;let s,n;if(e instanceof Array)for(const a of e)n=this.$add(a,!1),s=n.params,!(!t||(((r=s[s.length-1])==null?void 0:r.isStar)??!1))&&(n.residualEndpoint=this.$add({...a,path:`${a.path}/*${Xt}`},!0));else n=this.$add(e,!1),s=n.params,t&&!(((o=s[s.length-1])==null?void 0:o.isStar)??!1)&&(n.residualEndpoint=this.$add({...e,path:`${e.path}/*${Xt}`},!0));this.cache.clear()}$add(e,t){var u;const s=e.path,n=this.endpointLookup;if(n.has(s))throw Oo(`Cannot add duplicate path '${s}'.`);const r=new ig(s,e.caseSensitive===!0,e.handler),o=s===""?[""]:s.split("/").filter(nC),a=[];let l=this.rootState;for(const h of o)switch(l=l.append(null,"/"),h.charAt(0)){case":":{Vu.lastIndex=0;const d=Vu.exec(h),{name:p,optional:f}=(d==null?void 0:d.groups)??{},_=f==="?";if(p===Xt)throw new Error(`Invalid parameter name; usage of the reserved parameter name '${Xt}' is used.`);const g=(u=d==null?void 0:d.groups)==null?void 0:u.constraint,v=g!=null?new RegExp(g):null;a.push(new Lu(p,_,!1,v)),l=new oC(p,_,v).appendTo(l);break}case"*":{const d=h.slice(1);let p;if(d===Xt){if(!t)throw new Error(`Invalid parameter name; usage of the reserved parameter name '${Xt}' is used.`);p=1}else p=2;a.push(new Lu(d,!0,!0,null)),l=new aC(d,p).appendTo(l);break}default:{l=new rC(h,r.caseSensitive).appendTo(l);break}}const c=new ng(r,a);return l.setEndpoint(c),n.set(s,c),c}recognize(e){let t=this.cache.get(e);return t===void 0&&this.cache.set(e,t=this.$recognize(e)),t}$recognize(e){e=decodeURI(e),e.startsWith("/")||(e=`/${e}`),e.length>1&&e.endsWith("/")&&(e=e.slice(0,-1));const t=new sC(this.rootState);for(let o=0,a=e.length;o<a;++o){const l=e.charAt(o);if(t.advance(l),t.isEmpty)return null}const s=t.getSolution();if(s===null)return null;const{endpoint:n}=s,r=s._getParams();return new wr(n,r)}getEndpoint(e){return this.endpointLookup.get(e)??null}}class Fc{constructor(e,t,s){switch(this.prevState=e,this.segment=t,this.value=s,this.nextStates=null,this.endpoint=null,this.isConstrained=!1,t==null?void 0:t.kind){case 3:this.length=e.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=t.optional,this.isConstrained=t.isConstrained;break;case 2:case 1:this.length=e.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=!1;break;case 4:this.length=e.length+1,this.isSeparator=!1,this.isDynamic=!1,this.isOptional=!1;break;case void 0:this.length=e===null?0:e.length,this.isSeparator=!0,this.isDynamic=!1,this.isOptional=!1;break}}append(e,t){let s,n=this.nextStates;return n===null?(s=void 0,n=this.nextStates=[]):e===null?s=n.find(r=>r.value===t):s=n.find(r=>{var o;return(o=r.segment)==null?void 0:o.equals(e)}),s===void 0&&n.push(s=new Fc(this,e,t)),s}setEndpoint(e){if(this.endpoint!==null)throw Oo(`Cannot add ambiguous route. The pattern '${e.route.path}' clashes with '${this.endpoint.route.path}'`);this.endpoint=e,this.isOptional&&(this.prevState.setEndpoint(e),this.prevState.isSeparator&&this.prevState.prevState!==null&&this.prevState.prevState.setEndpoint(e))}isMatch(e){const t=this.segment;switch(t==null?void 0:t.kind){case 3:return!this.value.includes(e);case 2:case 1:return!0;case 4:case void 0:return this.value.includes(e)}}satisfiesConstraint(e){return this.isConstrained?this.segment.satisfiesPattern(e):!0}}function nC(i){return i.length>0}class rC{get kind(){return 4}constructor(e,t){this.value=e,this.caseSensitive=t}appendTo(e){const{value:t,value:{length:s}}=this;if(this.caseSensitive)for(let n=0;n<s;++n)e=e.append(this,t.charAt(n));else for(let n=0;n<s;++n){const r=t.charAt(n);e=e.append(this,r.toUpperCase()+r.toLowerCase())}return e}equals(e){return e.kind===4&&e.caseSensitive===this.caseSensitive&&e.value===this.value}}class oC{get kind(){return 3}constructor(e,t,s){if(this.name=e,this.optional=t,this.pattern=s,s===void 0)throw new Error("Pattern is undefined");this.isConstrained=s!==null}appendTo(e){return e=e.append(this,"/"),e}equals(e){return e.kind===3&&e.optional===this.optional&&e.name===this.name}satisfiesPattern(e){return this.pattern===null?!0:(this.pattern.lastIndex=0,this.pattern.test(e))}}class aC{constructor(e,t){this.name=e,this.kind=t}appendTo(e){return e=e.append(this,""),e}equals(e){return(e.kind===2||e.kind===1)&&e.name===this.name}}const Oo=i=>new Error(i),Mr={3e3:"hydrated",3001:"attaching",3002:"detaching",3003:"dispose",3050:"created",3051:"activating - self",3052:"activating - via initiator",3053:"deactivating - self",3054:"deactivating - via initiator",3055:"disposing",3056:"canUnload(next:%s) - invoking %s hooks",3057:"canLoad(next:%s) - invoking %s hooks",3058:"unloading(next:%s) - invoking %s hooks",3059:"loading(next:%s) - invoking %s hooks",3100:"baseHref set to path: %s",3101:"starting listening to %s",3102:"stopping listening to %s",3103:"pushing to history state: %s (title: '%s', url: '%s')",3104:"replacing history state: %s (title: '%s', url: '%s')",3105:"pushing to history state: NOT_SERIALIZABLE (title: '%s', url: '%s')",3106:"replacing history state: NOT_SERIALIZABLE (title: '%s', url: '%s')",3150:"created",3151:"Node changed from %s to %s",3152:"The given context is nullish (%s); resolving to root RouteContext",3153:"The given context (%s) is an instance of RouteContext; resolving to it",3154:"The given context is a node (nodeName:%s); resolving RouteContext from controller's RenderContext",3155:"Failed to resolve RouteContext from node %s; error: %s",3156:"The given context is a custom element viewmodel (name:%s); resolving RouteContext from controller's RenderContext",3157:"The given context is a custom element controller (name:%s); resolving RouteContext from controller's RenderContext",3158:"Resolving viewport agent for the request: %s",3159:"Creating component agent for the node: %s",3160:"Registering viewport: %s",3161:"Skipping registering viewport: %s; it is already registered",3162:"Unregistering viewport: %s",3163:"Skipping unregistering viewport: %s; it is not registered",3164:"Recognizing path: %s",3165:"Adding route: %s",3166:"Unable to eagerly generate path for %s; reasons: %s",3167:"The provided container has no registered IAppRoot. RouteContext.setRoot can only be used after Aurelia.app was called, on a container that is within that app's component tree.",3168:'A root RouteContext is already registered. A possible cause is the RouterConfiguration being registered more than once in the same container tree. If you have a multi-rooted app, make sure you register RouterConfiguration only in the "forked" containers and not in the common root.',3169:"The provided IAppRoot does not (yet) have a controller. A possible cause is calling this API manually before Aurelia.start() is called",3170:"Invalid context type: %s",3171:"Invariant violation: RouteNode should be set immediately after the RouteContext is created. Context: %s",3172:"RouteContext has no ViewportAgent: %s",3173:"Invalid route config. When the component property is a lazy import, the path must be specified.",3174:`Failed to resolve %s at:
%s`,3175:"%s does not appear to be a component or CustomElement recognizable by Aurelia; make sure to use the @customElement decorator for your class if not using conventions.",3200:"Publishing event: %s",3201:"Invoking subscriber #%s (event: %s)",3250:"Loading instruction: %s",3251:"Checking if the route %s is active in context %s",3252:"Resolving existing RouteContext for %s",3253:"Creating new RouteContext for %s",3254:"Ignoring navigation triggered by '%s' because it is the same URL as the previous navigation which was triggered by 'api'.",3255:"Reusing promise/resolve/reject from the previously failed transition %s",3256:"Scheduling transition: %s",3257:"Transition succeeded: %s",3258:"Running transition: %s",3259:"Aborting transition %s because a new transition was queued in response to the NavigationStartEvent",3260:"Compiling viewport instructions tree %s",3261:"invoking canUnload on %s nodes",3262:"invoking canLoad on %s nodes",3263:"invoking unloading on %s nodes",3264:"invoking loading on %s nodes",3265:"invoking swapping on %s nodes",3266:"finalizing transition",3267:"navigation %s",3268:"navigation %s; finished.",3269:"scheduling next transition: %s",3270:"Transition %s failed with error: %s",3271:"Root RouteContext is not set. Did you forget to register RouteConfiguration, or try to navigate before calling Aurelia.start()?",3300:"created",3301:"Nothing to activate at %s",3302:"Activating existing component agent at %s",3303:"Activating next component agent at %s",3304:"Nothing to deactivate at %s",3305:"Deactivating existing component agent at %s",3306:"Already deactivating at %s",3307:"Deactivating current component agent at %s",3308:"Cannot handle the request %s due to viewport name mismatch %s",3309:"Cannot handle the request %s as componentName not included in usedBy %s",3310:"Viewport %s can handle the request %s",3311:"Viewport is not available as it is inactive",3312:"Viewport is not available as an update is scheduled for %s",3313:"Invoking on children at %s",3314:"Invoking on existing component at %s",3315:"Finished invoking on children, now invoking on own component at %s",3316:"Finished at %s",3317:"Nothing to unload at %s",3318:"Invoking on next component at %s",3319:"Nothing to load at %s",3320:"Compiling residue for %s; plan is set to %s",3321:"Delaying residue compilation for %s until activate",3322:"Finished own component; invoking on children at %s",3323:"Finished at %s",3324:"Invoking on children at %s",3325:"Invoking on existing component at %s",3326:"Finished invoking on children, now invoking on own component at %s",3327:"Finished at %s",3328:"Nothing to unload at %s",3329:"Invoking on next component at %s",3330:"Nothing to load at %s",3331:"Finished own component; invoking on children at %s",3332:"Finished at %s",3333:"Invoking on the current component at %s",3334:"Nothing to deactivate at %s",3335:"Already deactivating at %s",3336:"Invoking canLoad(), loading() and activate() on the next component at %s",3337:"Invoking on the next component at %s",3338:"Nothing to activate at %s",3339:"Running activate on next instead, because there is nothing to deactivate at %s",3340:"Running deactivate on current instead, because there is nothing to activate at %s",3341:"Skipping this level and swapping children instead at %s",3342:"Swapping current and next at %s",3343:"Processing dynamic children at %s",3344:"Scheduling update for %s; plan is set to %s",3345:"Cancelling update for %s",3346:"setting currState to State.currIsEmpty at %s",3347:"setting currState to State.currIsActive at %s",3348:"setting currState to State.currIsActive and reassigning curCA at %s",3349:"disposing at %s",3350:"Unexpected viewport activation outside of a transition context at %s",3351:"Unexpected viewport deactivation outside of a transition context at %s",3352:"Unexpected state at %s of %s",3353:"Unexpected guardsResult %s at %s",3400:"Invalid component %s: must be either a class, a custom element ViewModel, or a (partial) custom element definition",3401:"Neither the route '%s' matched any configured route at '%s' nor a fallback is configured for the viewport '%s' - did you forget to add '%s' to the routes list of the route decorator of '%s'?",3402:"'%s' did not match any configured route or registered component name at '%s' - did you forget to add '%s' to the routes list of the route decorator of '%s'?",3403:'Invalid instruction type %s for "toUrlComponent" operation. If you are seeing this error, then it is probably because of an internal bug. Please report it.',3450:"No endpoint found for path '%s'",3500:"Expected %s at index %s of '%s', but got: '%s' (rest='%s')",3501:"Unexpected '%s' at index %s of '%s'",3502:"Unexpected expression kind %s",3550:"Invalid operation, the configuration from the get hook is already applied.",3551:"When retrieving the RouteConfig for a component name, a RouteContext (that can resolve it) must be provided",3552:"Could not find a CustomElement named '%s' in the current container scope of %s. This means the component is neither registered at Aurelia startup nor via the 'dependencies' decorator or static property.",3553:"RouteContext must be provided when resolving an imported module",3554:'Invalid route config property: "%s". Expected %s, but got %s.',3555:"Invalid route config: expected an object or string, but got: %s",3556:'Unknown route config property: "%s.%s". Please specify known properties only.',3557:`Unknown redirect route config property: "%s.%s". Only 'path' and 'redirectTo' should be specified for redirects.`};function P(i,e,...t){const s=Mr[e]??"Unknown event";i.trace(`AUR${e}: ${s}`,...t)}function zs(i,e,...t){const s=Mr[e]??"Unknown event";i.debug(`AUR${e}: ${s}`,...t)}function Du(i,e,...t){{const s=Mr[e];i.warn(`AUR${e}: ${s}`,...t)}}function rg(i,e,...t){{const s=Mr[e];i.error(`AUR${e}: ${s}`,...t)}}function G(i,...e){{let t=Mr[i],s=0;for(;t.includes("%s")||s<e.length;)t=t.replace("%s",String(e[s++]));return`AUR${i}: ${t}`}}function io(i,e){throw e.error(i),i}class Ke{constructor(e,t,s){this._stack=e,this._cb=t,this._done=!1,this._next=null,this._head=s??this}static _start(e){return new Ke(0,e,null)}_push(){let e=this;do++e._stack,e=e._next;while(e!==null)}_pop(){let e=this;do--e._stack===0&&e._invoke(),e=e._next;while(e!==null)}_invoke(){const e=this._cb;e!==null&&(this._cb=null,e(this),this._done=!0)}_continueWith(e){return this._next===null?this._next=new Ke(this._stack,e,this._head):this._next._continueWith(e)}_start(){return this._head._push(),this._head._pop(),this}}function Nl(i,e){i=i.slice(),e=e.slice();const t=[];for(;i.length>0;){const s=i.shift(),n=s.context.vpa;if(t.every(r=>r.context.vpa!==n)){const r=e.findIndex(o=>o.context.vpa===n);r>=0?t.push(...e.splice(0,r+1)):t.push(s)}}return t.push(...e),t}function og(i){try{return JSON.stringify(i)}catch{return Object.prototype.toString.call(i)}}function ln(i){return typeof i=="string"?[i]:i}function Bu(i){return typeof i=="string"?i:i[0]}function Lo(i,e,t){const s=t?new URLSearchParams(i):i;if(e==null)return s;for(const[n,r]of Object.entries(e))r!=null&&s.append(n,r);return s}const Fn=Ni.toView,lC=Ni.fromView;function ga(i){return typeof i=="object"&&i!==null&&!pa(i)}function cC(i){return ga(i)&&Object.prototype.hasOwnProperty.call(i,"name")===!0}function _a(i){return ga(i)&&Object.prototype.hasOwnProperty.call(i,"component")===!0}function ag(i){return ga(i)&&Object.prototype.hasOwnProperty.call(i,"redirectTo")===!0}function ma(i){return ga(i)&&Object.prototype.hasOwnProperty.call(i,"component")===!0}function Ge(i,e,t){throw new Error(G(3554,e,i,og(t)))}function po(i,e){if(i==null)throw new Error(G(3555,i));const t=Object.keys(i);for(const s of t){const n=i[s],r=[e,s].join(".");switch(s){case"id":case"viewport":case"redirectTo":typeof n!="string"&&Ge("string",r,n);break;case"caseSensitive":case"nav":typeof n!="boolean"&&Ge("boolean",r,n);break;case"data":(typeof n!="object"||n===null)&&Ge("object",r,n);break;case"title":switch(typeof n){case"string":case"function":break;default:Ge("string or function",r,n)}break;case"path":if(n instanceof Array)for(let o=0;o<n.length;++o)typeof n[o]!="string"&&Ge("string",`${r}[${o}]`,n[o]);else typeof n!="string"&&Ge("string or Array of strings",r,n);break;case"component":Qa(n,r,"component");break;case"routes":{n instanceof Array||Ge("Array",r,n);for(const o of n){const a=`${r}[${n.indexOf(o)}]`;Qa(o,a,"component")}break}case"transitionPlan":switch(typeof n){case"string":switch(n){case"none":case"replace":case"invoke-lifecycles":break;default:Ge("string('none'|'replace'|'invoke-lifecycles') or function",r,n)}break;case"function":break;default:Ge("string('none'|'replace'|'invoke-lifecycles') or function",r,n)}break;case"fallback":Qa(n,r,"fallback");break;default:throw new Error(G(3556,e,s))}}}function hC(i,e){if(i==null)throw new Error(G(3555,i));const t=Object.keys(i);for(const s of t){const n=i[s],r=[e,s].join(".");switch(s){case"path":if(n instanceof Array)for(let o=0;o<n.length;++o)typeof n[o]!="string"&&Ge("string",`${r}[${o}]`,n[o]);else typeof n!="string"&&Ge("string or Array of strings",r,n);break;case"redirectTo":typeof n!="string"&&Ge("string",r,n);break;default:throw new Error(G(3557,e,s))}}}function Qa(i,e,t){switch(typeof i){case"function":break;case"object":if(i instanceof Promise)break;if(ag(i)){hC(i,e);break}if(_a(i)){po(i,e);break}!pa(i)&&!cC(i)&&Ge(`an object with at least a '${t}' property (see Routeable)`,e,i);break;case"string":break;default:Ge("function, object or string (see Routeable)",e,i)}}function lg(i,e){if(i===e)return!0;if(typeof i!=typeof e||i===null||e===null||Object.getPrototypeOf(i)!==Object.getPrototypeOf(e))return!1;const t=Object.keys(i),s=Object.keys(e);if(t.length!==s.length)return!1;for(let n=0,r=t.length;n<r;++n){const o=t[n];if(o!==s[n]||i[o]!==e[o])return!1}return!0}const cg="au-nav-id";class uC{constructor(e,t,s){this._events=e,this._serial=t,this._inner=s,this._disposed=!1}dispose(){if(!this._disposed){this._disposed=!0,this._inner.dispose();const e=this._events._subscriptions;e.splice(e.indexOf(this),1)}}}const va=ut.createInterface("IRouterEvents",i=>i.singleton(dC));class dC{constructor(){this._subscriptionSerial=0,this._subscriptions=[],this._ea=S(Dm),this._logger=S(Be).scopeTo("RouterEvents")}publish(e){P(this._logger,3200,e),this._ea.publish(e.name,e)}subscribe(e,t){const s=new uC(this,++this._subscriptionSerial,this._ea.subscribe(e,n=>{P(this._logger,3201,s._serial,e),t(n)}));return this._subscriptions.push(s),s}}class pC{get name(){return"au:router:location-change"}constructor(e,t,s,n){this.id=e,this.url=t,this.trigger=s,this.state=n}toString(){return`LocationChangeEvent(id:${this.id},url:'${this.url}',trigger:'${this.trigger}')`}}class fC{get name(){return"au:router:navigation-start"}constructor(e,t,s,n){this.id=e,this.instructions=t,this.trigger=s,this.managedState=n}toString(){return`NavigationStartEvent(id:${this.id},instructions:'${this.instructions}',trigger:'${this.trigger}')`}}class gC{get name(){return"au:router:navigation-end"}constructor(e,t,s){this.id=e,this.instructions=t,this.finalInstructions=s}toString(){return`NavigationEndEvent(id:${this.id},instructions:'${this.instructions}',finalInstructions:'${this.finalInstructions}')`}}class _C{get name(){return"au:router:navigation-cancel"}constructor(e,t,s){this.id=e,this.instructions=t,this.reason=s}toString(){return`NavigationCancelEvent(id:${this.id},instructions:'${this.instructions}',reason:${String(this.reason)})`}}class mC{get name(){return"au:router:navigation-error"}constructor(e,t,s){this.id=e,this.instructions=t,this.error=s}toString(){return`NavigationErrorEvent(id:${this.id},instructions:'${this.instructions}',error:${String(this.error)})`}}const hg=ut.createInterface("IBaseHref"),ug=ut.createInterface("ILocationManager",i=>i.singleton(vC));class vC{constructor(){this._eventId=0,this._logger=S(Be).root.scopeTo("LocationManager"),this._events=S(va),this._history=S(b0),this._location=S(v0),this._window=S(Br),this._baseHref=S(hg),this._event=S(Wc).useUrlFragmentHash?"hashchange":"popstate",zs(this._logger,3100,this._baseHref.href)}startListening(){P(this._logger,3101,this._event),this._window.addEventListener(this._event,this,!1)}stopListening(){P(this._logger,3102,this._event),this._window.removeEventListener(this._event,this,!1)}handleEvent(e){this._events.publish(new pC(++this._eventId,this.getPath(),this._event,"state"in e?e.state:null))}pushState(e,t,s){s=this.addBaseHref(s);try{const n=JSON.stringify(e);P(this._logger,3103,n,t,s)}catch{Du(this._logger,3105,t,s)}this._history.pushState(e,t,s)}replaceState(e,t,s){s=this.addBaseHref(s);try{const n=JSON.stringify(e);P(this._logger,3104,n,t,s)}catch{Du(this._logger,3106,t,s)}this._history.replaceState(e,t,s)}getPath(){const{pathname:e,search:t,hash:s}=this._location;return this.removeBaseHref(`${e}${bC(t)}${s}`)}addBaseHref(e){let t,s=this._baseHref.href;return s.endsWith("/")&&(s=s.slice(0,-1)),s.length===0?t=e:(e.startsWith("/")&&(e=e.slice(1)),t=`${s}/${e}`),t}removeBaseHref(e){const t=this._baseHref.pathname;return e.startsWith(t)&&(e=e.slice(t.length)),dg(e)}}function dg(i){let e,t,s;return(s=i.indexOf("?"))>=0||(s=i.indexOf("#"))>=0?(e=i.slice(0,s),t=i.slice(s)):(e=i,t=""),e.endsWith("/")?e=e.slice(0,-1):e.endsWith("/index.html")&&(e=e.slice(0,-11)),`${e}${t}`}function bC(i){return i.length>0&&!i.startsWith("?")?`?${i}`:i}const fo=U;class Cs{get path(){const e=this._path;if(e.length>0)return e;const t=ie.getDefinition(this.component);return this._path=[t.name,...t.aliases]}constructor(e,t,s,n,r,o,a,l,c,u,h,d){this.id=e,this._path=t,this.title=s,this.redirectTo=n,this.caseSensitive=r,this.transitionPlan=o,this.viewport=a,this.data=l,this.routes=c,this.fallback=u,this.component=h,this.nav=d,this._configurationFromHookApplied=!1}static _create(e,t){if(typeof e=="string"||e instanceof Array){const s=ln(e),n=(t==null?void 0:t.redirectTo)??null,r=(t==null?void 0:t.caseSensitive)??!1,o=Bu((t==null?void 0:t.id)??(s instanceof Array?s[0]:s)),a=(t==null?void 0:t.title)??null,l=(t==null?void 0:t.transitionPlan)??null,c=(t==null?void 0:t.viewport)??wn,u=(t==null?void 0:t.data)??{},h=(t==null?void 0:t.routes)??fo;return new Cs(o,s,a,n,r,l,c,u,h,(t==null?void 0:t.fallback)??null,t,(t==null?void 0:t.nav)??!0)}else if(typeof e=="object"){const s=e;po(s,"");const n=ln(s.path??(t==null?void 0:t.path)??U),r=s.title??(t==null?void 0:t.title)??null,o=s.redirectTo??(t==null?void 0:t.redirectTo)??null,a=s.caseSensitive??(t==null?void 0:t.caseSensitive)??!1,l=s.id??(t==null?void 0:t.id)??(n instanceof Array?n[0]:n),c=s.transitionPlan??(t==null?void 0:t.transitionPlan)??null,u=s.viewport??(t==null?void 0:t.viewport)??wn,h={...t==null?void 0:t.data,...s.data},d=[...s.routes??fo,...(t==null?void 0:t.routes)??fo];return new Cs(l,n,r,o,a,c,u,h,d,s.fallback??(t==null?void 0:t.fallback)??null,s.component??t??null,s.nav??!0)}else Ge("string, function/class or object","",e)}_applyChildRouteConfig(e,t){po(e,this.path[0]??"");const s=ln(e.path??this.path);return new Cs(Bu(e.id??this.id??s),s,e.title??this.title,e.redirectTo??this.redirectTo,e.caseSensitive??this.caseSensitive,e.transitionPlan??this.transitionPlan??(t==null?void 0:t.transitionPlan)??null,e.viewport??this.viewport,e.data??this.data,e.routes??this.routes,e.fallback??this.fallback??(t==null?void 0:t.fallback)??null,this.component,e.nav??this.nav)}_getTransitionPlan(e,t,s){if(o(e,t)&&lg(e.params,t.params))return"none";if(s!=null)return s;const n=this.transitionPlan??"replace";return typeof n=="function"?n(e,t):n;function r(a){return a.replace(`/*${Xt}`,"")}function o(a,l){const c=a.finalPath,u=l.finalPath;return c.length===0||u.length===0||r(c)===r(u)}}_applyFromConfigurationHook(e,t,s){if(this._configurationFromHookApplied)throw new Error(G(3550));if(typeof e.getRouteConfig=="function")return L(e.getRouteConfig(t,s),n=>{if(this._configurationFromHookApplied=!0,n==null)return;let r=(t==null?void 0:t.path)??"";typeof r!="string"&&(r=r[0]),po(n,r),this.id=n.id??this.id,this._path=ln(n.path??this.path),this.title=n.title??this.title,this.redirectTo=n.redirectTo??this.redirectTo,this.caseSensitive=n.caseSensitive??this.caseSensitive,this.transitionPlan=n.transitionPlan??this.transitionPlan,this.viewport=n.viewport??this.viewport,this.data=n.data??this.data,this.routes=n.routes??this.routes,this.fallback=n.fallback??this.fallback,this.nav=n.nav??this.nav})}_clone(){return new Cs(this.id,this.path,this.title,this.redirectTo,this.caseSensitive,this.transitionPlan,this.viewport,this.data,this.routes,this.fallback,this.component,this.nav)}_getFallback(e,t,s){const n=this.fallback;return typeof n=="function"&&!ie.isType(n)?n(e,t,s):n}}const yi={name:Xs("route-configuration"),isConfigured(i){return xt.has(yi.name,i)},configure(i,e){const t=Cs._create(i,e);return xt.define(t,e,yi.name),e},getConfig(i){return yi.isConfigured(i)||yi.configure({},i),xt.get(yi.name,i)}};function wC(i){return function(e,t){return t.addInitializer(function(){yi.configure(i,this)}),e}}function ur(i,e,t,s,n){if(ag(i))return Cs._create(i,null);const[r,o]=ba(i,n);return L(o,a=>{const l=a.Type,c=yi.getConfig(l);return _a(i)?c._applyChildRouteConfig(i,t):e?c._clone():!c._configurationFromHookApplied&&r.type===4&&typeof i.getRouteConfig=="function"?L(c._applyFromConfigurationHook(i,t,s),()=>c):c})}function ba(i,e){const t=pg(i);let s;switch(t.type){case 0:{if(e==null)throw new Error(G(3551));const n=ie.find(e.container,t.value);if(n===null)throw new Error(G(3552,t.value,e));s=n;break}case 2:s=t.value;break;case 4:s=ie.getDefinition(t.value.constructor);break;case 3:if(e==null)throw new Error(G(3553));s=e._resolveLazy(t.value);break}return[t,s]}function pg(i){return _a(i)?pg(i.component):gt.create(i)}const Vo=["?","#","/","+","(",")",".","@","!","=",",","&","'","~",";"];class yC{get _done(){return this._rest.length===0}constructor(e){this._input=e,this._buffers=[],this._bufferIndex=0,this._index=0,this._rest=e}_startsWith(...e){const t=this._rest;return e.some(function(s){return t.startsWith(s)})}_consumeOptional(e){return this._startsWith(e)?(this._rest=this._rest.slice(e.length),this._index+=e.length,this._append(e),!0):!1}_consume(e){this._consumeOptional(e)||this._expect(`'${e}'`)}_expect(e){throw new Error(G(3500,e,this._index,this._input,this._rest,this._rest))}_ensureDone(){if(!this._done)throw new Error(G(3501,this._rest,this._index,this._input))}_advance(){const e=this._rest[0];this._rest=this._rest.slice(1),++this._index,this._append(e)}_record(){this._buffers[this._bufferIndex++]=""}_playback(){const e=--this._bufferIndex,t=this._buffers,s=t[e];return t[e]="",s}_discard(){this._buffers[--this._bufferIndex]=""}_append(e){const t=this._bufferIndex,s=this._buffers;for(let n=0;n<t;++n)s[n]+=e}}const Nu=new Map;class Ti{get kind(){return"Route"}constructor(e,t,s,n){this.isAbsolute=e,this.root=t,this.queryParams=s,this.fragment=n}static parse(e){const t=e.toString();let s=Nu.get(t);return s===void 0&&Nu.set(t,s=Ti._$parse(e)),s}static _$parse(e){const t=e.path;if(t==="")return new Ti(!1,yr.Empty,e.query,e.fragment);const s=new yC(t);s._record();const n=s._consumeOptional("/"),r=wa._parse(s);return s._ensureDone(),s._discard(),new Ti(n,r,e.query,e.fragment)}toInstructionTree(e){return new ht(e,this.isAbsolute,this.root._toInstructions(0,0),Lo(this.queryParams,e.queryParams,!0),this.fragment??e.fragment)}}class wa{get kind(){return"CompositeSegment"}constructor(e){this.siblings=e}static _parse(e){e._record();const t=e._consumeOptional("+"),s=[];do s.push(Do._parse(e));while(e._consumeOptional("+"));return!t&&s.length===1?(e._discard(),s[0]):(e._discard(),new wa(s))}_toInstructions(e,t){switch(this.siblings.length){case 0:return[];case 1:return this.siblings[0]._toInstructions(e,t);case 2:return[...this.siblings[0]._toInstructions(e,0),...this.siblings[1]._toInstructions(0,t)];default:return[...this.siblings[0]._toInstructions(e,0),...this.siblings.slice(1,-1).flatMap(function(s){return s._toInstructions(0,0)}),...this.siblings[this.siblings.length-1]._toInstructions(0,t)]}}}class Do{get kind(){return"ScopedSegment"}constructor(e,t){this.left=e,this.right=t}static _parse(e){e._record();const t=zc._parse(e);if(e._consumeOptional("/")){const s=Do._parse(e);return e._discard(),new Do(t,s)}return e._discard(),t}_toInstructions(e,t){const s=this.left._toInstructions(e,0),n=this.right._toInstructions(0,t);let r=s[s.length-1];for(;r.children.length>0;)r=r.children[r.children.length-1];return r.children.push(...n),s}}class zc{get kind(){return"SegmentGroup"}constructor(e){this.expression=e}static _parse(e){if(e._record(),e._consumeOptional("(")){const t=wa._parse(e);return e._consume(")"),e._discard(),new zc(t)}return e._discard(),yr._parse(e)}_toInstructions(e,t){return this.expression._toInstructions(e+1,t+1)}}class yr{get kind(){return"Segment"}static get Empty(){return new yr(Cr.Empty,kr.Empty,!0)}constructor(e,t,s){this.component=e,this.viewport=t,this.scoped=s}static _parse(e){e._record();const t=Cr._parse(e),s=kr._parse(e),n=!e._consumeOptional("!");return e._discard(),new yr(t,s,n)}_toInstructions(e,t){return[Ve.create({component:this.component.name,params:this.component.parameterList._toObject(),viewport:this.viewport.name,open:e,close:t})]}}class Cr{get kind(){return"Component"}static get Empty(){return new Cr("",Ar.Empty)}constructor(e,t){switch(this.name=e,this.parameterList=t,e.charAt(0)){case":":this.isParameter=!0,this.isStar=!1,this.isDynamic=!0,this.parameterName=e.slice(1);break;case"*":this.isParameter=!1,this.isStar=!0,this.isDynamic=!0,this.parameterName=e.slice(1);break;default:this.isParameter=!1,this.isStar=!1,this.isDynamic=!1,this.parameterName=e;break}}static _parse(e){if(e._record(),e._record(),!e._done)if(e._startsWith("./"))e._advance();else if(e._startsWith("../"))e._advance(),e._advance();else for(;!e._done&&!e._startsWith(...Vo);)e._advance();const t=e._playback();t.length===0&&e._expect("component name");const s=Ar._parse(e);return e._discard(),new Cr(t,s)}}class kr{get kind(){return"Viewport"}static get Empty(){return new kr("")}constructor(e){this.name=e}static _parse(e){e._record();let t=null;if(e._consumeOptional("@")){for(e._record();!e._done&&!e._startsWith(...Vo);)e._advance();t=decodeURIComponent(e._playback()),t.length===0&&e._expect("viewport name")}return e._discard(),new kr(t)}}class Ar{get kind(){return"ParameterList"}static get Empty(){return new Ar([])}constructor(e){this.expressions=e}static _parse(e){e._record();const t=[];if(e._consumeOptional("(")){do if(t.push(Bo._parse(e,t.length)),!e._consumeOptional(","))break;while(!e._done&&!e._startsWith(")"));e._consume(")")}return e._discard(),new Ar(t)}_toObject(){const e={};for(const t of this.expressions)e[t.key]=t.value;return e}}class Bo{get kind(){return"Parameter"}static get Empty(){return new Bo("","")}constructor(e,t){this.key=e,this.value=t}static _parse(e,t){for(e._record(),e._record();!e._done&&!e._startsWith(...Vo);)e._advance();let s=e._playback();s.length===0&&e._expect("parameter key");let n;if(e._consumeOptional("=")){for(e._record();!e._done&&!e._startsWith(...Vo);)e._advance();n=decodeURIComponent(e._playback()),n.length===0&&e._expect("parameter value")}else n=s,s=t.toString();return e._discard(),new Bo(s,n)}}class CC{constructor(e,t){this.viewportName=e,this.componentName=t}toString(){return`VR(viewport:'${this.viewportName}',component:'${this.componentName}')`}}const Mu=new WeakMap;class No{get _currState(){return this._state&16256}set _currState(e){this._state=this._state&127|e}get _nextState(){return this._state&127}set _nextState(e){this._state=this._state&16256|e}constructor(e,t,s){this.viewport=e,this.hostController=t,this._isActive=!1,this._curCA=null,this._nextCA=null,this._state=8256,this._$plan="replace",this._currNode=null,this._nextNode=null,this._currTransition=null,this._cancellationPromise=null,this._logger=s.container.get(Be).scopeTo(`ViewportAgent<${s._friendlyPath}>`),P(this._logger,3300)}static for(e,t){let s=Mu.get(e);if(s===void 0){const n=Qe.getCachedOrThrow(e);Mu.set(e,s=new No(e,n,t))}return s}_activateFromViewport(e,t){const s=this._currTransition;s!==null&&Jt(s),this._isActive=!0;const n=this._logger.scopeTo("activateFromViewport()");switch(this._nextState){case 64:switch(this._currState){case 8192:P(n,3301,this);return;case 4096:return P(n,3302,this),this._curCA._activate(e,t);default:this._unexpectedState("activateFromViewport 1")}case 2:{if(this._currTransition===null)throw new Error(G(3350,this));P(n,3303,this);const r=Ke._start(a=>{this._activate(e,this._currTransition,a)}),o=new Promise(a=>{r._continueWith(()=>{a()})});return r._start()._done?void 0:o}default:this._unexpectedState("activateFromViewport 2")}}_deactivateFromViewport(e,t){const s=this._currTransition;s!==null&&Jt(s),this._isActive=!1;const n=this._logger.scopeTo("deactivateFromViewport()");switch(this._currState){case 8192:P(n,3304,this);return;case 4096:return P(n,3305,this),this._curCA._deactivate(e,t);case 128:P(n,3306,this);return;default:{if(this._currTransition===null)throw new Error(G(3351,this));P(n,3307,this);const r=Ke._start(a=>{this._deactivate(e,this._currTransition,a)}),o=new Promise(a=>{r._continueWith(()=>{a()})});return r._start()._done?void 0:o}}}_handles(e){if(!this._isAvailable())return!1;const t=this.viewport,s=e.viewportName,n=t.name,r=this._logger.scopeTo("handles()");if(s!==wn&&n!==s)return P(r,3308,e,n),!1;const o=t.usedBy;return o.length>0&&!o.split(",").includes(e.componentName)?(P(r,3309,e,o),!1):(P(r,3310,n,e),!0)}_isAvailable(){const e=this._logger.scopeTo("isAvailable()");return this._isActive?this._nextState!==64?(P(e,3312,this._nextNode),!1):!0:(P(e,3311),!1)}_canUnload(e,t){if(this._currTransition===null&&(this._currTransition=e),Jt(e),e.guardsResult!==!0)return;t._push();const s=this._logger.scopeTo("canUnload()");L(this._cancellationPromise,()=>{Ke._start(n=>{P(s,3313,this);for(const r of this._currNode.children)r.context.vpa._canUnload(e,n)})._continueWith(n=>{switch(this._currState){case 4096:switch(P(s,3314,this),this._$plan){case"none":this._currState=1024;return;case"invoke-lifecycles":case"replace":this._currState=2048,n._push(),Ke._start(r=>{P(s,3315,this),this._curCA._canUnload(e,this._nextNode,r)})._continueWith(()=>{P(s,3316,this),this._currState=1024,n._pop()})._start();return}case 8192:P(s,3317,this);return;default:e._handleError(new Error(`Unexpected state at canUnload of ${this}`))}})._continueWith(()=>{t._pop()})._start()})}_canLoad(e,t){if(this._currTransition===null&&(this._currTransition=e),Jt(e),e.guardsResult!==!0)return;t._push();const s=this._logger.scopeTo("canLoad()");Ke._start(n=>{switch(this._nextState){case 32:switch(P(s,3318,this),this._nextState=16,this._$plan){case"none":return;case"invoke-lifecycles":return this._curCA._canLoad(e,this._nextNode,n);case"replace":n._push(),L(this._nextNode.context._createComponentAgent(this.hostController,this._nextNode),r=>{(this._nextCA=r)._canLoad(e,this._nextNode,n),n._pop()})}case 64:P(s,3319,this);return;default:this._unexpectedState("canLoad")}})._continueWith(n=>{const r=this._nextNode;switch(this._$plan){case"none":case"invoke-lifecycles":{P(s,3320,r,this._$plan),n._push();const o=r.context;L(o.allResolved,()=>L(L(oe(...r.residue.splice(0).map(a=>Ai(this._logger,r,a))),()=>oe(...o.getAvailableViewportAgents().reduce((a,l)=>{const c=l.viewport,u=c.default;return u===null||a.push(Ai(this._logger,r,Ve.create({component:u,viewport:c.name}))),a},[]))),()=>{n._pop()}));return}case"replace":P(s,3321,r);return}})._continueWith(n=>{switch(this._nextState){case 16:P(s,3322,this),this._nextState=8;for(const r of this._nextNode.children)r.context.vpa._canLoad(e,n);return;case 64:return;default:this._unexpectedState("canLoad")}})._continueWith(()=>{P(s,3323,this),t._pop()})._start()}_unloading(e,t){Jt(e),Nn(this,e),t._push();const s=this._logger.scopeTo("unloading()");Ke._start(n=>{P(s,3324,this);for(const r of this._currNode.children)r.context.vpa._unloading(e,n)})._continueWith(n=>{switch(this._currState){case 1024:switch(P(s,3325,this),this._$plan){case"none":this._currState=256;return;case"invoke-lifecycles":case"replace":this._currState=512,n._push(),Ke._start(r=>{P(s,3326,this),this._curCA._unloading(e,this._nextNode,r)})._continueWith(()=>{P(s,3327,this),this._currState=256,n._pop()})._start();return}case 8192:P(s,3328,this);for(const r of this._currNode.children)r.context.vpa._unloading(e,t);return;default:this._unexpectedState("unloading")}})._continueWith(()=>{t._pop()})._start()}_loading(e,t){Jt(e),Nn(this,e),t._push();const s=this._logger.scopeTo("loading()");Ke._start(n=>{switch(this._nextState){case 8:switch(P(s,3329,this),this._nextState=4,this._$plan){case"none":return;case"invoke-lifecycles":return this._curCA._loading(e,this._nextNode,n);case"replace":return this._nextCA._loading(e,this._nextNode,n)}case 64:P(s,3330,this);return;default:this._unexpectedState("loading")}})._continueWith(n=>{switch(this._nextState){case 4:P(s,3331,this),this._nextState=2;for(const r of this._nextNode.children)r.context.vpa._loading(e,n);return;case 64:return;default:this._unexpectedState("loading")}})._continueWith(()=>{P(s,3332,this),t._pop()})._start()}_deactivate(e,t,s){Jt(t),Nn(this,t),s._push();const n=this._logger.scopeTo("deactivate()");switch(this._currState){case 256:switch(P(n,3333,this),this._currState=128,this._$plan){case"none":case"invoke-lifecycles":s._pop();return;case"replace":{const r=this.hostController,o=this._curCA;t._run(()=>L(o._deactivate(e,r),()=>{e===null&&o._dispose()}),()=>{s._pop()})}}return;case 8192:P(n,3334,this),s._pop();return;case 128:P(n,3335,this),s._pop();return;default:this._unexpectedState("deactivate")}}_activate(e,t,s){Jt(t),Nn(this,t),s._push();const n=this._logger.scopeTo("activate()");if(this._nextState===32){P(n,3336,this),Ke._start(r=>{this._canLoad(t,r)})._continueWith(r=>{this._loading(t,r)})._continueWith(r=>{this._activate(e,t,r)})._continueWith(()=>{s._pop()})._start();return}switch(this._nextState){case 2:P(n,3337,this),this._nextState=1,Ke._start(r=>{switch(this._$plan){case"none":case"invoke-lifecycles":return;case"replace":{const o=this.hostController;t._run(()=>(r._push(),this._nextCA._activate(e,o)),()=>{r._pop()})}}})._continueWith(r=>{this._processDynamicChildren(t,r)})._continueWith(()=>{s._pop()})._start();return;case 64:P(n,3338,this),s._pop();return;default:this._unexpectedState("activate")}}_swap(e,t){const s=this._logger.scopeTo("swap()");if(this._currState===8192){P(s,3339,this),this._activate(null,e,t);return}if(this._nextState===64){P(s,3340,this),this._deactivate(null,e,t);return}switch(Jt(e),Nn(this,e),this._currState===256&&this._nextState===2||this._unexpectedState("swap"),this._currState=128,this._nextState=1,this._$plan){case"none":case"invoke-lifecycles":{P(s,3341,this);const n=Nl(this._nextNode.children,this._currNode.children);for(const r of n)r.context.vpa._swap(e,t);return}case"replace":{P(s,3342,this);const n=this.hostController,r=this._curCA,o=this._nextCA;t._push(),Ke._start(a=>{e._run(()=>(a._push(),L(r._deactivate(null,n),()=>r._dispose())),()=>{a._pop()})})._continueWith(a=>{e._run(()=>(a._push(),o._activate(null,n)),()=>{a._pop()})})._continueWith(a=>{this._processDynamicChildren(e,a)})._continueWith(()=>{t._pop()})._start();return}}}_processDynamicChildren(e,t){P(this._logger,3343,this);const s=this._nextNode;e._run(()=>{t._push();const n=s.context;return L(n.allResolved,()=>{const r=s.children.slice();return L(oe(...s.residue.splice(0).map(o=>Ai(this._logger,s,o))),()=>L(oe(...n.getAvailableViewportAgents().reduce((o,a)=>{const l=a.viewport,c=l.default;return c===null||o.push(Ai(this._logger,s,Ve.create({component:c,viewport:l.name}))),o},[])),()=>s.children.filter(o=>!r.includes(o))))})},n=>{Ke._start(r=>{for(const o of n)e._run(()=>(r._push(),o.context.vpa._canLoad(e,r)),()=>{r._pop()})})._continueWith(r=>{for(const o of n)e._run(()=>(r._push(),o.context.vpa._loading(e,r)),()=>{r._pop()})})._continueWith(r=>{for(const o of n)e._run(()=>(r._push(),o.context.vpa._activate(null,e,r)),()=>{r._pop()})})._continueWith(()=>{t._pop()})._start()})}_scheduleUpdate(e,t){var n;switch(this._nextState){case 64:this._nextNode=t,this._nextState=32;break;default:this._unexpectedState("scheduleUpdate 1")}switch(this._currState){case 8192:case 4096:case 1024:break;default:this._unexpectedState("scheduleUpdate 2")}const s=((n=this._curCA)==null?void 0:n._routeNode)??null;s===null||s.component!==t.component?this._$plan="replace":this._$plan=t.context.config._getTransitionPlan(s,t,e.transitionPlan),P(this._logger,3344,this)}_cancelUpdate(){var s,n;this._currNode!==null&&this._currNode.children.forEach(function(r){r.context.vpa._cancelUpdate()}),this._nextNode!==null&&this._nextNode.children.forEach(function(r){r.context.vpa._cancelUpdate()}),P(this._logger,3345,this._nextNode);let e=null,t=null;switch(this._currState){case 8192:case 4096:this._currTransition=null;break;case 2048:case 1024:this._currState=4096,this._currTransition=null;break;case 512:case 256:case 128:e=L((s=this._curCA)==null?void 0:s._deactivate(null,this.hostController),()=>{var r;(r=this._curCA)==null||r._dispose(),this._currState=8192,this._curCA=null});break}switch(this._nextState){case 64:case 32:case 16:case 8:this._nextNode=null,this._nextState=64;break;case 4:case 2:case 1:{t=L((n=this._nextCA)==null?void 0:n._deactivate(null,this.hostController),()=>{var r;(r=this._nextCA)==null||r._dispose(),this._$plan="replace",this._nextState=64,this._nextCA=null,this._nextNode=null});break}}e!==null&&t!==null&&(this._cancellationPromise=L(oe(e,t),()=>{this._currTransition=null,this._cancellationPromise=null}))}_endTransition(){if(this._currNode!==null&&this._currNode.children.forEach(function(e){e.context.vpa._endTransition()}),this._nextNode!==null&&this._nextNode.children.forEach(function(e){e.context.vpa._endTransition()}),this._currTransition!==null){const e=this._logger.scopeTo("endTransition()");switch(Jt(this._currTransition),this._nextState){case 64:switch(this._currState){case 8192:case 128:P(e,3346,this),this._currState=8192,this._curCA=null;break;default:this._unexpectedState("endTransition 1")}break;case 1:switch(this._currState){case 8192:case 128:switch(this._$plan){case"none":P(e,3347,this),this._currState=4096;break;case"invoke-lifecycles":P(e,3347,this),this._currState=4096,this._curCA._routeNode=this._nextNode;break;case"replace":P(e,3348,this),this._currState=4096,this._curCA=this._nextCA;break}this._currNode=this._nextNode;break;default:this._unexpectedState("endTransition 2")}break;default:this._unexpectedState("endTransition 3")}this._$plan="replace",this._nextState=64,this._nextNode=null,this._nextCA=null,this._currTransition=null}}toString(){return`VPA(state:${kC(this._state)},plan:'${this._$plan}',n:${this._nextNode},c:${this._currNode},viewport:${this.viewport})`}_dispose(){var e;P(this._logger,3349,this),(e=this._curCA)==null||e._dispose()}_unexpectedState(e){throw new Error(G(3352,e,this))}}function Nn(i,e){if(e.guardsResult!==!0)throw new Error(G(3353,e.guardsResult,i))}function Jt(i){if(i.error!==void 0&&!i.erredWithUnknownRoute)throw i.error}const ju=new Map;function kC(i){let e=ju.get(i);return e===void 0&&ju.set(i,e=AC(i)),e}function AC(i){const e=[];return(i&8192)===8192&&e.push("currIsEmpty"),(i&4096)===4096&&e.push("currIsActive"),(i&2048)===2048&&e.push("currCanUnload"),(i&1024)===1024&&e.push("currCanUnloadDone"),(i&512)===512&&e.push("currUnload"),(i&256)===256&&e.push("currUnloadDone"),(i&128)===128&&e.push("currDeactivate"),(i&64)===64&&e.push("nextIsEmpty"),(i&32)===32&&e.push("nextIsScheduled"),(i&16)===16&&e.push("nextCanLoad"),(i&8)===8&&e.push("nextCanLoadDone"),(i&4)===4&&e.push("nextLoad"),(i&2)===2&&e.push("nextLoadDone"),(i&1)===1&&e.push("nextActivate"),e.join("|")}class $r{get root(){return this._tree.root}get isInstructionsFinalized(){return this._isInstructionsFinalized}constructor(e,t,s,n,r,o,a,l,c,u,h,d,p){this.path=e,this.finalPath=t,this.context=s,this._originalInstruction=n,this.instruction=r,this.params=o,this.queryParams=a,this.fragment=l,this.data=c,this._viewport=u,this.title=h,this.component=d,this.residue=p,this._version=1,this._isInstructionsFinalized=!1,this.children=[],this._originalInstruction??(this._originalInstruction=r)}static create(e){const{[Xt]:t,...s}=e.params??{};return new $r(e.path,e.finalPath,e.context,e.originalInstruction??e.instruction,e.instruction,Object.freeze(s),e.queryParams??jr,e.fragment??null,Object.freeze(e.data??$t),e._viewport??null,e.title??null,e.component,e.residue??[])}contains(e,t=!1){var s,n;if(this.context===e.options.context){const r=this.children,o=e.children;for(let a=0,l=r.length;a<l;++a)for(let c=0,u=o.length;c<u;++c){const h=o[c],d=t?(s=h.recognizedRoute)==null?void 0:s.route.endpoint:null,p=r[a+c]??null,f=p!==null?p.isInstructionsFinalized?p.instruction:p._originalInstruction:null,_=(n=f==null?void 0:f.recognizedRoute)==null?void 0:n.route.endpoint;if(a+c<l&&(((d==null?void 0:d.equalsOrResidual(_))??!1)||((f==null?void 0:f.contains(h))??!1))){if(c+1===u)return!0}else break}}return this.children.some(function(r){return r.contains(e,t)})}_appendChild(e){this.children.push(e),e._setTree(this._tree)}_clearChildren(){for(const e of this.children)e._clearChildren(),e.context.vpa._cancelUpdate();this.children.length=0}getTitle(e){const t=[...this.children.map(s=>s.getTitle(e)),typeof this.title=="function"?this.title.call(void 0,this):this.title].filter(s=>s!==null);return t.length===0?null:t.join(e)}computeAbsolutePath(){if(this.context.isRoot)return"";const e=this.context.parent.node.computeAbsolutePath(),t=this.instruction.toUrlComponent(!1);return e.length>0?t.length>0?`${e}/${t}`:e:t}_setTree(e){this._tree=e;for(const t of this.children)t._setTree(e)}_finalizeInstruction(){this._isInstructionsFinalized=!0;const e=this.children.map(s=>s._finalizeInstruction()),t=this.instruction._clone();return t.children.splice(0,t.children.length,...e),this.instruction=t}_clone(){const e=new $r(this.path,this.finalPath,this.context,this._originalInstruction,this.instruction,this.params,this.queryParams,this.fragment,this.data,this._viewport,this.title,this.component,[...this.residue]),t=this.children,s=t.length;for(let n=0;n<s;++n)e.children.push(t[n]._clone());return e._version=this._version+1,e.context.node===this&&(e.context.node=e),e}toString(){var n,r,o,a;const e=[],t=((r=(n=this.context)==null?void 0:n.config.component)==null?void 0:r.name)??"";t.length>0&&e.push(`c:'${t}'`);const s=((o=this.context)==null?void 0:o.config.path)??"";return s.length>0&&e.push(`path:'${s}'`),this.children.length>0&&e.push(`children:[${this.children.map(String).join(",")}]`),this.residue.length>0&&e.push(`residue:${this.residue.map(function(l){return typeof l=="string"?`'${l}'`:String(l)}).join(",")}`),`RN(ctx:'${(a=this.context)==null?void 0:a._friendlyPath}',${e.join(",")})`}}class Hc{constructor(e,t,s,n){this.options=e,this.queryParams=t,this.fragment=s,this.root=n}contains(e,t=!1){return this.root.contains(e,t)}_clone(){const e=new Hc(this.options._clone(),this.queryParams,this.fragment,this.root._clone());return e.root._setTree(this),e}_finalizeInstructions(){return new ht(this.options,!0,this.root.children.map(e=>e._finalizeInstruction()),this.queryParams,this.fragment)}_mergeQuery(e){this.queryParams=Object.freeze(Lo(this.queryParams,e,!0))}toString(){return this.root.toString()}}function Ai(i,e,t){var s;switch(i.trace("createAndAppendNodes(node:%s,vi:%s",e,t),t.component.type){case 0:switch(t.component.value){case"..":e=((s=e.context.parent)==null?void 0:s.node)??e,e._clearChildren();case".":return oe(...t.children.map(n=>Ai(i,e,n)));default:{i.trace("createAndAppendNodes invoking createNode");const n=e.context,r=t._clone();let o=t.recognizedRoute;if(o!==null)return Bs(i,e,Ms(i,e,t,o,r));if(t.children.length===0){const p=n._generateViewportInstruction(t);if(p!==null){e._tree._mergeQuery(p.query);const f=p.vi;return f.children.push(...t.children),Bs(i,e,Ms(i,e,f,f.recognizedRoute,t))}}let a=0,l=t.component.value,c=t;for(;c.children.length===1&&(c=c.children[0],c.component.type===0);)++a,l=`${l}/${c.component.value}`;o=n.recognize(l),i.trace("createNode recognized route: %s",o);const u=(o==null?void 0:o.residue)??null;i.trace("createNode residue:",u);const h=u===null;if(o===null||u===l){const p=n._generateViewportInstruction({component:t.component.value,params:t.params??$t,open:t.open,close:t.close,viewport:t.viewport,children:t.children});if(p!==null)return e._tree._mergeQuery(p.query),Bs(i,e,Ms(i,e,p.vi,p.vi.recognizedRoute,t));const f=t.component.value;if(f==="")return;let _=t.viewport;(_===null||_.length===0)&&(_=wn);const g=n.getFallbackViewportAgent(_),v=g!==null?g.viewport._getFallback(t,e,n):n.config._getFallback(t,e,n);if(v===null)throw new Uc(G(3401,f,n._friendlyPath,_,f,n.component.name));if(typeof v=="string"){i.trace(`Fallback is set to '${v}'. Looking for a recognized route.`);const m=n.childRoutes.find(w=>w.id===v);if(m!==void 0)return Bs(i,e,Fu(i,m,e,t));i.trace(`No route configuration for the fallback '${v}' is found; trying to recognize the route.`);const A=n.recognize(v,!0);if(A!==null&&A.residue!==v)return Bs(i,e,Ms(i,e,t,A,null))}return i.trace(`The fallback '${v}' is not recognized as a route; treating as custom element name.`),L(ur(v,!1,n.config,null,n),m=>Bs(i,e,Fu(i,m,e,t)))}o.residue=null,t.component.value=h?l:l.slice(0,-(u.length+1));let d=!h;for(let p=0;p<a;++p){const f=t.children[0];if((u==null?void 0:u.startsWith(f.component.value))??!1){d=!1;break}t.viewport=f.viewport,t.children=f.children}return d&&t.children.unshift(Ve.create(u)),t.recognizedRoute=o,i.trace("createNode after adjustment vi:%s",t),Bs(i,e,Ms(i,e,t,o,r))}}case 3:case 4:case 2:{const n=e.context;return L(ba(t.component.value,n)[1],r=>{const{vi:o,query:a}=n._generateViewportInstruction({component:r,params:t.params??$t,open:t.open,close:t.close,viewport:t.viewport,children:t.children});return e._tree._mergeQuery(a),Bs(i,e,Ms(i,e,o,o.recognizedRoute,t))})}}}function Ms(i,e,t,s,n,r=s.route.endpoint.route){const o=e.context,a=e._tree;return L(r.handler,l=>{var w;if(r.handler=l,i.trace("creatingConfiguredNode(rdc:%s, vi:%s)",l,t),l.redirectTo===null){const k=(((w=t.viewport)==null?void 0:w.length)??0)>0,O=k?t.viewport:l.viewport;return L(ba(l.component,o)[1],R=>{const N=o._resolveViewportAgent(new CC(O,R.name));k||(t.viewport=N.viewport.name);const V=o.container.get(qs);return L(V.getRouteContext(N,R,null,N.hostController.container,o.config,o,l),M=>{i.trace("createConfiguredNode setting the context node");const K=M.node=$r.create({path:s.route.endpoint.route.path,finalPath:r.path,context:M,instruction:t,originalInstruction:n,params:s.route.params,queryParams:a.queryParams,fragment:a.fragment,data:l.data,_viewport:O,component:R,title:l.title,residue:t.children.slice()});return K._setTree(e._tree),i.trace("createConfiguredNode(vi:%s) -> %s",t,K),K})})}const c=Ti.parse(Ml.parse(r.path)),u=Ti.parse(Ml.parse(l.redirectTo));let h,d;const p=[];switch(c.root.kind){case"ScopedSegment":case"Segment":h=c.root;break;default:throw new Error(G(3502,c.root.kind))}switch(u.root.kind){case"ScopedSegment":case"Segment":d=u.root;break;default:throw new Error(G(3502,u.root.kind))}let f,_,g=!1,v=!1;for(;!(g&&v);){if(g)f=null;else if(h.kind==="Segment")f=h,g=!0;else if(h.left.kind==="Segment")switch(f=h.left,h.right.kind){case"ScopedSegment":case"Segment":h=h.right;break;default:throw new Error(G(3502,h.right.kind))}else throw new Error(G(3502,h.left.kind));if(v)_=null;else if(d.kind==="Segment")_=d,v=!0;else if(d.left.kind==="Segment")switch(_=d.left,d.right.kind){case"ScopedSegment":case"Segment":d=d.right;break;default:throw new Error(G(3502,d.right.kind))}else throw new Error(G(3502,d.left.kind));_!==null&&(_.component.isDynamic&&((f==null?void 0:f.component.isDynamic)??!1)?p.push(s.route.params[_.component.parameterName]):p.push(_.component.name))}const m=p.filter(Boolean).join("/"),A=o.recognize(m);if(A===null)throw new Uc(G(3402,m,o._friendlyPath,m,o.component.name));return Ms(i,e,Ve.create({recognizedRoute:A,component:m,children:t.children,viewport:t.viewport,open:t.open,close:t.close}),A,n)})}function Bs(i,e,t){return L(t,s=>(i.trace("appendNode($childNode:%s)",s),e._appendChild(s),s.context.vpa._scheduleUpdate(e._tree.options,s)))}function Fu(i,e,t,s){const n=new dr(new wr(new ng(new ig(e.path[0],e.caseSensitive,e),[]),$t),null);return s.children.length=0,Ms(i,t,s,n,null)}const jr=Object.freeze(new URLSearchParams);function $C(i){return dn(i)&&Object.prototype.hasOwnProperty.call(i,cg)===!0}function zu(i,e){return{...i,[cg]:e}}class Uc extends Error{}class Mo{get erredWithUnknownRoute(){return this._erredWithUnknownRoute}constructor(e,t,s,n,r,o,a,l,c,u,h,d,p,f,_){this.id=e,this.prevInstructions=t,this.instructions=s,this.finalInstructions=n,this.instructionsChanged=r,this.trigger=o,this.options=a,this.managedState=l,this.previousRouteTree=c,this.routeTree=u,this.promise=h,this.resolve=d,this.reject=p,this.guardsResult=f,this.error=_,this._erredWithUnknownRoute=!1}static _create(e){return new Mo(e.id,e.prevInstructions,e.instructions,e.finalInstructions,e.instructionsChanged,e.trigger,e.options,e.managedState,e.previousRouteTree,e.routeTree,e.promise,e.resolve,e.reject,e.guardsResult,void 0)}_run(e,t){if(this.guardsResult===!0)try{const s=e();s instanceof Promise?s.then(t).catch(n=>{this._handleError(n)}):t(s)}catch(s){this._handleError(s)}}_handleError(e){this._erredWithUnknownRoute=e instanceof Uc,this.reject(this.error=e)}toString(){return`T(id:${this.id},trigger:'${this.trigger}',instructions:${this.instructions})`}}const qs=ut.createInterface("IRouter",i=>i.singleton(Sr));class Sr{get _ctx(){const e=this._$ctx;if(e!==null)return e;if(!this._container.has(vt,!0))throw new Error(G(3271));return this._$ctx=this._container.get(vt)}get routeTree(){let e=this._routeTree;if(e===null){const t=this._ctx;e=this._routeTree=new Hc(es.create(this.options,{}),jr,null,$r.create({path:"",finalPath:"",context:t,instruction:null,component:ie.getDefinition(t.config.component),title:t.config.title}))}return e}get currentTr(){return this._currentTr??(this._currentTr=Mo._create({id:0,prevInstructions:this._instructions,instructions:this._instructions,finalInstructions:this._instructions,instructionsChanged:!0,trigger:"api",options:es.create(this.options,{}),managedState:null,previousRouteTree:this.routeTree._clone(),routeTree:this.routeTree,resolve:null,reject:null,promise:null,guardsResult:!0,error:void 0}))}set currentTr(e){this._currentTr=e}get isNavigating(){return this._isNavigating}constructor(){this._$ctx=null,this._routeTree=null,this._currentTr=null,this._navigated=!1,this._navigationId=0,this._nextTr=null,this._locationChangeSubscription=null,this._hasTitleBuilder=!1,this._isNavigating=!1,this._container=S(Bi),this._p=S(Ne),this._logger=S(Be).root.scopeTo("Router"),this._events=S(va),this._locationMgr=S(ug),this.options=S(Wc),this._vpaLookup=new Map,this._instructions=ht.create("",this.options),this._container.registerResolver(Sr,bt.instance(Sr,this))}_resolveContext(e){return Ss.resolve(this._ctx,e)}start(e){if(this._hasTitleBuilder=typeof this.options.buildTitle=="function",this._locationMgr.startListening(),this._locationChangeSubscription=this._events.subscribe("au:router:location-change",t=>{this._p.taskQueue.queueTask(()=>{const s=$C(t.state)?t.state:null,n=this.options,r=es.create(n,{historyStrategy:"replace"}),o=ht.create(t.url,n,r,this._ctx);this._enqueue(o,t.trigger,s,null)})}),!this._navigated&&e)return this.load(this._locationMgr.getPath(),{historyStrategy:this.options.historyStrategy!=="none"?"replace":"none"})}stop(){var e;this._locationMgr.stopListening(),(e=this._locationChangeSubscription)==null||e.dispose()}load(e,t){const s=this.createViewportInstructions(e,t);return P(this._logger,3250,s),this._enqueue(s,"api",null,null)}isActive(e,t){const s=this._resolveContext(t),n=e instanceof ht?e:this.createViewportInstructions(e,{context:s,historyStrategy:this.options.historyStrategy});return P(this._logger,3251,n,s),this.routeTree.contains(n,!1)}getRouteContext(e,t,s,n,r,o,a){const l=n.get(Be).scopeTo("RouteContext");return L(a instanceof Cs?a:ur(typeof(s==null?void 0:s.getRouteConfig)=="function"?s:t.Type,!1,r,null,o),c=>{let u=this._vpaLookup.get(e);u===void 0&&this._vpaLookup.set(e,u=new WeakMap);let h=u.get(c);if(h!==void 0)return P(l,3252,c),h;P(l,3253,c);const d=n.has(vt,!0)?n.get(vt):null;return u.set(c,h=new Ss(e,d,t,c,n,this)),h})}createViewportInstructions(e,t){if(e instanceof ht)return e;let s=(t==null?void 0:t.context)??null;typeof e=="string"&&(e=this._locationMgr.removeBaseHref(e));const n=ma(e);let r=n?e.component:e;if(typeof r=="string"&&r.startsWith("../")&&s!==null)for(s=this._resolveContext(s);r.startsWith("../")&&((s==null?void 0:s.parent)??null)!==null;)r=r.slice(3),s=s.parent;n?e.component=r:e=r;const o=this.options;return ht.create(e,o,es.create(o,{...t,context:s}),this._ctx)}_enqueue(e,t,s,n){const r=this.currentTr,o=this._logger;if(t!=="api"&&r.trigger==="api"&&r.instructions.equals(e))return zs(o,3254,t),!0;let a,l,c;const u=this.options.restorePreviousRouteTreeOnError;n===null||n.erredWithUnknownRoute||n.error!=null&&u?c=new Promise(function(d,p){a=d,l=p}):(zs(o,3255,n),c=n.promise,a=n.resolve,l=n.reject);const h=this._nextTr=Mo._create({id:++this._navigationId,trigger:t,managedState:s,prevInstructions:r.finalInstructions,finalInstructions:e,instructionsChanged:!r.finalInstructions.equals(e),instructions:e,options:e.options,promise:c,resolve:a,reject:l,previousRouteTree:this.routeTree,routeTree:this._routeTree=this.routeTree._clone(),guardsResult:!0,error:void 0});if(zs(o,3256,h),!this._isNavigating)try{this._run(h)}catch(d){h._handleError(d)}return h.promise.then(d=>(zs(o,3257,h),d)).catch(d=>{if(rg(o,3270,h,d),h.erredWithUnknownRoute)this._cancelNavigation(h);else if(this._isNavigating=!1,this._events.publish(new mC(h.id,h.instructions,d)),u)this._cancelNavigation(h);else{const p=this._nextTr;p!==null?p.previousRouteTree=h.previousRouteTree:this._routeTree=h.previousRouteTree}throw d})}_run(e){this.currentTr=e,this._nextTr=null,this._isNavigating=!0;let t=this._resolveContext(e.options.context);const s=this._logger.scopeTo("run()");if(P(s,3258,e),this._events.publish(new fC(e.id,e.instructions,e.trigger,e.managedState)),this._nextTr!==null)return zs(s,3259,e),this._run(this._nextTr);e._run(()=>{const n=e.finalInstructions;P(s,3260,n);const r=this._ctx,o=e.routeTree;o.options=n.options,o.queryParams=r.node._tree.queryParams=n.queryParams,o.fragment=r.node._tree.fragment=n.fragment;const a=t.container.get(Be).scopeTo("RouteTree");n.isAbsolute&&(t=r),t===r&&(o.root._setTree(o),r.node=o.root);const l=t.allResolved instanceof Promise?" - awaiting promise":"";return a.trace(`updateRouteTree(rootCtx:%s,rt:%s,vit:%s)${l}`,r,o,n),L(t.allResolved,()=>fg(a,n,t,r.node))},()=>{const n=e.previousRouteTree.root.children,r=e.routeTree.root.children,o=Nl(n,r);Ke._start(a=>{P(s,3261,n.length);for(const l of n)l.context.vpa._canUnload(e,a)})._continueWith(a=>{e.guardsResult!==!0&&(a._push(),this._cancelNavigation(e))})._continueWith(a=>{P(s,3262,r.length);for(const l of r)l.context.vpa._canLoad(e,a)})._continueWith(a=>{e.guardsResult!==!0&&(a._push(),this._cancelNavigation(e))})._continueWith(a=>{P(s,3263,n.length);for(const l of n)l.context.vpa._unloading(e,a)})._continueWith(a=>{P(s,3264,r.length);for(const l of r)l.context.vpa._loading(e,a)})._continueWith(a=>{P(s,3265,o.length);for(const l of o)l.context.vpa._swap(e,a)})._continueWith(()=>{P(s,3266),o.forEach(function(l){l.context.vpa._endTransition()}),this._navigated=!0,this._instructions=e.finalInstructions=e.routeTree._finalizeInstructions(),this._isNavigating=!1;const a=e.finalInstructions.toUrl(!0,this.options._urlParser);switch(e.options._getHistoryStrategy(this._instructions)){case"none":break;case"push":this._locationMgr.pushState(zu(e.options.state,e.id),this.updateTitle(e),a);break;case"replace":this._locationMgr.replaceState(zu(e.options.state,e.id),this.updateTitle(e),a);break}this._events.publish(new gC(e.id,e.instructions,this._instructions)),e.resolve(!0),this._runNextTransition()})._start()})}updateTitle(e=this.currentTr){const t=this._getTitle(e);return t.length>0&&(this._p.document.title=t),this._p.document.title}_getTitle(e=this.currentTr){let t;if(this._hasTitleBuilder)t=this.options.buildTitle(e)??"";else switch(typeof e.options.title){case"function":t=e.options.title.call(void 0,e.routeTree.root)??"";break;case"string":t=e.options.title;break;default:t=e.routeTree.root.getTitle(e.options.titleSeparator)??"";break}return t}_cancelNavigation(e){P(this._logger.scopeTo("cancelNavigation()"),3267,e);const s=e.previousRouteTree.root.children,n=e.routeTree.root.children;Nl(s,n).forEach(function(a){a.context.vpa._cancelUpdate()}),this._instructions=e.prevInstructions,this._routeTree=e.previousRouteTree,this._isNavigating=!1;const o=e.guardsResult;if(this._events.publish(new _C(e.id,e.instructions,`guardsResult is ${o}`)),o===!1)e.resolve(!1),this._runNextTransition();else{let a;if(this._navigated&&(e.erredWithUnknownRoute||e.error!=null&&this.options.restorePreviousRouteTreeOnError))a=e.prevInstructions;else{if(o===!0)return;a=o}L(this._enqueue(a,"api",e.managedState,e),()=>{P(this._logger,3268,e)})}}_runNextTransition(){this._nextTr!==null&&(P(this._logger,3269,this._nextTr),this._p.taskQueue.queueTask(()=>{const e=this._nextTr;if(e!==null)try{this._run(e)}catch(t){e._handleError(t)}}))}}function fg(i,e,t,s){return i.trace("updateNode(ctx:%s,node:%s)",t,s),s.queryParams=e.queryParams,s.fragment=e.fragment,s.context.isRoot||s.context.vpa._scheduleUpdate(s._tree.options,s),s.context===t?(s._clearChildren(),L(oe(...e.children.map(n=>Ai(i,s,n))),()=>oe(...t.getAvailableViewportAgents().reduce((n,r)=>{const o=r.viewport,a=o.default;return a===null||n.push(Ai(i,s,Ve.create({component:a,viewport:o.name}))),n},[])))):oe(...s.children.map(n=>fg(i,e,t,n)))}class ya{constructor(e,t,s){this.path=e,this.query=t,this.fragment=s,this.id=`${e}?${(t==null?void 0:t.toString())??""}#${s??""}`}toString(){return this.id}static _create(e){let t=null;const s=e.indexOf("#");if(s>=0){const o=e.slice(s+1);t=decodeURIComponent(o),e=e.slice(0,s)}let n=null;const r=e.indexOf("?");if(r>=0){const o=e.slice(r+1);e=e.slice(0,r),n=Object.freeze(new URLSearchParams(o))}return new ya(e,n??jr,t)}}function gg(i,e,t){let s;typeof i=="string"?s=i:(s=i.path,e=i.query,t=i.fragment),e??(e=jr);let n=e.toString();n=n===""?"":`?${n}`;const r=t!=null&&t.length>0?`#${encodeURIComponent(t)}`:"";return`${s}${n}${r}`}const Ml=Object.freeze({parse(i){return ya._create(i)},stringify(i,e,t){return gg(i,e,t)}}),SC=Object.freeze({parse(i){const e=i.indexOf("#");if(e>=0){const t=i.slice(e+1);i=decodeURIComponent(t)}return ya._create(i)},stringify(i,e,t){return`/#/${gg(i,e,t)}`}});function xC(i,e){return typeof e=="function"?e(i):e}const Wc=ut.createInterface("RouterOptions");class jo{constructor(e,t,s,n,r,o,a){this.useUrlFragmentHash=e,this.useHref=t,this.historyStrategy=s,this.buildTitle=n,this.useNavigationModel=r,this.activeClass=o,this.restorePreviousRouteTreeOnError=a,this._urlParser=e?SC:Ml}static create(e){return new jo(e.useUrlFragmentHash??!1,e.useHref??!0,e.historyStrategy??"push",e.buildTitle??null,e.useNavigationModel??!0,e.activeClass??null,e.restorePreviousRouteTreeOnError??!0)}toString(){return`RO(${[["historyStrategy","history"]].map(([e,t])=>{const s=this[e];return`${t}:${typeof s=="function"?s:`'${s}'`}`}).join(",")})`}}class es{constructor(e,t,s,n,r,o,a,l){this.historyStrategy=e,this.title=t,this.titleSeparator=s,this.context=n,this.queryParams=r,this.fragment=o,this.state=a,this.transitionPlan=l}static create(e,t){return new es(t.historyStrategy??e.historyStrategy,t.title??null,t.titleSeparator??" | ",t.context??null,t.queryParams??null,t.fragment??"",t.state??null,t.transitionPlan??null)}_clone(){return new es(this.historyStrategy,this.title,this.titleSeparator,this.context,{...this.queryParams},this.fragment,this.state===null?null:{...this.state},this.transitionPlan)}_getHistoryStrategy(e){return xC(e,this.historyStrategy)}}const wn="default";class Ve{constructor(e,t,s,n,r,o,a){this.open=e,this.close=t,this.recognizedRoute=s,this.component=n,this.viewport=r,this.params=o,this.children=a}static create(e){var s;if(e instanceof Ve)return e;if(ma(e)){const n=gt.create(e.component),r=((s=e.children)==null?void 0:s.map(Ve.create))??[];return new Ve(e.open??0,e.close??0,e.recognizedRoute??null,n,e.viewport??null,Object.freeze(e.params??null),r)}const t=gt.create(e);return new Ve(0,0,null,t,null,null,[])}contains(e){const t=this.children,s=e.children;if(t.length<s.length||!this.component.equals(e.component))return!1;const n=this.viewport??null,r=e.viewport??null;if(n!==null&&r!==null&&n!==r)return!1;for(let o=0,a=s.length;o<a;++o)if(!t[o].contains(s[o]))return!1;return!0}equals(e){const t=this.children,s=e.children;if(t.length!==s.length||!this.component.equals(e.component)||this.viewport!==e.viewport||!lg(this.params,e.params))return!1;for(let n=0,r=t.length;n<r;++n)if(!t[n].equals(s[n]))return!1;return!0}_clone(){return new Ve(this.open,this.close,this.recognizedRoute,this.component._clone(),this.viewport,this.params,[...this.children])}toUrlComponent(e=!0){const t=this.component.toUrlComponent(),s=this.viewport,n=t.length===0||s===null||s.length===0||s===wn?"":`@${s}`,r=`${"(".repeat(this.open)}${t}${TC(this.params)}${n}${")".repeat(this.close)}`,o=e?this.children.map(a=>a.toUrlComponent()).join("+"):"";return r.length>0?o.length>0?`${r}/${o}`:r:o}toString(){const e=`c:${this.component}`,t=this.viewport===null||this.viewport.length===0?"":`viewport:${this.viewport}`,s=this.children.length===0?"":`children:[${this.children.map(String).join(",")}]`;return`VPI(${[e,t,s].filter(Boolean).join(",")})`}}function TC(i){if(i===null)return"";const e=Object.keys(i),t=e.length;if(t===0)return"";const s=Array(t),n=[],r=[];for(const o of e)fn(o)?n.push(Number(o)):r.push(o);for(let o=0;o<t;++o){const a=n.indexOf(o);if(a>-1)s[o]=i[o],n.splice(a,1);else{const l=r.shift();s[o]=`${l}=${i[l]}`}}return`(${s.join(",")})`}class ht{constructor(e,t,s,n,r){this.options=e,this.isAbsolute=t,this.children=s,this.queryParams=n,this.fragment=r,Object.freeze(n)}static create(e,t,s,n){s=s instanceof es?s:es.create(t,s??$t);let r=s.context;!(r instanceof Ss)&&n!=null&&(r=s.context=Ss.resolve(n,r));const o=r!=null;if(e instanceof Array){const c=e.length,u=new Array(c),h=new URLSearchParams(s.queryParams??$t);for(let d=0;d<c;d++){const p=e[d],f=o?r._generateViewportInstruction(p):null;f!==null?(u[d]=f.vi,Lo(h,f.query,!1)):u[d]=Ve.create(p)}return new ht(s,!1,u,h,s.fragment)}if(typeof e=="string")return Ti.parse(t._urlParser.parse(e)).toInstructionTree(s);const a=o?r._generateViewportInstruction(ma(e)?{...e,params:e.params??$t}:{component:e,params:$t}):null,l=new URLSearchParams(s.queryParams??$t);return a!==null?new ht(s,!1,[a.vi],Lo(l,a.query,!1),s.fragment):new ht(s,!1,[Ve.create(e)],l,s.fragment)}equals(e){const t=this.children,s=e.children;if(t.length!==s.length)return!1;for(let n=0,r=t.length;n<r;++n)if(!t[n].equals(s[n]))return!1;return!0}toUrl(e,t){let s="";if(!e){const r=[];let o=this.options.context;if(o!=null&&!(o instanceof Ss))throw new Error("Invalid operation; incompatible navigation context.");for(;o!=null&&!o.isRoot;){const a=o.vpa,l=a._currState===4096?a._currNode:a._nextNode;if(l==null)throw new Error("Invalid operation; nodes of the viewport agent are not set.");r.splice(0,0,l.instruction.toUrlComponent()),o=o.parent}r[0]===""&&r.splice(0,1),s=r.join("/")}const n=this.toPath();return t.stringify(s.length>0?`${s}/${n}`:n,this.queryParams,this.fragment)}toPath(){return this.children.map(e=>e.toUrlComponent()).join("+")}toString(){return`[${this.children.map(String).join(",")}]`}}class gt{constructor(e,t){this.type=e,this.value=t}static create(e){if(e instanceof gt)return e;if(typeof e=="string")return new gt(0,e);if(dn(e)||Ge("function/class or object","",e),typeof e=="function")if(ie.isType(e)){const t=ie.getDefinition(e);return new gt(2,t)}else return gt.create(e());if(e instanceof Promise)return new gt(3,e);if(ma(e)){const t=Ve.create(e);return new gt(1,t)}if(pa(e))return new gt(4,e);if(e instanceof ot)return new gt(2,e);throw new Error(G(3400,og(e)))}equals(e){switch(this.type){case 2:case 4:case 3:case 0:return this.type===e.type&&this.value===e.value;case 1:return this.type===e.type&&this.value.equals(e.value)}}_clone(){return new gt(this.type,this.value)}toUrlComponent(){switch(this.type){case 2:return this.value.name;case 4:case 3:throw new Error(G(3403,this.type));case 1:return this.value.toUrlComponent();case 0:return this.value}}toString(){switch(this.type){case 2:return`CEDef(name:'${this.value.name}')`;case 3:return"Promise";case 4:return`VM(name:'${ie.getDefinition(this.value.constructor).name}')`;case 1:return this.value.toString();case 0:return`'${this.value}'`}}}class IC{constructor(e,t,s,n,r){this._instance=e,this._controller=t,this._routeNode=s,this._ctx=n,this._routerOptions=r,this._logger=t.container.get(Be).scopeTo(`ComponentAgent<${n._friendlyPath}>`),P(this._logger,3050);const o=t.lifecycleHooks;this._canLoadHooks=(o.canLoad??[]).map(a=>a.instance),this._loadHooks=(o.loading??[]).map(a=>a.instance),this._canUnloadHooks=(o.canUnload??[]).map(a=>a.instance),this._unloadHooks=(o.unloading??[]).map(a=>a.instance),this._hasCanLoad="canLoad"in e,this._hasLoad="loading"in e,this._hasCanUnload="canUnload"in e,this._hasUnload="unloading"in e}_activate(e,t){if(e===null)return P(this._logger,3051),this._controller.activate(this._controller,t);P(this._logger,3052),this._controller.activate(e,t)}_deactivate(e,t){if(e===null)return P(this._logger,3053),this._controller.deactivate(this._controller,t);P(this._logger,3054),this._controller.deactivate(e,t)}_dispose(){P(this._logger,3055),this._controller.dispose()}_canUnload(e,t,s){P(this._logger,3056,t,this._canUnloadHooks.length),s._push();let n=Promise.resolve();for(const r of this._canUnloadHooks)s._push(),n=n.then(()=>new Promise(o=>{if(e.guardsResult!==!0){s._pop(),o();return}e._run(()=>r.canUnload(this._instance,t,this._routeNode),a=>{e.guardsResult===!0&&a===!1&&(e.guardsResult=!1),s._pop(),o()})}));this._hasCanUnload&&(s._push(),n=n.then(()=>{if(e.guardsResult!==!0){s._pop();return}e._run(()=>this._instance.canUnload(t,this._routeNode),r=>{e.guardsResult===!0&&r===!1&&(e.guardsResult=!1),s._pop()})})),s._pop()}_canLoad(e,t,s){P(this._logger,3057,t,this._canLoadHooks.length);const n=this._ctx.root;s._push();let r=Promise.resolve();for(const o of this._canLoadHooks)s._push(),r=r.then(()=>new Promise(a=>{if(e.guardsResult!==!0){s._pop(),a();return}e._run(()=>o.canLoad(this._instance,t.params,t,this._routeNode),l=>{e.guardsResult===!0&&l!=null&&l!==!0&&(e.guardsResult=l===!1?!1:ht.create(l,this._routerOptions,void 0,n)),s._pop(),a()})}));this._hasCanLoad&&(s._push(),r=r.then(()=>{if(e.guardsResult!==!0){s._pop();return}e._run(()=>this._instance.canLoad(t.params,t,this._routeNode),o=>{e.guardsResult===!0&&o!=null&&o!==!0&&(e.guardsResult=o===!1?!1:ht.create(o,this._routerOptions,void 0,n)),s._pop()})})),s._pop()}_unloading(e,t,s){P(this._logger,3058,t,this._unloadHooks.length),s._push();for(const n of this._unloadHooks)e._run(()=>(s._push(),n.unloading(this._instance,t,this._routeNode)),()=>{s._pop()});this._hasUnload&&e._run(()=>(s._push(),this._instance.unloading(t,this._routeNode)),()=>{s._pop()}),s._pop()}_loading(e,t,s){P(this._logger,3059,t,this._loadHooks.length),s._push();for(const n of this._loadHooks)e._run(()=>(s._push(),n.loading(this._instance,t.params,t,this._routeNode)),()=>{s._pop()});this._hasLoad&&e._run(()=>(s._push(),this._instance.loading(t.params,t,this._routeNode)),()=>{s._pop()}),s._pop()}}const vt=ut.createInterface("IRouteContext"),PC=Object.freeze(["string","object","function"]);function EC(i){if(i==null)return!1;const e=i.params,t=i.component;return typeof e=="object"&&e!==null&&t!=null&&PC.includes(typeof t)&&!(t instanceof Promise)}class Ss{get isRoot(){return this.parent===null}get depth(){return this.path.length-1}get allResolved(){return this._allResolved}get node(){const e=this._node;if(e===null)throw new Error(G(3171,this));return e}set node(e){(this._prevNode=this._node)!==e&&(this._node=e,P(this._logger,3151,this._prevNode,e))}get vpa(){const e=this._vpa;if(e===null)throw new Error(G(3172,this));return e}get navigationModel(){return this._navigationModel}constructor(e,t,s,n,r,o){this.parent=t,this.component=s,this.config=n,this._router=o,this._childViewportAgents=[],this.childRoutes=[],this._allResolved=null,this._prevNode=null,this._node=null,this._childRoutesConfigured=!1,this._vpa=e,t===null?(this.root=this,this.path=[this],this._friendlyPath=s.name):(this.root=t.root,this.path=[...t.path,this],this._friendlyPath=`${t._friendlyPath}/${s.name}`),this._logger=r.get(Be).scopeTo(`RouteContext<${this._friendlyPath}>`),P(this._logger,3150),this._moduleLoader=r.get(Pm);const a=this.container=r.createChild();this._platform=a.get(Ne),a.registerResolver(Dr,this._hostControllerProvider=new $e,!0);const l=new $e("IRouteContext",this);if(a.registerResolver(vt,l),a.registerResolver(Ss,l),this._recognizer=new iC,o.options.useNavigationModel){const c=this._navigationModel=new RC([]);a.get(va).subscribe("au:router:navigation-end",()=>c._setIsActive(o,this))}else this._navigationModel=null;this._processConfig(n)}_processConfig(e){var l;const t=[],s=e.routes??fo,n=s.length;if(n===0){const c=(l=e.component.prototype)==null?void 0:l.getRouteConfig;this._childRoutesConfigured=c==null?!0:typeof c!="function";return}const r=this._navigationModel,o=r!==null;let a=0;for(;a<n;a++){const c=s[a];if(c instanceof Promise){t.push(this._addRoute(c));continue}const u=ur(c,!0,e,null,this);if(u instanceof Promise){if(!_a(c)||c.path==null)throw new Error(G(3173));for(const p of ln(c.path))this._$addRoute(p,c.caseSensitive??!1,u);const h=this.childRoutes.length,d=u.then(p=>this.childRoutes[h]=p);this.childRoutes.push(d),o&&r._addRoute(d),t.push(d.then(jt));continue}for(const h of u.path??U)this._$addRoute(h,u.caseSensitive,u);this.childRoutes.push(u),o&&r._addRoute(u)}this._childRoutesConfigured=!0,t.length>0&&(this._allResolved=Promise.all(t).then(()=>{this._allResolved=null}))}static setRoot(e){const t=e.get(Be).scopeTo("RouteContext");e.has(bn,!0)||io(new Error(G(3167)),t),e.has(vt,!0)&&io(new Error(G(3168)),t);const{controller:s}=e.get(bn);s===void 0&&io(new Error(G(3169)),t);const n=e.get(qs);return L(n.getRouteContext(null,s.definition,s.viewModel,s.container,null,null,null),r=>{e.register(bt.instance(vt,r)),r.node=n.routeTree.root})}static resolve(e,t){const s=e.container,n=s.get(Be).scopeTo("RouteContext");if(t==null)return P(n,3152,t),e;if(t instanceof Ss)return P(n,3153,t),t;if(t instanceof s.get(Ne).Node){P(n,3154,t.nodeName);try{return ie.for(t,{searchParents:!0}).container.get(vt)}catch(r){throw rg(n,3155,t.nodeName,r),r}}if(pa(t)){const r=t.$controller;return P(n,3156,r.definition.name),r.container.get(vt)}if(i0(t)){const r=t;return P(n,3157,r.definition.name),r.container.get(vt)}io(new Error(G(3170,Object.prototype.toString.call(t))),n)}dispose(){this.container.dispose()}_resolveViewportAgent(e){P(this._logger,3158,e);const t=this._childViewportAgents.find(s=>s._handles(e));if(t===void 0)throw new Error(G(3174,e,this._printTree()));return t}getAvailableViewportAgents(){return this._childViewportAgents.filter(e=>e._isAvailable())}getFallbackViewportAgent(e){return this._childViewportAgents.find(t=>t._isAvailable()&&t.viewport.name===e&&t.viewport.fallback!=="")??null}_createComponentAgent(e,t){P(this._logger,3159,t),this._hostControllerProvider.prepare(e);const s=this.container.createChild({inheritParentResources:!0}),n=this._platform,r=t.component,o=n.document.createElement(r.name);Nr(s,o,n);const a=s.invoke(r.Type),l=this._childRoutesConfigured?void 0:L(ur(a,!1,this.config,t,null),c=>this._processConfig(c));return L(l,()=>{const c=Qe.$el(s,a,e.host,null,r),u=new IC(a,c,t,this,this._router.options);return this._hostControllerProvider.dispose(),u})}_registerViewport(e){const t=No.for(e,this);return this._childViewportAgents.includes(t)?(P(this._logger,3161,t),t):(P(this._logger,3160,t),this._childViewportAgents.push(t),t)}_unregisterViewport(e){const t=No.for(e,this);if(!this._childViewportAgents.includes(t)){P(this._logger,3163,t);return}P(this._logger,3162,t),this._childViewportAgents.splice(this._childViewportAgents.indexOf(t),1)}recognize(e,t=!1){P(this._logger,3164,e);let s=this,n=!0,r=null;for(;n;)if(r=s._recognizer.recognize(e),r===null){if(!t||s.isRoot)return null;s=s.parent}else n=!1;return new dr(r,Reflect.has(r.params,Xt)?r.params[Xt]??null:null)}_addRoute(e){return P(this._logger,3165,e),L(ur(e,!0,this.config,null,this),t=>{var s;for(const n of t.path??U)this._$addRoute(n,t.caseSensitive,t);(s=this._navigationModel)==null||s._addRoute(t),this.childRoutes.push(t)})}_$addRoute(e,t,s){this._recognizer.add({path:e,caseSensitive:t,handler:s},!0)}_resolveLazy(e){return this._moduleLoader.load(e,t=>{const s=t.raw;if(typeof s=="function"){const o=ie.isType(s)?ie.getDefinition(s):null;if(o!=null)return o}let n,r;for(const o of t.items){const a=ie.isType(o.value)?o.definition:null;a!=null&&(o.key==="default"?n=a:r===void 0&&(r=a))}if(n===void 0&&r===void 0)throw new Error(G(3175,e));return r??n})}_generateViewportInstruction(e){if(!EC(e))return null;const t=e.component;let s,n=!1;if(t instanceof Cs)s=t.path,n=!0;else if(typeof t=="string"){const d=this.childRoutes.find(p=>p.id===t);if(d===void 0)return null;s=d.path}else if(t.type===0){const d=this.childRoutes.find(p=>p.id===t.value);if(d===void 0)return null;s=d.path}else{const d=ba(t,this)[1];s=this.childRoutes.reduce((p,f)=>(f.component===d.Type&&p.push(...f.path),p),[]),n=!0}if(s===void 0)return null;const r=e.params,o=this._recognizer,a=s.length,l=[];let c=null;if(a===1){const d=h(s[0]);if(d===null){if(n)throw new Error(G(3166,e,l));return zs(this._logger,3166,e,l),null}return{vi:Ve.create({recognizedRoute:new dr(new wr(d.endpoint,d.consumed),null),component:d.path,children:e.children,viewport:e.viewport,open:e.open,close:e.close}),query:d.query}}let u=0;for(let d=0;d<a;d++){const p=h(s[d]);p!==null&&(c===null?(c=p,u=Object.keys(p.consumed).length):Object.keys(p.consumed).length>u&&(c=p))}if(c===null){if(n)throw new Error(G(3166,e,l));return zs(this._logger,3166,e,l),null}return{vi:Ve.create({recognizedRoute:new dr(new wr(c.endpoint,c.consumed),null),component:c.path,children:e.children,viewport:e.viewport,open:e.open,close:e.close}),query:c.query};function h(d){const p=o.getEndpoint(d);if(p===null)return l.push(`No endpoint found for the path: '${d}'.`),null;const f=Object.create(null);for(const v of p.params){const m=v.name;let A=r[m];if(A==null||String(A).length===0){if(!v.isOptional)return l.push(`No value for the required parameter '${m}' is provided for the path: '${d}'.`),null;A=""}else{if(!v.satisfiesPattern(A))return l.push(`The value '${A}' for the parameter '${m}' does not satisfy the pattern '${v.pattern}'.`),null;f[m]=A}const w=v.isStar?`*${m}`:v.isOptional?`:${m}?`:`:${m}`;d=d.replace(w,encodeURIComponent(A))}const _=Object.keys(f),g=Object.fromEntries(Object.entries(r).filter(([v])=>!_.includes(v)));return{path:d.replace(/\/\//g,"/"),endpoint:p,consumed:f,query:g}}}toString(){const t=this._childViewportAgents.map(String).join(",");return`RC(path:'${this._friendlyPath}',viewports:[${t}])`}_printTree(){const e=[];for(let t=0;t<this.path.length;++t)e.push(`${" ".repeat(t)}${this.path[t]}`);return e.join(`
`)}}class dr{constructor(e,t){this.route=e,this.residue=t}toString(){const e=this.route,t=e.endpoint.route;return`RR(route:(endpoint:(route:(path:${t.path},handler:${t.handler})),params:${JSON.stringify(e.params)}),residue:${this.residue})`}}class RC{constructor(e){this.routes=e,this._promise=void 0}resolve(){return L(this._promise,jt)}_setIsActive(e,t){L(this._promise,()=>{for(const s of this.routes)s._setIsActive(e,t)})}_addRoute(e){const t=this.routes;if(!(e instanceof Promise)){(e.nav??!1)&&e.redirectTo===null&&t.push(Fo._create(e));return}const s=t.length;t.push(void 0);let n;n=this._promise=L(this._promise,()=>L(e,r=>{r.nav&&r.redirectTo===null?t[s]=Fo._create(r):t.splice(s,1),this._promise===n&&(this._promise=void 0)}))}}class Fo{constructor(e,t,s,n){this.id=e,this.path=t,this.title=s,this.data=n,this._trees=null}static _create(e){return new Fo(e.id,ln(e.path??U),e.title,e.data)}get isActive(){return this._isActive}_setIsActive(e,t){let s=this._trees;if(s===null){const n=e.options;s=this._trees=this.path.map(r=>{const o=t._recognizer.getEndpoint(r);if(o===null)throw new Error(G(3450,r));return new ht(es.create(n,{context:t}),!1,[Ve.create({recognizedRoute:new dr(new wr(o,$t),null),component:r})],jr,null)})}this._isActive=s.some(n=>e.routeTree.contains(n,!0))}}class _g{constructor(){this.name=wn,this.usedBy="",this.default="",this.fallback="",this._agent=void 0,this._controller=void 0,this._ctx=S(vt),this._logger=S(Be).scopeTo(`au-viewport<${this._ctx._friendlyPath}>`)}_getFallback(e,t,s){const n=this.fallback;return typeof n=="function"&&!ie.isType(n)?n(e,t,s):n}hydrated(e){P(this._logger,3e3),this._controller=e,this._agent=this._ctx._registerViewport(this)}attaching(e,t){return P(this._logger,3001),this._agent._activateFromViewport(e,this._controller)}detaching(e,t){return P(this._logger,3002),this._agent._deactivateFromViewport(e,this._controller)}dispose(){P(this._logger,3003),this._ctx._unregisterViewport(this),this._agent._dispose(),this._agent=void 0}toString(){const e=[];for(const t of OC){const s=this[t];switch(typeof s){case"string":s!==""&&e.push(`${t}:'${s}'`);break;default:e.push(`${t}:${String(s)}`)}}return`VP(ctx:'${this._ctx._friendlyPath}',${e.join(",")})`}}ie.define({name:"au-viewport",bindables:["name","usedBy","default","fallback"]},_g);const OC=["name","usedBy","default","fallback"];class qc{constructor(){this._el=S(zi),this._router=S(qs),this._ctx=S(vt),this._events=S(va),this._locationMgr=S(ug),this.attribute="href",this.active=!1,this._href=null,this._instructions=null,this._navigationEndListener=null,this.onClick=t=>{this._instructions!==null&&(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey||t.button!==0||(t.preventDefault(),this._router.load(this._instructions,{context:this.context})))};const e=this._el;this._isEnabled=!e.hasAttribute("external")&&!e.hasAttribute("data-external"),this._activeClass=this._router.options.activeClass}binding(){this._isEnabled&&this._el.addEventListener("click",this.onClick),this.valueChanged(),this._navigationEndListener=this._events.subscribe("au:router:navigation-end",e=>{const t=this.active=this._instructions!==null&&this._router.isActive(this._instructions,this.context),s=this._activeClass;s!==null&&this._el.classList.toggle(s,t)})}attaching(){const t=this.context.allResolved;if(t!==null)return t.then(()=>{this.valueChanged()})}unbinding(){this._isEnabled&&this._el.removeEventListener("click",this.onClick),this._navigationEndListener.dispose()}valueChanged(){const e=this._router,t=e.options,s=this.route;let n=this.context;if(n===void 0?n=this.context=this._ctx:n===null&&(n=this.context=this._ctx.root),s!=null&&n.allResolved===null){const o=this.params,a=this._instructions=e.createViewportInstructions(typeof o=="object"&&o!==null?{component:s,params:o}:s,{context:n});this._href=a.toUrl(!1,t._urlParser)}else this._instructions=null,this._href=null;const r=ie.for(this._el,{optional:!0});if(r!==null)r.viewModel[this.attribute]=this._instructions;else if(this._href===null)this._el.removeAttribute(this.attribute);else{const o=t.useUrlFragmentHash?this._href:this._locationMgr.addBaseHref(this._href);this._el.setAttribute(this.attribute,o)}}}Vr.define({name:"load",bindables:{route:{mode:Fn,primary:!0,callback:"valueChanged"},params:{mode:Fn,callback:"valueChanged"},attribute:{mode:Fn},active:{mode:lC},context:{mode:Fn,callback:"valueChanged"}}},qc);class mg{get _isExternal(){return this._el.hasAttribute("external")||this._el.hasAttribute("data-external")}constructor(){if(this._el=S(zi),this._router=S(qs),this._ctx=S(vt),this._isInitialized=!1,this._router.options.useHref&&this._el.nodeName==="A"){const e=S(Br).name;switch(this._el.getAttribute("target")){case null:case e:case"_self":this._isEnabled=!0;break;default:this._isEnabled=!1;break}}else this._isEnabled=!1}binding(){this._isInitialized||(this._isInitialized=!0,this._isEnabled=this._isEnabled&&ki(this._el,Vr.getDefinition(qc).key)===null),this.valueChanged(this.value),this._el.addEventListener("click",this)}unbinding(){this._el.removeEventListener("click",this)}valueChanged(e){e==null?this._el.removeAttribute("href"):(this._router.options.useUrlFragmentHash&&this._ctx.isRoot&&!/^[.#]/.test(e)&&!this._isExternal&&(e=`#${e}`),this._el.setAttribute("href",e))}handleEvent(e){this._onClick(e)}_onClick(e){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey||e.button!==0||this._isExternal||!this._isEnabled)return;const t=this._el.getAttribute("href");t!==null&&(e.preventDefault(),this._router.load(t,{context:this._ctx}))}}mg.$au={type:"custom-attribute",name:"href",noMultiBindings:!0,bindables:{value:{mode:Fn}}};const LC=qs,VC=[LC],DC=[_g,qc,mg];function Hu(i,e){let t=null;dn(e)?t=e.basePath??null:e={};const s=jo.create(e);return i.register(bt.cachedCallback(hg,(n,r,o)=>{const a=n.get(Br),l=new URL(a.document.baseURI);return l.pathname=dg(t??l.pathname),l}),bt.instance(Wc,s),bt.instance(jo,s),Yr.creating(qs,n=>{}),Yr.hydrated(Bi,Ss.setRoot),Yr.activated(qs,n=>n.start(!0)),Yr.deactivated(qs,n=>n.stop()),...VC,...DC)}const BC={register(i){return Hu(i)},customize(i){return{register(e){return Hu(e,i)}}}},vg="my-app",jl=`<section class="app-header">
  <div class="left">
    <div class="app-name">
      <a href="#" class="reset-text">\${appName}</a>
    </div>
    <div class="links">
      <a href="typing" class="reset-text">Typing</a>
      <a href="propaganda" class="reset-text">Propaganda</a>
    </div>
  </div>
  <div class="app-more-options">
    <popover>
      <button au-slot="trigger" class="icon-button help">?</button>
      <template au-slot="content">
        Adding new topics and content:
        <ol style="padding-top: unset">
          <li>Press "Topics"</li>
          <li>Press "+" next to "List"</li>
          <li>Choose topic name</li>
          <li>On the right, "+" in the "Content" section</li>
          <li>Paste your text into the inptu</li>
          <li>PRess on "Topics" again to close</li>
          <li>Now the words should appear in the typing box</li>
        </ol>
        <hr />
        Typing Practice: Press one of the following key to
        <ul>
          <li>"?" - look up the word</li>
          <li>"." - skip the word</li>
          <li>"+" - add to remember list</li>
          <li>"-" - remove from remember list</li>
        </ul>
      </template>
    </popover>
    <button class="icon-button">
      <span class="settings-icon">⚙</span>
    </button>
  </div>
</section>

<br />
<br />
<au-viewport></au-viewport>
<br />

<!-- Tab Drawer -->
<tab-drawer
  active-tab.two-way="activeTopic"
  active-tab-name.bind="store.activeTabName"
  tabs.bind="topics"
  is-drawer-open.two-way="store.isDrawerOpen"
>
  <template au-slot="content" if.bind="activeTopic.title === 'Topics'">
    <topics on-topic-change.bind="store.onTopicChange" />
  </template>
  <template au-slot="content" if.bind="activeTopic.title === 'Dictionary'">
    <dictionary
      word.bind="store.wordToLookUp"
      look-up-history.bind="Array.from(store.dictionaryLookedUpList)"
    />
  </template>
  <div au-slot="content" if.bind="activeTopic.title === 'Remember'">
    <div class="remember-container">
      <h4>Remember</h4>
      <template repeat.for="word of rememberList">
        <span class="remember-word">\${word}</span>
      </template>
    </div>
  </div>
</tab-drawer>
`,bg=[],wg={};let Ja;function NC(i){Ja||(Ja=ie.define({name:vg,template:jl,dependencies:bg,bindables:wg})),i.register(Ja)}const MC=Object.freeze(Object.defineProperty({__proto__:null,bindables:wg,default:jl,dependencies:bg,name:vg,register:NC,template:jl},Symbol.toStringTag,{value:"Module"}));let jC=0;function Ii(){const i=Math.random().toString(25).slice(2);let e=Date.now().toString(25);return e+=jC++,e+"-"+i}function FC(i,e){return Math.floor(Math.random()*(e-i+1))+i}function zC(i,e){const t=new Set(i),s=Array.from(t),n=new Set,r=Math.min(e,i.size);for(;n.size<r;){const o=FC(0,i.size-1),a=s[o];n.has(a)||(n.add(a),t.delete(a))}return{chosen:n,remaining:t}}const HC={introduction:"Introduction",List:"List","topic.list":"Topic List",untitled:"Untitled"};function zn(i){return HC[i]??`?${i}?`}const yg="TypaTypa",UC={typing:{tabs:{isDrawerOpen:!1}}},WC=12,Cg=[{title:"Topics",shortcut:"T"},{title:"Dictionary",shortcut:"D"},{title:"Remember",shortcut:"R"}],qC="",kg=1;var ud;const KC=(ud=Cg[kg])==null?void 0:ud.title,Uu=[{id:Ii(),title:zn("introduction"),content:[{id:Ii(),text:`Welcome to the TypaTypa App :)

This app has 2 purposes:
1. Improve your typing speed.
2. Improve your vocabulary.
`}]}],GC={topics:Uu,selectedTopicId:Uu[0].id,rememberList:[],dictionaryLookedUpList:[]},QC=[];function JC(){document.addEventListener("keydown",i=>{switch(i.key){case"c":console.clear()}})}const Ag="typing-page",Fl=`<section class="typing-container \${store.isDrawerOpen ? 'top' : ''}">
  <div class="left-to-type">left to type: \${remainingWordsToType.size}</div>
  <div class="typing-input-container">
    <span class="typed-text">
      <template repeat.for="typedWord of typedText.split(' ')"
        ><span class="word" click.trigger="lookUp(typedWord)">\${typedWord}</span
        ><span if.bind="$index < typedText.split(' ').length - 1">
        </span></template></span
    ><span class="current-letter">\${currentLetter}</span
    ><span class="text-to-type"
      ><template repeat.for="upcommingWord of upcommingTextToType.split(' ')"
        ><span class="word" click.trigger="lookUp(upcommingWord)"
          >\${upcommingWord}</span
        ><span></span>
      </template>
    </span>
  </div>
  <div class="separate-input">
    <input
      type="text"
      value.bind="separateInputValue"
      placeholder="Type here"
      input.trigger="separateInputChanged"
      keydown.trigger="onKeyDownSeparateInput"
    />
  </div>
</section>
`,$g=[],Sg={};let Ya;function YC(i){Ya||(Ya=ie.define({name:Ag,template:Fl,dependencies:$g,bindables:Sg})),i.register(Ya)}const XC=Object.freeze(Object.defineProperty({__proto__:null,bindables:Sg,default:Fl,dependencies:$g,name:Ag,register:YC,template:Fl},Symbol.toStringTag,{value:"Module"})),xg="onTopicChange";class zo{constructor(e=S(Zl)){this.ea=e,this.message="store.html",this.isDrawerOpen=UC.typing.tabs.isDrawerOpen,this.activeTabName=KC,this.wordToLookUp=qC,this.dictionaryLookedUpList=new Set,this.onTopicChange=t=>{var s;(s=this.ea)==null||s.publish(xg,t)}}}function zl(){var e;return["INPUT","TEXTAREA"].includes(((e=document.activeElement)==null?void 0:e.nodeName)??"")}function Tg(i,e,t,s){if(!i)return;function n(r){const o=r.target,a=t==null?void 0:t.some(h=>h.contains(o)),l=s==null?void 0:s.some(h=>typeof h=="string"?o.matches(h):h.contains(o));!ZC(o,i)&&!a&&!l&&e()}document.addEventListener("click",n)}function ZC(i,e){if(i===e)return!0;let t=i.parentElement;for(;t!=null;){if(e===t)return!0;t=t.parentElement}return!1}class ek{static clickGlobalShortcut(e){if(zl())return;const s=document.querySelectorAll(`[data-shortcut="${e}"]`);s.length!==0&&(s.length>1&&(console.warn("Multiple elements with the same shortcut:"),console.log(s)),s[0].click())}}const Wu="typing-app-v0.1";class tk{getItem(){const e=localStorage.getItem(Wu)??JSON.stringify(GC);return JSON.parse(e)}setItem(e){const s={...this.getItem(),...e};localStorage.setItem(Wu,JSON.stringify(s))}getSelectedTopic(){const{topics:e,selectedTopicId:t}=this.getItem();return e.find(n=>n.id===t)}}const At=new tk,Ig=[" ",`
`,"	"];function qu(i,e,t=Ig){let s=i[e];if(!s||t.includes(s))return;let n=sk(i,e,t),r=Pg(i,e,t);return i.slice(n,r+1)}function sk(i,e,t){let s=0;for(let n=e;n>=0;n--){let r=i[n];if(t.includes(r))break;s=n}return s}function Pg(i,e,t=Ig){let s=0;for(let n=e;n<i.length;n++){let r=i[n];if(t.includes(r))break;s=n}return s}function ik(i){return parseInt(i.replace("px",""))}function nk(i,e){const t=i.match(/[a-zA-ZAaĂăÂâEeÊêIiOoÔôƠơUuƯưYyÁáẮắẤấÉéẾếÍíÓóỐốỚớÚúỨứÝýÀàẰằẦầÈèỀềÌìÒòỒồỜờÙùỪừỲỳẢảẲẳẨẩẺẻỂểỈỉỎỏỔổỞởỦủỬửỶỷÃãẴẵẪẫẼẽỄễĨĩÕõỖỗỠỡŨũỮữỸỹẠạẶặẬậẸẹỆệỊịỌọỘộỢợỤụỰựỴỵĐđ]+/g);if(!t)return[];let s=t;return s=t.map(n=>n.toLowerCase()),s}var rk=Object.create,Kc=Object.defineProperty,ok=Object.getOwnPropertyDescriptor,ak=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),Eg=i=>{throw TypeError(i)},lk=(i,e,t)=>e in i?Kc(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,ck=(i,e)=>Kc(i,"name",{value:e,configurable:!0}),hk=i=>[,,,rk(null)],uk=["class","method","getter","setter","accessor","field","value","get","set"],Rg=i=>i!==void 0&&typeof i!="function"?Eg("Function expected"):i,dk=(i,e,t,s,n)=>({kind:uk[i],name:e,metadata:s,addInitializer:r=>t._?Eg("Already initialized"):n.push(Rg(r||null))}),pk=(i,e)=>lk(e,ak("metadata"),i[3]),fk=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)r[n].call(t);return s},gk=(i,e,t,s,n,r)=>{var o,a,l,c=e&7,u=!!(e&16),h=0,d=i[h]||(i[h]=[]),p=c&&(n=n.prototype,c<5&&(c>3||!u)&&ok(n,t));ck(n,t);for(var f=s.length-1;f>=0;f--)l=dk(c,t,a={},i[3],d),o=(0,s[f])(n,l),a._=1,Rg(o)&&(n=o);return pk(i,n),p&&Kc(n,t,p),u?c^4?r:p:n},Og,Gc;Og=[Os(XC)];class xr{constructor(e=S(Zl),t=S(zo)){this.ea=e,this.store=t,this.message="typing-page.html",this.currentLetter="",this.separateInputValue="",this.upcommingTextToType="",this.typedText="",this.currentWord="",this.poolOfWords=new Set([]),this.remainingWordsToType=new Set(QC),this.nextWordsToType=new Set,this.rememberList=new Set,this.onTopicChange=s=>{if(!s)return;const n=s.content.map(o=>o.text).join(" "),r=nk(n);this.poolOfWords=new Set(r),this.resetWholeSession(),this.resetCurrentRound(),this.selectWordsToType()}}attached(){const e=At.getItem();this.rememberList=new Set(e.rememberList);const t=At.getSelectedTopic();this.onTopicChange(t),this.ea.subscribe(xg,this.onTopicChange),document.addEventListener("keydown",s=>{this.handleTyping(s.key),this.handleShortcuts(s.key),ek.clickGlobalShortcut(s.key)})}handleTyping(e){if(zl())return;const s=e===this.currentLetter,n=this.upcommingTextToType==="";s&&!n?(this.typedText+=e,this.currentLetter=this.upcommingTextToType[0],this.upcommingTextToType=this.upcommingTextToType.slice(1)):n&&(this.resetCurrentRound(),this.selectWordsToType()),this.remainingWordsToType.size===0&&this.resetWholeSession()}handleShortcuts(e){if(zl())return;const s=this.typedText.length,n=this.typedText+this.currentLetter+this.upcommingTextToType,r=qu(n,s);switch(e){case"Escape":{this.store.isDrawerOpen=!1;break}case"?":{this.lookUp(r);break}case"+":{this.rememberList.add(r),At.setItem({rememberList:Array.from(this.rememberList)});break}case"-":{this.rememberList.delete(r);break}case".":{this.skipWord(s);break}}}lookUp(e){this.store.activeTabName="",this.store.dictionaryLookedUpList.add(e),this.store.wordToLookUp=e,this.store.activeTabName="Dictionary"}skipWord(e){const t=this.typedText+this.currentLetter+this.upcommingTextToType,n=Pg(t,e)+1+1;this.typedText=t.slice(0,n),this.currentLetter=t[n],this.upcommingTextToType=t.slice(n+1)}selectWordsToType(){const{chosen:e,remaining:t}=zC(this.remainingWordsToType,WC);this.nextWordsToType=e,this.remainingWordsToType=t;const s=Array.from(this.nextWordsToType).join(" ");this.currentLetter=s[0],this.upcommingTextToType=s.slice(1)}separateInputChanged(){const e=this.separateInputValue;if(!e||!e.endsWith(" "))return;const t=e.trim(),s=this.typedText.length,n=this.typedText+this.currentLetter+this.upcommingTextToType,r=qu(n,s);t===r&&(this.separateInputValue="",this.skipWord(s),this.upcommingTextToType.length===0&&(this.resetCurrentRound(),this.resetWholeSession(),this.selectWordsToType()))}onKeyDownSeparateInput(e){e.key==="Escape"&&(this.separateInputValue="")}resetCurrentRound(){this.typedText="",this.currentLetter="",this.upcommingTextToType=""}resetWholeSession(){this.remainingWordsToType=this.poolOfWords}}Gc=hk();xr=gk(Gc,0,"TypingPage",Og,xr);fk(Gc,1,xr);const Lg="propaganda-page",Hl=`<!-- add a search field for each column -->
<article class="propaganda-page-container">
  <section class="search-container">
    <div class="search">
      <input
        type="text"
        placeholder="Search propaganda"
        value.bind="searchPropagandaValue"
        tabindex="1"
      />
      <ul if.bind="searchPropagandaValue" class="propaganda-completion-list">
        <li
          repeat.for="suggestion of propagandaSuggestions"
          class="suggestion"
          click.trigger="selectSuggestion(suggestion.original)"
        >
          <span innerhtml.bind="suggestion.highlighted"></span>
          <!-- \${propaganda} -->
        </li>
      </ul>
    </div>

    <div class="search">
      <input
        type="text"
        placeholder="Search topics"
        value.bind="searchTopicsValue"
        tabindex="1"
      />
    </div>
    <div class="search">
      <input
        type="text"
        placeholder="Search tags"
        value.bind="searchTagsValue"
        tabindex="1"
      />
    </div>
  </section>

  <!--create a basic table with 3 columns, and 4 rows in aurelia, using repeat.for-->
  <table>
    <thead>
      <tr>
        <th>Propaganda</th>
        <th>Topics</th>
        <th>Tags</th>
      </tr>
    </thead>
    <tbody>
      <tr repeat.for="row of propagandaTableRows">
        <td>\${row.propaganda}</td>
        <td>\${row.topics}</td>
        <td>\${row.tags}</td>
      </tr>
    </tbody>
  </table>
</article>
`,Vg=[],Dg={};let Xa;function _k(i){Xa||(Xa=ie.define({name:Lg,template:Hl,dependencies:Vg,bindables:Dg})),i.register(Xa)}const mk=Object.freeze(Object.defineProperty({__proto__:null,bindables:Dg,default:Hl,dependencies:Vg,name:Lg,register:_k,template:Hl},Symbol.toStringTag,{value:"Module"})),Bg={"Agenda setting":{tags:["#influencing","#frequency","#prominently"],topics:["Action Verbs","Cognitive Verbs","Concepts and Ideas","Communication","Descriptive Adjectives"]},"Appeal to Prejudice":{tags:["#bias","#manipulating","#moralappeal","#discrimination","#persuasion"],topics:["Concepts and Ideas","Cognitive Verbs","Action Verbs","Emotional Adjectives","Psychology","Communication"]},"Appeal to fear":{tags:["#instilling","#general_population","#anxiety","#panic","#fear","#supporting","#appealling"],topics:["Action Verbs","Emotional Adjectives","Concepts and Ideas","Psychology","Cognitive Verbs","Descriptive Adjectives"]},"Beautiful People":{tags:["#advertising","#propaganda","#celebrity","#attracting","#aspiration","#influencing"],topics:["Action Verbs","Communication","Concepts and Ideas","Cognitive Verbs"]},"Big lie":{tags:["#lying"],topics:["Action Verbs","Cognitive Verbs"]},"Classical conditioning":{tags:["#behavioralpsychology","#stimulating","#response","#conditioning","#associativelearning"],topics:["Action Verbs","Emotional Adjectives","Communication","Concepts and Ideas","Psychology"]},"Cognitive dissonance":{tags:["#exploiting","#consistancy","#endorsement","#mind"],topics:["Action Verbs","Cognitive Verbs","Descriptive Adjectives","Concepts and Ideas","Communication","Psychology"]},"Cult of Personality":{tags:["#idealization","#praising","#advocating","#promotation"],topics:["Cognitive Verbs","Concepts and Ideas","Action Verbs","Emotional Adjectives"]},"Demonizing the enemy":{tags:["#discrediting","#illusion"],topics:["Action Verbs","Communication","Concepts and Ideas","Cognitive Verbs"]},Demoralization:{tags:["#propaganda","#psychologicalwarfare","#surrendering","#defecting","#eroding","#spirits"],topics:["Concepts and Ideas","Communication","Psychology","Action Verbs","Cognitive Verbs"]},Dictat:{tags:["#simplifying","#decisionmaking","#controlling","#directive","#manipulating"],topics:["Action Verbs","Cognitive Verbs","Concepts and Ideas","Psychology","Communication"]},Disinformation:{tags:["#information","#fake"],topics:["Concepts and Ideas","Communication","Negative Adjectives"]},"Divide and Rule":{tags:["#division"],topics:["Concepts and Ideas","Cognitive Verbs"]},Euphemism:{tags:["#words","#suggesting"],topics:["Concepts and Ideas","Communication","Action Verbs","Cognitive Verbs"]},Euphoria:{tags:["#appealling","#morale","#patriotic"],topics:["Emotional Adjectives","Descriptive Adjectives","Concepts and Ideas","Psychology"]},"Fire hose of falsehood":{tags:["#repitition","#oversaturation"],topics:["Action Verbs","Cognitive Verbs","Descriptive Adjectives","Emotional Adjectives"]},"Flag waving":{tags:["#justifying","#group"],topics:["Action Verbs","Cognitive Verbs","Concepts and Ideas","Psychology"]},Flak:{tags:["#words","#discrediting"],topics:["Concepts and Ideas","Communication","Action Verbs"]},"Foot in the door technique":{tags:["#psychology","#persuasion","#manipulating","#incremental","#compliance"],topics:["Concepts and Ideas","Psychology","Communication","Action Verbs","Cognitive Verbs","Descriptive Adjectives"]},Framing:{tags:["#persuasion","#rhetoric","#perception","#manipulating","#bias"],topics:["Concepts and Ideas","Communication","Psychology","Action Verbs","Cognitive Verbs"]},Fud:{tags:["#influencing","#perception","#public","#undermining","#credibility","#belief","#disseminate"],topics:["Action Verbs","Cognitive Verbs","Concepts and Ideas","Psychology","Communication"]},"Gish Gallup":{tags:["#words","#confusing","#irrelevant"],topics:["Concepts and Ideas","Communication","Emotional Adjectives","Descriptive Adjectives","Cognitive Verbs"]},"Glittering generalities":{tags:["#emotionalappeal","#vagueness","#persuasion","#feelgood","#manipulating"],topics:["Concepts and Ideas","Communication","Descriptive Adjectives","Cognitive Verbs","Emotional Adjectives","Action Verbs"]},"Guilt by association":{tags:["#guilt","#popular"],topics:["Emotional Adjectives","Descriptive Adjectives","Cognitive Verbs"]},"Half truth":{tags:["#lying","#words","#truth","#statement","#decepting"],topics:["Action Verbs","Cognitive Verbs","Concepts and Ideas","Communication"]},"Inevitable Victory":{tags:["#certainty","#reassurance","#illusion"],topics:["Concepts and Ideas","Cognitive Verbs"]},"Information overload":{tags:["#oversaturation","#flooding","#secrecy"],topics:["Descriptive Adjectives","Emotional Adjectives","Action Verbs","Cognitive Verbs","Concepts and Ideas","Communication"]},"Intentional vagueness":{tags:["#words","#distracting","#vague"],topics:["Concepts and Ideas","Communication","Action Verbs","Emotional Adjectives","Descriptive Adjectives"]},Labeling:{tags:["#implication"],topics:["Cognitive Verbs","Communication"]},"Latitudes of Acceptance":{tags:["#extreme","#matching"],topics:["Descriptive Adjectives","Emotional Adjectives","Action Verbs","Cognitive Verbs"]},"Limited hangout":{tags:["#withhold","#distracting","#exposing"],topics:["Action Verbs","Cognitive Verbs","Emotional Adjectives","Communication"]},"Loaded language":{tags:["#emotion","#influencing"],topics:["Concepts and Ideas","Emotional Adjectives","Action Verbs","Cognitive Verbs"]},"Love bombing":{tags:["#recruiting","#cult","#manipulating","#affecting","#isolation"],topics:["Action Verbs","Cognitive Verbs","Concepts and Ideas","Psychology"]},"Milieu control":{tags:["#group_pressure","#common_language","#surrounding","#identity"],topics:["Concepts and Ideas","Psychology","Communication","Action Verbs","Cognitive Verbs"]},"Misuse of Statistics":{tags:["#logic","#bias","#misinformation"],topics:["Concepts and Ideas","Communication","Cognitive Verbs"]},Obfuscation:{tags:["#obfuscating"],topics:["Action Verbs","Cognitive Verbs"]},"Operant conditioning":{tags:["#behavior","#associating","#reinforcing","#punishing","#stimulating","#modifying"],topics:["Concepts and Ideas","Psychology","Cognitive Verbs","Action Verbs","Emotional Adjectives"]},Oversimplification:{tags:["#deflecting","#simplifying"],topics:["Action Verbs","Cognitive Verbs"]},Paltering:{tags:["#paltering"],topics:["Action Verbs","Cognitive Verbs"]},"Pensée unique":{tags:["#deflecting","#reduction"],topics:["Action Verbs","Cognitive Verbs"]},"Plain folk":{tags:["#propaganda","#common_manner"],topics:["Concepts and Ideas","Communication","Descriptive Adjectives","Cognitive Verbs"]},"Quotes out of context":{tags:["#selective"],topics:["Cognitive Verbs","Concepts and Ideas"]},Rationalization:{tags:["#defensive","#justifying","#logic"],topics:["Concepts and Ideas","Psychology","Action Verbs","Cognitive Verbs","Communication"]},Scapegoating:{tags:["#blaming","#guilt","#distracting"],topics:["Action Verbs","Cognitive Verbs","Emotional Adjectives","Descriptive Adjectives"]},"Semantic satiation":{tags:["#repitition","#normalizing"],topics:["Action Verbs","Cognitive Verbs"]},"Smear campaign":{tags:["#undermining","#reputation","#premediate"],topics:["Action Verbs","Cognitive Verbs","Concepts and Ideas","Psychology"]},Testimonials:{tags:["#context","#citation"],topics:["Concepts and Ideas","Communication"]},"Third party technique":{tags:["#seemingly","#independent","#have_stake"],topics:["Descriptive Adjectives","Emotional Adjectives","Cognitive Verbs","Concepts and Ideas"]},Transfer:{tags:["#associating","#projecting","#manipulating","#persuasion","#reputation"],topics:["Cognitive Verbs","Concepts and Ideas","Action Verbs","Communication","Psychology"]},"Unstated assumption":{tags:["#credibility","#repitition","#implication","#assuming"],topics:["Concepts and Ideas","Communication","Action Verbs","Cognitive Verbs","Psychology"]},Whataboutism:{tags:["#discrediting","#distracting","#indirect"],topics:["Action Verbs","Communication","Emotional Adjectives"]}},Ng={"#advertising":{topics:["Action Verbs","Communication"],propaganda:["Beautiful People"]},"#advocating":{topics:["Action Verbs","Concepts and Ideas"],propaganda:["Cult of Personality"]},"#affecting":{topics:["Action Verbs","Cognitive Verbs"],propaganda:["Love bombing"]},"#appealling":{topics:["Emotional Adjectives","Descriptive Adjectives"],propaganda:["Appeal to fear","Euphoria"]},"#associating":{topics:["Cognitive Verbs","Concepts and Ideas"],propaganda:["Operant conditioning","Transfer"]},"#assuming":{topics:["Cognitive Verbs","Psychology"],propaganda:["Unstated assumption"]},"#attracting":{topics:["Action Verbs","Communication"],propaganda:["Beautiful People"]},"#anxiety":{topics:["Concepts and Ideas","Emotional Adjectives"],propaganda:["Appeal to fear"]},"#aspiration":{topics:["Concepts and Ideas","Cognitive Verbs"],propaganda:["Beautiful People"]},"#behavior":{topics:["Concepts and Ideas","Psychology"],propaganda:["Operant conditioning"]},"#bias":{topics:["Concepts and Ideas","Cognitive Verbs"],propaganda:["Appeal to Prejudice","Framing","Misuse of Statistics"]},"#associativelearning":{topics:["Concepts and Ideas","Psychology"],propaganda:["Classical conditioning"]},"#blaming":{topics:["Action Verbs","Cognitive Verbs"],propaganda:["Scapegoating"]},"#conditioning":{topics:["Concepts and Ideas","Psychology"],propaganda:["Classical conditioning"]},"#confusing":{topics:["Emotional Adjectives","Descriptive Adjectives"],propaganda:["Gish Gallup"]},"#controlling":{topics:["Action Verbs","Communication"],propaganda:["Dictat"]},"#decepting":{topics:["Action Verbs","Communication"],propaganda:["Half truth"]},"#celebrity":{topics:["Concepts and Ideas","Communication"],propaganda:["Beautiful People"]},"#citation":{topics:["Communication"],propaganda:["Testimonials"]},"#compliance":{topics:["Cognitive Verbs","Psychology"],propaganda:["Foot in the door technique"]},"#consistancy":{topics:["Cognitive Verbs","Descriptive Adjectives"],propaganda:["Cognitive dissonance"]},"#context":{topics:["Concepts and Ideas","Communication"],propaganda:["Testimonials"]},"#credibility":{topics:["Concepts and Ideas","Communication"],propaganda:["Fud","Unstated assumption"]},"#decisionmaking":{topics:["Concepts and Ideas","Psychology"],propaganda:["Dictat"]},"#common_language":{topics:["Concepts and Ideas","Communication"],propaganda:["Milieu control"]},"#common_manner":{topics:["Descriptive Adjectives","Cognitive Verbs"],propaganda:["Plain folk"]},"#cult":{topics:["Concepts and Ideas","Psychology"],propaganda:["Love bombing"]},"#defecting":{topics:["Action Verbs","Cognitive Verbs"],propaganda:["Demoralization"]},"#deflecting":{topics:["Action Verbs","Cognitive Verbs"],propaganda:["Oversimplification","Pensée unique"]},"#discrediting":{topics:["Action Verbs","Communication"],propaganda:["Demonizing the enemy","Flak","Whataboutism"]},"#distracting":{topics:["Action Verbs","Emotional Adjectives"],propaganda:["Intentional vagueness","Limited hangout","Scapegoating","Whataboutism"]},"#defensive":{topics:["Concepts and Ideas","Psychology"],propaganda:["Rationalization"]},"#directive":{topics:["Action Verbs","Communication"],propaganda:["Dictat"]},"#discrimination":{topics:["Concepts and Ideas","Psychology"],propaganda:["Appeal to Prejudice"]},"#division":{topics:["Concepts and Ideas","Cognitive Verbs"],propaganda:["Divide and Rule"]},"#emotion":{topics:["Concepts and Ideas","Emotional Adjectives"],propaganda:["Loaded language"]},"#emotionalappeal":{topics:["Concepts and Ideas","Communication"],propaganda:["Glittering generalities"]},"#endorsement":{topics:["Concepts and Ideas","Communication"],propaganda:["Cognitive dissonance"]},"#eroding":{topics:["Action Verbs","Cognitive Verbs"],propaganda:["Demoralization"]},"#exploiting":{topics:["Action Verbs","Cognitive Verbs"],propaganda:["Cognitive dissonance"]},"#exposing":{topics:["Action Verbs","Communication"],propaganda:["Limited hangout"]},"#extreme":{topics:["Descriptive Adjectives","Emotional Adjectives"],propaganda:["Latitudes of Acceptance"]},"#fake":{topics:["Negative Adjectives","Concepts and Ideas"],propaganda:["Disinformation"]},"#fear":{topics:["Concepts and Ideas","Emotional Adjectives"],propaganda:["Appeal to fear"]},"#feelgood":{topics:["Emotional Adjectives","Descriptive Adjectives"],propaganda:["Glittering generalities"]},"#flooding":{topics:["Action Verbs","Cognitive Verbs"],propaganda:["Information overload"]},"#frequency":{topics:["Concepts and Ideas","Communication"],propaganda:["Agenda setting"]},"#general_population":{topics:["Concepts and Ideas","Psychology"],propaganda:["Appeal to fear"]},"#group":{topics:["Concepts and Ideas","Psychology"],propaganda:["Flag waving"]},"#group_pressure":{topics:["Concepts and Ideas","Psychology"],propaganda:["Milieu control"]},"#guilt":{topics:["Emotional Adjectives","Descriptive Adjectives"],propaganda:["Guilt by association","Scapegoating"]},"#have_stake":{topics:["Cognitive Verbs","Concepts and Ideas"],propaganda:["Third party technique"]},"#idealization":{topics:["Cognitive Verbs","Concepts and Ideas"],propaganda:["Cult of Personality"]},"#identity":{topics:["Concepts and Ideas","Psychology"],propaganda:["Milieu control"]},"#illusion":{topics:["Concepts and Ideas","Cognitive Verbs"],propaganda:["Demonizing the enemy","Inevitable Victory"]},"#implication":{topics:["Cognitive Verbs","Communication"],propaganda:["Labeling","Unstated assumption"]},"#incremental":{topics:["Descriptive Adjectives","Cognitive Verbs"],propaganda:["Foot in the door technique"]},"#independent":{topics:["Descriptive Adjectives","Cognitive Verbs"],propaganda:["Third party technique"]},"#information":{topics:["Concepts and Ideas","Communication"],propaganda:["Disinformation"]},"#influencing":{topics:["Action Verbs","Cognitive Verbs"],propaganda:["Agenda setting","Beautiful People","Fud","Loaded language"]},"#instilling":{topics:["Action Verbs","Emotional Adjectives"],propaganda:["Appeal to fear"]},"#isolation":{topics:["Concepts and Ideas","Psychology"],propaganda:["Love bombing"]},"#justifying":{topics:["Action Verbs","Cognitive Verbs"],propaganda:["Flag waving","Rationalization"]},"#lying":{topics:["Action Verbs","Cognitive Verbs"],propaganda:["Big lie","Half truth"]},"#manipulating":{topics:["Action Verbs","Cognitive Verbs"],propaganda:["Appeal to Prejudice","Dictat","Foot in the door technique","Framing","Glittering generalities","Love bombing","Transfer"]},"#matching":{topics:["Action Verbs","Cognitive Verbs"],propaganda:["Latitudes of Acceptance"]},"#irrelevant":{topics:["Descriptive Adjectives","Cognitive Verbs"],propaganda:["Gish Gallup"]},"#logic":{topics:["Concepts and Ideas","Communication"],propaganda:["Misuse of Statistics","Rationalization"]},"#mind":{topics:["Concepts and Ideas","Psychology"],propaganda:["Cognitive dissonance"]},"#misinformation":{topics:["Concepts and Ideas","Communication"],propaganda:["Misuse of Statistics"]},"#moralappeal":{topics:["Concepts and Ideas","Emotional Adjectives"],propaganda:["Appeal to Prejudice"]},"#morale":{topics:["Concepts and Ideas","Psychology"],propaganda:["Euphoria"]},"#modifying":{topics:["Action Verbs","Cognitive Verbs"],propaganda:["Operant conditioning"]},"#normalizing":{topics:["Action Verbs","Cognitive Verbs"],propaganda:["Semantic satiation"]},"#obfuscating":{topics:["Action Verbs","Cognitive Verbs"],propaganda:["Obfuscation"]},"#oversaturation":{topics:["Descriptive Adjectives","Emotional Adjectives"],propaganda:["Fire hose of falsehood","Information overload"]},"#paltering":{topics:["Action Verbs","Cognitive Verbs"],propaganda:["Paltering"]},"#panic":{topics:["Concepts and Ideas","Emotional Adjectives"],propaganda:["Appeal to fear"]},"#patriotic":{topics:["Emotional Adjectives","Descriptive Adjectives"],propaganda:["Euphoria"]},"#perception":{topics:["Concepts and Ideas","Psychology"],propaganda:["Framing","Fud"]},"#persuasion":{topics:["Concepts and Ideas","Communication"],propaganda:["Appeal to Prejudice","Foot in the door technique","Framing","Glittering generalities","Transfer"]},"#popular":{topics:["Descriptive Adjectives","Cognitive Verbs"],propaganda:["Guilt by association"]},"#praising":{topics:["Action Verbs","Emotional Adjectives"],propaganda:["Cult of Personality"]},"#premediate":{topics:["Cognitive Verbs","Concepts and Ideas"],propaganda:["Smear campaign"]},"#projecting":{topics:["Action Verbs","Cognitive Verbs"],propaganda:["Transfer"]},"#prominently":{topics:["Descriptive Adjectives","Cognitive Verbs"],propaganda:["Agenda setting"]},"#promotion":{topics:["Action Verbs","Communication"]},"#propaganda":{topics:["Concepts and Ideas","Communication"],propaganda:["Beautiful People","Demoralization","Plain folk"]},"#psychologicalwarfare":{topics:["Concepts and Ideas","Psychology"],propaganda:["Demoralization"]},"#psychology":{topics:["Concepts and Ideas","Psychology"],propaganda:["Foot in the door technique"]},"#punishing":{topics:["Action Verbs","Emotional Adjectives"],propaganda:["Operant conditioning"]},"#recruiting":{topics:["Action Verbs","Cognitive Verbs"],propaganda:["Love bombing"]},"#reduction":{topics:["Action Verbs","Cognitive Verbs"],propaganda:["Pensée unique"]},"#reinforcing":{topics:["Action Verbs","Cognitive Verbs"],propaganda:["Operant conditioning"]},"#repitition":{topics:["Action Verbs","Cognitive Verbs"],propaganda:["Fire hose of falsehood","Semantic satiation","Unstated assumption"]},"#reputation":{topics:["Concepts and Ideas","Psychology"],propaganda:["Smear campaign","Transfer"]},"#response":{topics:["Action Verbs","Communication"],propaganda:["Classical conditioning"]},"#rhetoric":{topics:["Concepts and Ideas","Communication"],propaganda:["Framing"]},"#secrecy":{topics:["Concepts and Ideas","Communication"],propaganda:["Information overload"]},"#seemingly":{topics:["Descriptive Adjectives","Emotional Adjectives"],propaganda:["Third party technique"]},"#selective":{topics:["Cognitive Verbs","Concepts and Ideas"],propaganda:["Quotes out of context"]},"#simplifying":{topics:["Action Verbs","Cognitive Verbs"],propaganda:["Dictat","Oversimplification"]},"#spirits":{topics:["Concepts and Ideas","Psychology"],propaganda:["Demoralization"]},"#statement":{topics:["Concepts and Ideas","Communication"],propaganda:["Half truth"]},"#stimulating":{topics:["Action Verbs","Emotional Adjectives"],propaganda:["Classical conditioning","Operant conditioning"]},"#suggesting":{topics:["Action Verbs","Cognitive Verbs"],propaganda:["Euphemism"]},"#supporting":{topics:["Action Verbs","Cognitive Verbs"],propaganda:["Appeal to fear"]},"#surrendering":{topics:["Action Verbs","Cognitive Verbs"],propaganda:["Demoralization"]},"#surrounding":{topics:["Action Verbs","Cognitive Verbs"],propaganda:["Milieu control"]},"#truth":{topics:["Concepts and Ideas","Communication"],propaganda:["Half truth"]},"#undermining":{topics:["Action Verbs","Cognitive Verbs"],propaganda:["Fud","Smear campaign"]},"#vague":{topics:["Descriptive Adjectives","Emotional Adjectives"],propaganda:["Intentional vagueness"]},"#vagueness":{topics:["Descriptive Adjectives","Cognitive Verbs"],propaganda:["Glittering generalities"]},"#withhold":{topics:["Action Verbs","Cognitive Verbs"],propaganda:["Limited hangout"]},"#words":{topics:["Concepts and Ideas","Communication"],propaganda:["Euphemism","Flak","Gish Gallup","Half truth","Intentional vagueness"]},"#behavioralpsychology":{topics:[],propaganda:["Classical conditioning"]},"#promotation":{topics:[],propaganda:["Cult of Personality"]},"#public":{topics:[],propaganda:["Fud"]},"#belief":{topics:[],propaganda:["Fud"]},"#disseminate":{topics:[],propaganda:["Fud"]},"#certainty":{topics:[],propaganda:["Inevitable Victory"]},"#reassurance":{topics:[],propaganda:["Inevitable Victory"]},"#indirect":{topics:[],propaganda:["Whataboutism"]}},Mg={"Action Verbs":{tags:["#advertising","#advocating","#affecting","#attracting","#blaming","#controlling","#decepting","#defecting","#deflecting","#discrediting","#distracting","#directive","#eroding","#exploiting","#exposing","#flooding","#influencing","#instilling","#justifying","#lying","#manipulating","#matching","#modifying","#normalizing","#obfuscating","#paltering","#praising","#projecting","#promotion","#punishing","#recruiting","#reduction","#reinforcing","#repitition","#response","#simplifying","#stimulating","#suggesting","#supporting","#surrendering","#surrounding","#undermining","#withhold"],propaganda:["Agenda setting","Appeal to Prejudice","Appeal to fear","Beautiful People","Big lie","Classical conditioning","Cognitive dissonance","Cult of Personality","Demonizing the enemy","Demoralization","Dictat","Euphemism","Fire hose of falsehood","Flag waving","Flak","Foot in the door technique","Framing","Fud","Glittering generalities","Half truth","Information overload","Intentional vagueness","Latitudes of Acceptance","Limited hangout","Loaded language","Love bombing","Milieu control","Obfuscation","Operant conditioning","Oversimplification","Paltering","Pensée unique","Rationalization","Scapegoating","Semantic satiation","Smear campaign","Transfer","Unstated assumption","Whataboutism"]},Communication:{tags:["#advertising","#attracting","#controlling","#decepting","#celebrity","#citation","#context","#credibility","#common_language","#discrediting","#directive","#emotionalappeal","#endorsement","#exposing","#frequency","#implication","#information","#logic","#misinformation","#persuasion","#promotion","#propaganda","#response","#rhetoric","#secrecy","#statement","#truth","#words"],propaganda:["Agenda setting","Appeal to Prejudice","Beautiful People","Classical conditioning","Cognitive dissonance","Demonizing the enemy","Demoralization","Dictat","Disinformation","Euphemism","Flak","Foot in the door technique","Framing","Fud","Gish Gallup","Glittering generalities","Half truth","Information overload","Intentional vagueness","Labeling","Limited hangout","Milieu control","Misuse of Statistics","Plain folk","Rationalization","Testimonials","Transfer","Unstated assumption","Whataboutism"]},"Concepts and Ideas":{tags:["#advocating","#associating","#anxiety","#aspiration","#behavior","#bias","#associativelearning","#conditioning","#celebrity","#context","#credibility","#decisionmaking","#common_language","#cult","#defensive","#discrimination","#division","#emotion","#emotionalappeal","#endorsement","#fake","#fear","#frequency","#general_population","#group","#group_pressure","#have_stake","#idealization","#identity","#illusion","#information","#isolation","#logic","#mind","#misinformation","#moralappeal","#morale","#panic","#perception","#persuasion","#premediate","#propaganda","#psychologicalwarfare","#psychology","#reputation","#rhetoric","#secrecy","#selective","#spirits","#statement","#truth","#words"],propaganda:["Agenda setting","Appeal to Prejudice","Appeal to fear","Beautiful People","Classical conditioning","Cognitive dissonance","Cult of Personality","Demonizing the enemy","Demoralization","Dictat","Disinformation","Divide and Rule","Euphemism","Euphoria","Flag waving","Flak","Foot in the door technique","Framing","Fud","Gish Gallup","Glittering generalities","Half truth","Inevitable Victory","Information overload","Intentional vagueness","Loaded language","Love bombing","Milieu control","Misuse of Statistics","Operant conditioning","Plain folk","Quotes out of context","Rationalization","Smear campaign","Testimonials","Third party technique","Transfer","Unstated assumption"]},"Cognitive Verbs":{tags:["#affecting","#associating","#assuming","#aspiration","#bias","#blaming","#compliance","#consistancy","#common_manner","#defecting","#deflecting","#division","#eroding","#exploiting","#flooding","#have_stake","#idealization","#illusion","#implication","#incremental","#independent","#influencing","#justifying","#lying","#manipulating","#matching","#irrelevant","#modifying","#normalizing","#obfuscating","#paltering","#popular","#premediate","#projecting","#prominently","#recruiting","#reduction","#reinforcing","#repitition","#selective","#simplifying","#suggesting","#supporting","#surrendering","#surrounding","#undermining","#vagueness","#withhold"],propaganda:["Agenda setting","Appeal to Prejudice","Appeal to fear","Beautiful People","Big lie","Cognitive dissonance","Cult of Personality","Demonizing the enemy","Demoralization","Dictat","Divide and Rule","Euphemism","Fire hose of falsehood","Flag waving","Foot in the door technique","Framing","Fud","Gish Gallup","Glittering generalities","Guilt by association","Half truth","Inevitable Victory","Information overload","Labeling","Latitudes of Acceptance","Limited hangout","Loaded language","Love bombing","Milieu control","Misuse of Statistics","Obfuscation","Operant conditioning","Oversimplification","Paltering","Pensée unique","Plain folk","Quotes out of context","Rationalization","Scapegoating","Semantic satiation","Smear campaign","Third party technique","Transfer","Unstated assumption"]},"Emotional Adjectives":{tags:["#appealling","#anxiety","#confusing","#distracting","#emotion","#extreme","#fear","#feelgood","#guilt","#instilling","#moralappeal","#oversaturation","#panic","#patriotic","#praising","#punishing","#seemingly","#stimulating","#vague"],propaganda:["Appeal to Prejudice","Appeal to fear","Classical conditioning","Cult of Personality","Euphoria","Fire hose of falsehood","Gish Gallup","Glittering generalities","Guilt by association","Information overload","Intentional vagueness","Latitudes of Acceptance","Limited hangout","Loaded language","Operant conditioning","Scapegoating","Third party technique","Whataboutism"]},"Descriptive Adjectives":{tags:["#appealling","#confusing","#consistancy","#common_manner","#extreme","#feelgood","#guilt","#incremental","#independent","#irrelevant","#oversaturation","#patriotic","#popular","#prominently","#seemingly","#vague","#vagueness"],propaganda:["Agenda setting","Appeal to fear","Cognitive dissonance","Euphoria","Fire hose of falsehood","Foot in the door technique","Gish Gallup","Glittering generalities","Guilt by association","Information overload","Intentional vagueness","Latitudes of Acceptance","Plain folk","Scapegoating","Third party technique"]},Psychology:{tags:["#assuming","#behavior","#associativelearning","#conditioning","#compliance","#decisionmaking","#cult","#defensive","#discrimination","#general_population","#group","#group_pressure","#identity","#isolation","#mind","#morale","#perception","#psychologicalwarfare","#psychology","#reputation","#spirits"],propaganda:["Appeal to Prejudice","Appeal to fear","Classical conditioning","Cognitive dissonance","Demoralization","Dictat","Euphoria","Flag waving","Foot in the door technique","Framing","Fud","Love bombing","Milieu control","Operant conditioning","Rationalization","Smear campaign","Transfer","Unstated assumption"]},"Negative Adjectives":{tags:["#fake"],propaganda:["Disinformation"]}},vk={propaganda:Bg,tags:Ng,topics:Mg},bk=Object.freeze(Object.defineProperty({__proto__:null,default:vk,propaganda:Bg,tags:Ng,topics:Mg},Symbol.toStringTag,{value:"Module"}));var wk=Object.create,Qc=Object.defineProperty,yk=Object.getOwnPropertyDescriptor,Ck=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),Fr=i=>{throw TypeError(i)},kk=(i,e,t)=>e in i?Qc(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Ku=(i,e)=>Qc(i,"name",{value:e,configurable:!0}),Ak=i=>[,,,wk(null)],jg=["class","method","getter","setter","accessor","field","value","get","set"],Hn=i=>i!==void 0&&typeof i!="function"?Fr("Function expected"):i,$k=(i,e,t,s,n)=>({kind:jg[i],name:e,metadata:s,addInitializer:r=>t._?Fr("Already initialized"):n.push(Hn(r||null))}),Sk=(i,e)=>kk(e,Ck("metadata"),i[3]),Ul=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)e&1?r[n].call(t):s=r[n].call(t,s);return s},Fg=(i,e,t,s,n,r)=>{var o,a,l,c,u,h=e&7,d=!!(e&8),p=!!(e&16),f=h>3?i.length+1:h?d?1:2:0,_=jg[h+5],g=h>3&&(i[f-1]=[]),v=i[f]||(i[f]=[]),m=h&&(!p&&!d&&(n=n.prototype),h<5&&(h>3||!p)&&yk(h<4?n:{get[t](){return Gu(this,r)},set[t](w){return Qu(this,r,w)}},t));h?p&&h<4&&Ku(r,(h>2?"set ":h>1?"get ":"")+t):Ku(n,t);for(var A=s.length-1;A>=0;A--)c=$k(h,t,l={},i[3],v),h&&(c.static=d,c.private=p,u=c.access={has:p?w=>xk(n,w):w=>t in w},h^3&&(u.get=p?w=>(h^1?Gu:Tk)(w,n,h^4?r:m.get):w=>w[t]),h>2&&(u.set=p?(w,k)=>Qu(w,n,k,h^4?r:m.set):(w,k)=>w[t]=k)),a=(0,s[A])(h?h<4?p?r:m[_]:h>4?void 0:{get:m.get,set:m.set}:n,c),l._=1,h^4||a===void 0?Hn(a)&&(h>4?g.unshift(a):h?p?r=a:m[_]=a:n=a):typeof a!="object"||a===null?Fr("Object expected"):(Hn(o=a.get)&&(m.get=o),Hn(o=a.set)&&(m.set=o),Hn(o=a.init)&&g.unshift(o));return h||Sk(i,n),m&&Qc(n,t,m),p?h^4?r:m:n},Jc=(i,e,t)=>e.has(i)||Fr("Cannot "+t),xk=(i,e)=>Object(e)!==e?Fr('Cannot use the "in" operator on this value'):i.has(e),Gu=(i,e,t)=>(Jc(i,e,"read from private field"),t?t.call(i):e.get(i)),Qu=(i,e,t,s)=>(Jc(i,e,"write to private field"),s?s.call(i,t):e.set(i,t),t),Tk=(i,e,t)=>(Jc(i,e,"access private method"),t),zg,Hg,yn;const Za=bk;Hg=[Os(mk)],zg=[nw];class Tr{constructor(){this.propagandaTableRows=[],this.searchPropagandaValue=Ul(yn,8,this,""),Ul(yn,11,this),this.searchTopicsValue="",this.searchTagsValue="",this.propagandaSuggestions=[]}searchPropagandaValueChanged(){this.resetSuggestions(),this.generateRows()}attached(){this.generateRows()}selectSuggestion(e){console.log("[propaganda-page.ts,50] suggestion: ",e),this.searchPropagandaValue=e,this.generateRows()}generateRows(){const e=[];for(const t in Za.propaganda){if(!t.toLowerCase().includes(this.searchPropagandaValue.toLowerCase()))continue;this.highlightSearchPropagandaValue(t);const n=Za.propaganda[t].topics.join(", "),r=Za.propaganda[t].tags.join(", ");e.push({propaganda:t,topics:n,tags:r})}this.propagandaTableRows=e}resetSuggestions(){this.propagandaSuggestions=[]}highlightSearchPropagandaValue(e){if(this.searchPropagandaValue.length>0){const t=e.toLowerCase().indexOf(this.searchPropagandaValue.toLowerCase()),s=e.substring(0,t),n=e.substring(t,t+this.searchPropagandaValue.length),r=e.substring(t+this.searchPropagandaValue.length);this.propagandaSuggestions.push({highlighted:`${s}<span class="highlight">${n}</span>${r}`,original:e})}}}yn=Ak();Fg(yn,5,"searchPropagandaValue",zg,Tr);Tr=Fg(yn,0,"PropagandaPage",Hg,Tr);Ul(yn,1,Tr);var Ik=Object.create,Yc=Object.defineProperty,Pk=Object.getOwnPropertyDescriptor,Ek=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),Ug=i=>{throw TypeError(i)},Rk=(i,e,t)=>e in i?Yc(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Ok=(i,e)=>Yc(i,"name",{value:e,configurable:!0}),Lk=i=>[,,,Ik(null)],Vk=["class","method","getter","setter","accessor","field","value","get","set"],Wg=i=>i!==void 0&&typeof i!="function"?Ug("Function expected"):i,Dk=(i,e,t,s,n)=>({kind:Vk[i],name:e,metadata:s,addInitializer:r=>t._?Ug("Already initialized"):n.push(Wg(r||null))}),Bk=(i,e)=>Rk(e,Ek("metadata"),i[3]),Nk=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)r[n].call(t);return s},Mk=(i,e,t,s,n,r)=>{var o,a,l,c=e&7,u=!!(e&16),h=0,d=i[h]||(i[h]=[]),p=c&&(n=n.prototype,c<5&&(c>3||!u)&&Pk(n,t));Ok(n,t);for(var f=s.length-1;f>=0;f--)l=Dk(c,t,a={},i[3],d),o=(0,s[f])(n,l),a._=1,Wg(o)&&(n=o);return Bk(i,n),p&&Yc(n,t,p),u?c^4?r:p:n},qg,Xc;qg=[Os(MC),wC({title:yg,routes:[{path:["typing"],component:xr,title:"Typing"},{path:"propaganda",component:Tr,title:"Propaganda"}]}),Go(Sr,zo)];class Ho{constructor(e,t){this.router=e,this.store=t,this.appName=yg,this.topics=Cg,console.log("[my-app.ts,78] this.store: ",this.store)}attached(){this.router.load(xr),JC()}}Xc=Lk();Ho=Mk(Xc,0,"MyApp",qg,Ho);Nk(Xc,1,Ho);var jk=Object.create,Zc=Object.defineProperty,Fk=Object.getOwnPropertyDescriptor,zk=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),Kg=i=>{throw TypeError(i)},Hk=(i,e,t)=>e in i?Zc(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Uk=(i,e)=>Zc(i,"name",{value:e,configurable:!0}),Wk=i=>[,,,jk(null)],qk=["class","method","getter","setter","accessor","field","value","get","set"],Gg=i=>i!==void 0&&typeof i!="function"?Kg("Function expected"):i,Kk=(i,e,t,s,n)=>({kind:qk[i],name:e,metadata:s,addInitializer:r=>t._?Kg("Already initialized"):n.push(Gg(r||null))}),Gk=(i,e)=>Hk(e,zk("metadata"),i[3]),Qk=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)r[n].call(t);return s},Jk=(i,e,t,s,n,r)=>{var o,a,l,c=e&7,u=!!(e&16),h=0,d=i[h]||(i[h]=[]),p=c&&(n=n.prototype,c<5&&(c>3||!u)&&Fk(n,t));Uk(n,t);for(var f=s.length-1;f>=0;f--)l=Kk(c,t,a={},i[3],d),o=(0,s[f])(n,l),a._=1,Gg(o)&&(n=o);return Gk(i,n),p&&Zc(n,t,p),u?c^4?r:p:n},Qg,eh;Qg=[sy("autosize")];class Uo{constructor(){this.element=S(zi);const e=10;window.setTimeout(()=>{this.element.style.height="1px",this.element.style.height=e+this.element.scrollHeight+"px"},0),this.element.addEventListener("keyup",()=>{this.element.style.height="1px",this.element.style.height=e+this.element.scrollHeight+"px"})}}eh=Wk();Uo=Jk(eh,0,"AutosizeCustomAttribute",Qg,Uo);Qk(eh,1,Uo);const Jg="labeled-word-list",Wl=`<section class="labeled-words-container">
  <label>\${finalLabel}</label>

  <!-- Custom Words -->
  <template if.bind="customWords.length > 0">
    <let has-words.bind="customWords.length > 0"></let>
    <template if.bind="hasWords" repeat.for="[word, wordData] of customWords">
      <em
        class="word \${wordData.disabled ? 'disabled' : ''} \${highlightWord.toLowerCase() === word.toLowerCase() ? 'highlight' : ''}"
        title="not found"
        click.trigger="onWordClicked(word)"
        >\${word}</em
      ><template if.bind="$index < customWords.length - 1"
        >\${seperator}</template
      >
    </template>
    <em else class="word">
      <template if.bind="!!this.label">n/a</template>
    </em>
  </template>

  <!-- Normal Words -->
  <template else>
    <let has-words.bind="words.length > 0"></let>
    <template if.bind="hasWords" repeat.for="wordOrPhrase of words">
      <template repeat.for="word of wordOrPhrase.split(' ')">
        <em class="word" click.trigger="onWordClicked(word)">\${word}</em
        ><span if.bind="$index < typedText.split(' ').length - 1">
        </span></template
      ><template if.bind="$index < words.length - 1">\${seperator}</template>
    </template>
    <em else class="word">
      <template if.bind="!!this.label">n/a</template>
    </em>
  </template>
</section>
`,Yg=[],Xg={};let el;function Yk(i){el||(el=ie.define({name:Jg,template:Wl,dependencies:Yg,bindables:Xg})),i.register(el)}const Xk=Object.freeze(Object.defineProperty({__proto__:null,bindables:Xg,default:Wl,dependencies:Yg,name:Jg,register:Yk,template:Wl},Symbol.toStringTag,{value:"Module"}));var Zk=Object.create,th=Object.defineProperty,e1=Object.getOwnPropertyDescriptor,t1=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),zr=i=>{throw TypeError(i)},s1=(i,e,t)=>e in i?th(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Ju=(i,e)=>th(i,"name",{value:e,configurable:!0}),i1=i=>[,,,Zk(null)],Zg=["class","method","getter","setter","accessor","field","value","get","set"],Un=i=>i!==void 0&&typeof i!="function"?zr("Function expected"):i,n1=(i,e,t,s,n)=>({kind:Zg[i],name:e,metadata:s,addInitializer:r=>t._?zr("Already initialized"):n.push(Un(r||null))}),r1=(i,e)=>s1(e,t1("metadata"),i[3]),ze=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)e&1?r[n].call(t):s=r[n].call(t,s);return s},Ls=(i,e,t,s,n,r)=>{var o,a,l,c,u,h=e&7,d=!!(e&8),p=!!(e&16),f=h>3?i.length+1:h?d?1:2:0,_=Zg[h+5],g=h>3&&(i[f-1]=[]),v=i[f]||(i[f]=[]),m=h&&(!p&&!d&&(n=n.prototype),h<5&&(h>3||!p)&&e1(h<4?n:{get[t](){return Yu(this,r)},set[t](w){return Xu(this,r,w)}},t));h?p&&h<4&&Ju(r,(h>2?"set ":h>1?"get ":"")+t):Ju(n,t);for(var A=s.length-1;A>=0;A--)c=n1(h,t,l={},i[3],v),h&&(c.static=d,c.private=p,u=c.access={has:p?w=>o1(n,w):w=>t in w},h^3&&(u.get=p?w=>(h^1?Yu:a1)(w,n,h^4?r:m.get):w=>w[t]),h>2&&(u.set=p?(w,k)=>Xu(w,n,k,h^4?r:m.set):(w,k)=>w[t]=k)),a=(0,s[A])(h?h<4?p?r:m[_]:h>4?void 0:{get:m.get,set:m.set}:n,c),l._=1,h^4||a===void 0?Un(a)&&(h>4?g.unshift(a):h?p?r=a:m[_]=a:n=a):typeof a!="object"||a===null?zr("Object expected"):(Un(o=a.get)&&(m.get=o),Un(o=a.set)&&(m.set=o),Un(o=a.init)&&g.unshift(o));return h||r1(i,n),m&&th(n,t,m),p?h^4?r:m:n},sh=(i,e,t)=>e.has(i)||zr("Cannot "+t),o1=(i,e)=>Object(e)!==e?zr('Cannot use the "in" operator on this value'):i.has(e),Yu=(i,e,t)=>(sh(i,e,"read from private field"),t?t.call(i):e.get(i)),Xu=(i,e,t,s)=>(sh(i,e,"write to private field"),s?s.call(i,t):e.set(i,t),t),a1=(i,e,t)=>(sh(i,e,"access private method"),t),e_,t_,s_,i_,n_,r_,o_,a_,l_,he;l_=[Os(Xk)],a_=[it()],o_=[it()],r_=[it()],n_=[it()],i_=[it()],s_=[it()],t_=[it()],e_=[it()];class Pt{constructor(){this.label=ze(he,8,this,""),ze(he,11,this),this.words=ze(he,12,this,[]),ze(he,15,this),this.customWords=ze(he,16,this,[]),ze(he,19,this),this.highlightWord=ze(he,20,this,""),ze(he,23,this),this.seperator=ze(he,24,this,","),ze(he,27,this),this.shouldSort=ze(he,28,this,!1),ze(he,31,this),this.debug=ze(he,32,this,!1),ze(he,35,this),this.onWordClicked=ze(he,36,this,()=>{}),ze(he,39,this),this.finalLabel=""}wordsChanged(){this.shouldSort&&(this.words=this.words.sort())}attached(){this.wordsChanged(),this.label&&(this.finalLabel=`${this.label}: `)}shouldHighlightWord(e){return this.highlightWord.toLowerCase()===e.toLowerCase()}}he=i1();Ls(he,5,"label",a_,Pt);Ls(he,5,"words",o_,Pt);Ls(he,5,"customWords",r_,Pt);Ls(he,5,"highlightWord",n_,Pt);Ls(he,5,"seperator",i_,Pt);Ls(he,5,"shouldSort",s_,Pt);Ls(he,5,"debug",t_,Pt);Ls(he,5,"onWordClicked",e_,Pt);Pt=Ls(he,0,"LabeledWordList",l_,Pt);ze(he,1,Pt);const c_="popover",ql=`<div click.trigger="triggerClicked()" ref="clickTriggerRef">
  <au-slot name="trigger">.. trigger here ..</au-slot>
</div>

<template if.bind="isOpen">
  <section class="popover-container" ref="popoverContainerRef">
    <div class="content-header">
      <div class="pin">
        <button
          class="icon-button \${keepOpen ? 'active' : ''}"
          click.trigger="onPinClicked()"
        >
          📌
        </button>
      </div>
    </div>
    <p class="content-container">
      <au-slot name="content">.. content here ..</au-slot>
    </p>
  </section>
</template>
`,h_=[],u_={};let tl;function l1(i){tl||(tl=ie.define({name:c_,template:ql,dependencies:h_,bindables:u_})),i.register(tl)}const c1=Object.freeze(Object.defineProperty({__proto__:null,bindables:u_,default:ql,dependencies:h_,name:c_,register:l1,template:ql},Symbol.toStringTag,{value:"Module"}));var h1=Object.create,ih=Object.defineProperty,u1=Object.getOwnPropertyDescriptor,d1=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),d_=i=>{throw TypeError(i)},p1=(i,e,t)=>e in i?ih(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,f1=(i,e)=>ih(i,"name",{value:e,configurable:!0}),g1=i=>[,,,h1(null)],_1=["class","method","getter","setter","accessor","field","value","get","set"],p_=i=>i!==void 0&&typeof i!="function"?d_("Function expected"):i,m1=(i,e,t,s,n)=>({kind:_1[i],name:e,metadata:s,addInitializer:r=>t._?d_("Already initialized"):n.push(p_(r||null))}),v1=(i,e)=>p1(e,d1("metadata"),i[3]),b1=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)r[n].call(t);return s},w1=(i,e,t,s,n,r)=>{var o,a,l,c=e&7,u=!!(e&16),h=0,d=i[h]||(i[h]=[]),p=c&&(n=n.prototype,c<5&&(c>3||!u)&&u1(n,t));f1(n,t);for(var f=s.length-1;f>=0;f--)l=m1(c,t,a={},i[3],d),o=(0,s[f])(n,l),a._=1,p_(o)&&(n=o);return v1(i,n),p&&ih(n,t,p),u?c^4?r:p:n},f_,nh;f_=[Os(c1)];class Wo{constructor(){this.popoverContainerRef=null,this.clickTriggerRef=null,this.isOpen=!1,this.keepOpen=!1}attached(){Tg(this.popoverContainerRef,()=>{this.keepOpen||(this.isOpen=!1)},[this.clickTriggerRef])}triggerClicked(){this.isOpen=!this.isOpen}onPinClicked(){this.keepOpen=!this.keepOpen}}nh=g1();Wo=w1(nh,0,"Popover",f_,Wo);b1(nh,1,Wo);const g_="dictionary",Kl=`<section class="above-header" style="top: -\${aboveHeaderTop}px">
  <div class="space-between">
    <!-- Look up history -->
    <div class="look-up-history-container" ref="lookUpHistoryContainerRef">
      <labeled-word-list
        custom-words.bind="Array.from(internalLookUpHistory)"
        seperator=" >"
        highlight-word.bind="word"
        on-word-clicked.bind="lookUp"
      ></labeled-word-list>
    </div>
    <div class="search-container">
      <!-- Search -->
      <div class="flex-okay">
        <input
          type="text"
          placeholder="Search..."
          value.bind="searchValue"
          keydown.trigger="searchOnKeydown"
        />
        <div class="search-help">Press Enter to search</div>
      </div>
    </div>
  </div>
</section>

<!-- Not Found -->
<!-- <section class="not-found" if.bind="!definition">Nothing found huhu</section> -->
<!-- Main -->
<section class="main">
  <!-- Header -->
  <section class="header">
    <h4>
      <span class="title">\${finalWord}</span>
    </h4>
    <labeled-word-list
      if.bind="definition.SYNONYMS.length > 0"
      label="Synonyms"
      words.bind="definition.SYNONYMS"
      on-word-clicked.bind="lookUp"
    ></labeled-word-list>
    <labeled-word-list
      if.bind="definition.ANTONYMS.length > 0"
      label="Antonyms"
      words.bind="definition.ANTONYMS"
      on-word-clicked.bind="lookUp"
    ></labeled-word-list>
  </section>

  <!-- Meaning -->
  <section class="meanings-container">
    <h3>Meanings:</h3>
    <template
      repeat.for="[wordType, definition, otherSynonyms, examplesPhrases] of meanings"
    >
      <section class="meaning">
        \${$index + 1}.
        <span class="word-type word" click.trigger="lookUp(wordType)"
          >(\${wordType})</span
        >
        <span
          class="word-definition"
          repeat.for="word of definition.split(' ')"
        >
          <span class="word" click.trigger="lookUp(word)">\${word}</span>
        </span>

        <!-- Synonym -->
        <ul class="other-synonym-container" if.bind="otherSynonyms.length > 0">
          <labeled-word-list
            label="Other Syonyms"
            words.bind="otherSynonyms"
            on-word-clicked.bind="lookUp"
          ></labeled-word-list>
        </ul>

        <!-- Example -->
        <ul
          class="example-phrases-container"
          if.bind="examplesPhrases.length > 0"
        >
          <label>Examples: </label>
          <li repeat.for="phrase of examplesPhrases">
            <span repeat.for="word of phrase.split(' ')">
              <span class="word" click.trigger="lookUp(word)">\${word}</span>
            </span>
          </li>
        </ul>
      </section>
    </template>
  </section>
</section>
`,__=[],m_={};let sl;function y1(i){sl||(sl=ie.define({name:g_,template:Kl,dependencies:__,bindables:m_})),i.register(sl)}const C1=Object.freeze(Object.defineProperty({__proto__:null,bindables:m_,default:Kl,dependencies:__,name:g_,register:y1,template:Kl},Symbol.toStringTag,{value:"Module"})),k1="modulepreload",A1=function(i){return"/"+i},Zu={},fe=function(e,t,s){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),o=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));n=Promise.all(t.map(a=>{if(a=A1(a),a in Zu)return;Zu[a]=!0;const l=a.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${c}`))return;const u=document.createElement("link");if(u.rel=l?"stylesheet":k1,l||(u.as="script",u.crossOrigin=""),u.href=a,o&&u.setAttribute("nonce",o),document.head.appendChild(u),l)return new Promise((h,d)=>{u.addEventListener("load",h),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${a}`)))})}))}return n.then(()=>e()).catch(r=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=r,window.dispatchEvent(o),!o.defaultPrevented)throw r})};async function ed(i){const e=i.toUpperCase();switch(i[0].toUpperCase()){case"A":const s=await fe(()=>import("./a-BwIJXYty.js"),[]);return console.log("[dictionary.ts,37] A: ",s),s[e];case"B":return(await fe(()=>import("./b-_m9_HH87.js"),[]))[e];case"C":return(await fe(()=>import("./c-Cuyx-jM3.js"),[]))[e];case"D":return(await fe(()=>import("./d-Bi9S27ks.js"),[]))[e];case"E":return(await fe(()=>import("./e-kvT8YCMf.js"),[]))[e];case"F":return(await fe(()=>import("./f-lrTNY7pV.js"),[]))[e];case"G":return(await fe(()=>import("./g-C7QSRrtD.js"),[]))[e];case"H":return(await fe(()=>import("./h-DAX9RYBW.js"),[]))[e];case"I":return(await fe(()=>import("./i-ButwP9G7.js"),[]))[e];case"J":return(await fe(()=>import("./j-YmCbq3O_.js"),[]))[e];case"K":return(await fe(()=>import("./k-CCp2uGXt.js"),[]))[e];case"L":return(await fe(()=>import("./l-Df1vuvDh.js"),[]))[e];case"M":return(await fe(()=>import("./m-DQBiffsQ.js"),[]))[e];case"N":return(await fe(()=>import("./n-Ct5kVBXr.js"),[]))[e];case"O":return(await fe(()=>import("./o-BdjmJ4yw.js"),[]))[e];case"P":return(await fe(()=>import("./p-MZIHm9sp.js"),[]))[e];case"Q":return(await fe(()=>import("./q-CSTZSpYg.js"),[]))[e];case"R":return(await fe(()=>import("./r-FEhec67G.js"),[]))[e];case"S":return(await fe(()=>import("./s-BBiLAbR3.js"),[]))[e];case"T":return(await fe(()=>import("./t-D-xQAxqS.js"),[]))[e];case"U":return(await fe(()=>import("./u-DBYfa05T.js"),[]))[e];case"V":return(await fe(()=>import("./v-D2MXytHe.js"),[]))[e];case"W":return(await fe(()=>import("./w-DiU8njK9.js"),[]))[e];case"X":return(await fe(()=>import("./x-C_cGF6BW.js"),[]))[e];case"Y":return(await fe(()=>import("./y-DGku_oXE.js"),[]))[e];case"Z":return(await fe(()=>import("./z-BB8QSo0M.js"),[]))[e];default:return}}var $1=Object.create,rh=Object.defineProperty,S1=Object.getOwnPropertyDescriptor,x1=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),Hr=i=>{throw TypeError(i)},T1=(i,e,t)=>e in i?rh(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,td=(i,e)=>rh(i,"name",{value:e,configurable:!0}),I1=i=>[,,,$1(null)],v_=["class","method","getter","setter","accessor","field","value","get","set"],Wn=i=>i!==void 0&&typeof i!="function"?Hr("Function expected"):i,P1=(i,e,t,s,n)=>({kind:v_[i],name:e,metadata:s,addInitializer:r=>t._?Hr("Already initialized"):n.push(Wn(r||null))}),E1=(i,e)=>T1(e,x1("metadata"),i[3]),qn=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)e&1?r[n].call(t):s=r[n].call(t,s);return s},oh=(i,e,t,s,n,r)=>{var o,a,l,c,u,h=e&7,d=!!(e&8),p=!!(e&16),f=h>3?i.length+1:h?d?1:2:0,_=v_[h+5],g=h>3&&(i[f-1]=[]),v=i[f]||(i[f]=[]),m=h&&(!p&&!d&&(n=n.prototype),h<5&&(h>3||!p)&&S1(h<4?n:{get[t](){return sd(this,r)},set[t](w){return id(this,r,w)}},t));h?p&&h<4&&td(r,(h>2?"set ":h>1?"get ":"")+t):td(n,t);for(var A=s.length-1;A>=0;A--)c=P1(h,t,l={},i[3],v),h&&(c.static=d,c.private=p,u=c.access={has:p?w=>R1(n,w):w=>t in w},h^3&&(u.get=p?w=>(h^1?sd:O1)(w,n,h^4?r:m.get):w=>w[t]),h>2&&(u.set=p?(w,k)=>id(w,n,k,h^4?r:m.set):(w,k)=>w[t]=k)),a=(0,s[A])(h?h<4?p?r:m[_]:h>4?void 0:{get:m.get,set:m.set}:n,c),l._=1,h^4||a===void 0?Wn(a)&&(h>4?g.unshift(a):h?p?r=a:m[_]=a:n=a):typeof a!="object"||a===null?Hr("Object expected"):(Wn(o=a.get)&&(m.get=o),Wn(o=a.set)&&(m.set=o),Wn(o=a.init)&&g.unshift(o));return h||E1(i,n),m&&rh(n,t,m),p?h^4?r:m:n},ah=(i,e,t)=>e.has(i)||Hr("Cannot "+t),R1=(i,e)=>Object(e)!==e?Hr('Cannot use the "in" operator on this value'):i.has(e),sd=(i,e,t)=>(ah(i,e,"read from private field"),t?t.call(i):e.get(i)),id=(i,e,t,s)=>(ah(i,e,"write to private field"),s?s.call(i,t):e.set(i,t),t),O1=(i,e,t)=>(ah(i,e,"access private method"),t),b_,w_,y_,ks;y_=[Os(C1)],w_=[it()],b_=[it()];class Cn{constructor(){this.word=qn(ks,8,this,""),qn(ks,11,this),this.lookUpHistory=qn(ks,12,this,[]),qn(ks,15,this),this.internalLookUpHistory=new Map([]),this.lookUpHistoryContainerRef=null,this.finalWord="",this.searchValue=void 0,this.definition=void 0,this.wordType=void 0,this.meanings=[],this.aboveHeaderTop=-52,this.lookUp=e=>{e&&(this.word=e==null?void 0:e.trim(),this.wordChanged(this.word))}}async wordChanged(e){var s;if(!e)return;const t=await ed(e);this.handleLookUpHistory(this.word,t),t&&(this.finalWord=e,this.definition=t,Object.keys(((s=this.definition)==null?void 0:s.MEANINGS)??{}).length>0?this.meanings=Object.values(this.definition.MEANINGS):this.meanings=[],this.calculateAboveHeaderHeight())}attached(){this.initInternalLookUpHistory(),this.calculateAboveHeaderHeight(),this.wordChanged(this.word)}async initInternalLookUpHistory(){this.lookUpHistory;const e=new Map;for await(const t of this.lookUpHistory){const s=await ed(t),n={word:t,disabled:!s};e.set(t,n)}this.internalLookUpHistory=new Map([...Array.from(this.internalLookUpHistory),...Array.from(e)])}searchOnKeydown(e){e.key==="Enter"&&this.lookUp(this.searchValue)}handleLookUpHistory(e,t){Array.from(this.internalLookUpHistory.keys()).find(n=>n.toLowerCase()===e.toLowerCase())||(this.internalLookUpHistory.set(e,{word:e,disabled:!t}),this.internalLookUpHistory=new Map(this.internalLookUpHistory))}calculateAboveHeaderHeight(){this.lookUpHistoryContainerRef&&window.setTimeout(()=>{const e=window.getComputedStyle(this.lookUpHistoryContainerRef).height,s=ik(e)+22;this.aboveHeaderTop=s},0)}}ks=I1();oh(ks,5,"word",w_,Cn);oh(ks,5,"lookUpHistory",b_,Cn);Cn=oh(ks,0,"Dictionary",y_,Cn);qn(ks,1,Cn);const C_="tab-drawer",Gl=`<div class="tab-drawer-container">
  <!-- 1. Tab Bar -->
  <section ref="tabBarRef" class="tab-bar">
    <div
      repeat.for="tab of tabs"
      class="tab-bar__tab \${(this.activeTab?.title === tab.title && isDrawerOpen) ? 'active' : ''}"
      click.trigger="toggleDrawer(tab.title)"
      data-shortcut.bind="tab.shortcut"
    >
      \${tab.title}
      <span if.bind="tab.shortcut" class="tab-shortcut">
        (\${tab.shortcut})</span
      >
    </div>
  </section>

  <!-- 2. Drawer -->
  <section class="drawer-overlay \${isDrawerOpen ? 'active' : ''}">
    <div
      ref="drawerContentRef"
      class="drawer__content \${isDrawerOpen ? 'active' : ''}"
    >
      <au-slot name="content">.. content here ..</au-slot>
    </div>
  </section>
</div>
`,k_=[],A_={};let il;function L1(i){il||(il=ie.define({name:C_,template:Gl,dependencies:k_,bindables:A_})),i.register(il)}const V1=Object.freeze(Object.defineProperty({__proto__:null,bindables:A_,default:Gl,dependencies:k_,name:C_,register:L1,template:Gl},Symbol.toStringTag,{value:"Module"}));var D1=Object.create,lh=Object.defineProperty,B1=Object.getOwnPropertyDescriptor,N1=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),Ur=i=>{throw TypeError(i)},M1=(i,e,t)=>e in i?lh(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,nd=(i,e)=>lh(i,"name",{value:e,configurable:!0}),j1=i=>[,,,D1(null)],$_=["class","method","getter","setter","accessor","field","value","get","set"],Kn=i=>i!==void 0&&typeof i!="function"?Ur("Function expected"):i,F1=(i,e,t,s,n)=>({kind:$_[i],name:e,metadata:s,addInitializer:r=>t._?Ur("Already initialized"):n.push(Kn(r||null))}),z1=(i,e)=>M1(e,N1("metadata"),i[3]),ms=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)e&1?r[n].call(t):s=r[n].call(t,s);return s},Wr=(i,e,t,s,n,r)=>{var o,a,l,c,u,h=e&7,d=!!(e&8),p=!!(e&16),f=h>3?i.length+1:h?d?1:2:0,_=$_[h+5],g=h>3&&(i[f-1]=[]),v=i[f]||(i[f]=[]),m=h&&(!p&&!d&&(n=n.prototype),h<5&&(h>3||!p)&&B1(h<4?n:{get[t](){return rd(this,r)},set[t](w){return od(this,r,w)}},t));h?p&&h<4&&nd(r,(h>2?"set ":h>1?"get ":"")+t):nd(n,t);for(var A=s.length-1;A>=0;A--)c=F1(h,t,l={},i[3],v),h&&(c.static=d,c.private=p,u=c.access={has:p?w=>H1(n,w):w=>t in w},h^3&&(u.get=p?w=>(h^1?rd:U1)(w,n,h^4?r:m.get):w=>w[t]),h>2&&(u.set=p?(w,k)=>od(w,n,k,h^4?r:m.set):(w,k)=>w[t]=k)),a=(0,s[A])(h?h<4?p?r:m[_]:h>4?void 0:{get:m.get,set:m.set}:n,c),l._=1,h^4||a===void 0?Kn(a)&&(h>4?g.unshift(a):h?p?r=a:m[_]=a:n=a):typeof a!="object"||a===null?Ur("Object expected"):(Kn(o=a.get)&&(m.get=o),Kn(o=a.set)&&(m.set=o),Kn(o=a.init)&&g.unshift(o));return h||z1(i,n),m&&lh(n,t,m),p?h^4?r:m:n},ch=(i,e,t)=>e.has(i)||Ur("Cannot "+t),H1=(i,e)=>Object(e)!==e?Ur('Cannot use the "in" operator on this value'):i.has(e),rd=(i,e,t)=>(ch(i,e,"read from private field"),t?t.call(i):e.get(i)),od=(i,e,t,s)=>(ch(i,e,"write to private field"),s?s.call(i,t):e.set(i,t),t),U1=(i,e,t)=>(ch(i,e,"access private method"),t),S_,x_,T_,I_,P_,nt;P_=[Os(V1)],I_=[it()],T_=[it()],x_=[it()],S_=[it()];class Ys{constructor(){this.tabs=ms(nt,8,this,[]),ms(nt,11,this),this.activeTab=ms(nt,12,this,null),ms(nt,15,this),this.activeTabName=ms(nt,16,this,""),ms(nt,19,this),this.isDrawerOpen=ms(nt,20,this,!0),ms(nt,23,this),this.drawerContentRef=null,this.tabBarRef=null,this.message="tab-drawer.html"}activeTabNameChanged(e){this.openDrawer(e)}attached(){this.activeTab=this.tabs[kg],Tg(this.drawerContentRef,()=>{this.isDrawerOpen&&(this.isDrawerOpen=!1)},[this.tabBarRef],[".word"])}openDrawer(e){this.isDrawerOpen=!0;const t=this.tabs.find(s=>s.title===e);this.activeTab=t}closeDrawer(){this.isDrawerOpen=!1}toggleDrawer(e){var n;if(!this.isDrawerOpen){this.openDrawer(e);return}const t=this.tabs.find(r=>r.title===e);if(((n=this.activeTab)==null?void 0:n.title)===(t==null?void 0:t.title)){this.closeDrawer();return}this.activeTab=t}}nt=j1();Wr(nt,5,"tabs",I_,Ys);Wr(nt,5,"activeTab",T_,Ys);Wr(nt,5,"activeTabName",x_,Ys);Wr(nt,5,"isDrawerOpen",S_,Ys);Ys=Wr(nt,0,"TabDrawer",P_,Ys);ms(nt,1,Ys);const E_="topics",Ql=`<div class="topics-container">
  <!-- Left -->
  <section class="topics-list-container">
    <div class="topics-list-header">
      <h4>\${getTranslation("topic.list")}</h4>
      <button
        type="button"
        class="icon-button__outlined"
        click.trigger="addTopic()"
      >
        +
      </button>
    </div>

    <div class="topics-list">
      <div
        class="topic \${this.selectedTopic.title === topic.title ? 'active' : ''}"
        repeat.for="topic of topics"
        click.trigger="selectTopic(topic.title)"
      >
        <div class="topic-title">
          <template if.bind="isEmptyTopic(topic) && isEditTopicTitle">
            <input
              class="new-topic-title"
              type="text"
              value.bind="topic.title"
              blur.trigger="titleForNewTopicAdded(topic)"
              focus="true"
            />
          </template>
          <template else>\${topic.title}</template>
        </div>
      </div>
    </div>
  </section>

  <!-- Right -->
  <section class="selected-topic-container">
    <div class="content-list-header">
      <h4>Content</h4>
      <button
        type="button"
        class="icon-button__outlined"
        click.trigger="addContent(this.selectedTopic)"
      >
        +
      </button>
    </div>

    <div class="content-container">
      <div class="content" repeat.for="content of selectedTopic.content">
        <textarea
          value.bind="content.text"
          placeholder="\${content.text === '' ? 'add new content' : ''}"
          blur.trigger="contentChanged(content.id, content.text)"
          autosize
        ></textarea>
      </div>
    </div>
  </section>
</div>
`,R_=[],O_={};let nl;function W1(i){nl||(nl=ie.define({name:E_,template:Ql,dependencies:R_,bindables:O_})),i.register(nl)}const q1=Object.freeze(Object.defineProperty({__proto__:null,bindables:O_,default:Ql,dependencies:R_,name:E_,register:W1,template:Ql},Symbol.toStringTag,{value:"Module"}));var K1=Object.create,hh=Object.defineProperty,G1=Object.getOwnPropertyDescriptor,Q1=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),qr=i=>{throw TypeError(i)},J1=(i,e,t)=>e in i?hh(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,ad=(i,e)=>hh(i,"name",{value:e,configurable:!0}),Y1=i=>[,,,K1(null)],L_=["class","method","getter","setter","accessor","field","value","get","set"],Gn=i=>i!==void 0&&typeof i!="function"?qr("Function expected"):i,X1=(i,e,t,s,n)=>({kind:L_[i],name:e,metadata:s,addInitializer:r=>t._?qr("Already initialized"):n.push(Gn(r||null))}),Z1=(i,e)=>J1(e,Q1("metadata"),i[3]),Jl=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)e&1?r[n].call(t):s=r[n].call(t,s);return s},V_=(i,e,t,s,n,r)=>{var o,a,l,c,u,h=e&7,d=!!(e&8),p=!!(e&16),f=h>3?i.length+1:h?d?1:2:0,_=L_[h+5],g=h>3&&(i[f-1]=[]),v=i[f]||(i[f]=[]),m=h&&(!p&&!d&&(n=n.prototype),h<5&&(h>3||!p)&&G1(h<4?n:{get[t](){return ld(this,r)},set[t](w){return cd(this,r,w)}},t));h?p&&h<4&&ad(r,(h>2?"set ":h>1?"get ":"")+t):ad(n,t);for(var A=s.length-1;A>=0;A--)c=X1(h,t,l={},i[3],v),h&&(c.static=d,c.private=p,u=c.access={has:p?w=>eA(n,w):w=>t in w},h^3&&(u.get=p?w=>(h^1?ld:tA)(w,n,h^4?r:m.get):w=>w[t]),h>2&&(u.set=p?(w,k)=>cd(w,n,k,h^4?r:m.set):(w,k)=>w[t]=k)),a=(0,s[A])(h?h<4?p?r:m[_]:h>4?void 0:{get:m.get,set:m.set}:n,c),l._=1,h^4||a===void 0?Gn(a)&&(h>4?g.unshift(a):h?p?r=a:m[_]=a:n=a):typeof a!="object"||a===null?qr("Object expected"):(Gn(o=a.get)&&(m.get=o),Gn(o=a.set)&&(m.set=o),Gn(o=a.init)&&g.unshift(o));return h||Z1(i,n),m&&hh(n,t,m),p?h^4?r:m:n},uh=(i,e,t)=>e.has(i)||qr("Cannot "+t),eA=(i,e)=>Object(e)!==e?qr('Cannot use the "in" operator on this value'):i.has(e),ld=(i,e,t)=>(uh(i,e,"read from private field"),t?t.call(i):e.get(i)),cd=(i,e,t,s)=>(uh(i,e,"write to private field"),s?s.call(i,t):e.set(i,t),t),tA=(i,e,t)=>(uh(i,e,"access private method"),t),D_,B_,kn;const hd=[{id:Ii(),title:"Living",content:[{text:"live one"},{text:"live two"}]},{id:Ii(),title:"Education",content:[{text:"edu one"},{text:"edu two"}]}];B_=[Os(q1)],D_=[it()];class Ir{constructor(){this.onTopicChange=Jl(kn,8,this,()=>{}),Jl(kn,11,this),this.getTranslation=zn,this.topics=[],this.selectedTopic=null,this.isEditTopicTitle=!1}attached(){const e=At.getItem();this.topics=e.topics??hd;const t=At.getSelectedTopic();t?this.selectedTopic=t:this.selectedTopic=this.topics[1]}addTopic(){this.isEditTopicTitle=!0;let e=zn("untitled");this.findTopicByTitle(e)&&(e+=this.getNumOfUntitledTitles());const s={id:Ii(),title:e,content:[{id:Ii(),text:""}]};this.topics=[s,...this.topics],this.selectTopic(e),At.setItem({topics:this.topics})}isEmptyTopic(e){const t=e.content.length===1&&e.content[0].text==="";return e.title===zn("untitled")&&t}findTopicByTitle(e){return this.topics.find(t=>t.title===e)}findTopicById(e){return this.topics.find(t=>t.id===e)}getNumOfUntitledTitles(){return this.topics.filter(s=>s.title.includes(zn("untitled"))).length}titleForNewTopicAdded(e){this.isEditTopicTitle=!1,this.topics=this.topics.filter(t=>t.id!==e.id),this.topics=[e,...this.topics],At.setItem({topics:this.topics})}addContent(e){const t={id:Ii(),text:""};e.content=[t,...e.content],At.setItem({topics:this.topics})}selectTopic(e){var s;const t=this.topics.find(n=>n.title===e);this.selectedTopic=t??null,this.onTopicChange(this.selectedTopic),At.setItem({selectedTopicId:(s=this.selectedTopic)==null?void 0:s.id})}refreshTopic(){const e=At.getItem();this.topics=e.topics??hd;const t=At.getSelectedTopic();t?this.selectedTopic=t:this.selectedTopic=this.topics[1]}contentChanged(e,t){const s=this.findTopicById(this.selectedTopic.id),n=s.content.find(r=>r.id===e);n.text=t,At.setItem({topics:this.topics}),this.refreshTopic(),this.onTopicChange(s)}}kn=Y1();V_(kn,5,"onTopicChange",D_,Ir);Ir=V_(kn,0,"Topics",B_,Ir);Jl(kn,1,Ir);const N_="scratch",Yl=`<template as-custom-element="my-element">
  <bindable name="people"></bindable>
  <au-slot name="grid">
    <au-slot name="header">
      <h4>First Name</h4>
      <h4>Last Name</h4>
    </au-slot>
    <template repeat.for="person of people">
      <au-slot name="content" expose.bind="{ person, $event, $odd, $index }">
        <div>\${person.firstName}</div>
        <div>\${person.lastName}</div>
      </au-slot>
    </template>
  </au-slot>
</template>

<my-element people.bind="people">
  <template au-slot="header">
    <h4>Meta</h4>
    <h4>Surname</h4>
    <h4>Given name</h4>
  </template>
  <template au-slot="content">
    <div>\${$host.$index}-\${$host.$even}-\${$host.$odd}</div>
    <div>\${$host.person.lastName}</div>
    <div>\${$host.person.firstName}</div>
  </template>
</my-element>
`,M_=[],j_={};let rl;function sA(i){rl||(rl=ie.define({name:N_,template:Yl,dependencies:M_,bindables:j_})),i.register(rl)}const iA=Object.freeze(Object.defineProperty({__proto__:null,bindables:j_,default:Yl,dependencies:M_,name:N_,register:sA,template:Yl},Symbol.toStringTag,{value:"Module"}));var nA=Object.create,dh=Object.defineProperty,rA=Object.getOwnPropertyDescriptor,oA=(i,e)=>(e=Symbol[i])?e:Symbol.for("Symbol."+i),F_=i=>{throw TypeError(i)},aA=(i,e,t)=>e in i?dh(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,lA=(i,e)=>dh(i,"name",{value:e,configurable:!0}),cA=i=>[,,,nA(null)],hA=["class","method","getter","setter","accessor","field","value","get","set"],z_=i=>i!==void 0&&typeof i!="function"?F_("Function expected"):i,uA=(i,e,t,s,n)=>({kind:hA[i],name:e,metadata:s,addInitializer:r=>t._?F_("Already initialized"):n.push(z_(r||null))}),dA=(i,e)=>aA(e,oA("metadata"),i[3]),pA=(i,e,t,s)=>{for(var n=0,r=i[e>>1],o=r&&r.length;n<o;n++)r[n].call(t);return s},fA=(i,e,t,s,n,r)=>{var o,a,l,c=e&7,u=!!(e&16),h=0,d=i[h]||(i[h]=[]),p=c&&(n=n.prototype,c<5&&(c>3||!u)&&rA(n,t));lA(n,t);for(var f=s.length-1;f>=0;f--)l=uA(c,t,a={},i[3],d),o=(0,s[f])(n,l),a._=1,z_(o)&&(n=o);return dA(i,n),p&&dh(n,t,p),u?c^4?r:p:n},H_,ph;H_=[Os(iA)];class qo{constructor(){this.message="Scratch"}}ph=cA();qo=fA(ph,0,"Scratch",H_,qo);pA(ph,1,qo);const gA=[Uo],_A=[Pt,Wo],mA=[Cn,Ys,Ir];hr.register(BC.customize({useUrlFragmentHash:!0})).register([...gA,..._A,...mA,qo]).register(bt.singleton(zo,zo)).app(Ho).start();
